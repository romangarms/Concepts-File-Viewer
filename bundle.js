var sE=Object.create;var Wo=Object.defineProperty;var oE=Object.getOwnPropertyDescriptor;var lE=Object.getOwnPropertyNames;var cE=Object.getPrototypeOf,uE=Object.prototype.hasOwnProperty;var Og=(n,t)=>()=>(n&&(t=n(n=0)),t);var xe=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),hE=(n,t)=>{for(var e in t)Wo(n,e,{get:t[e],enumerable:!0})},Ng=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of lE(t))!uE.call(n,r)&&r!==e&&Wo(n,r,{get:()=>t[r],enumerable:!(i=oE(t,r))||i.enumerable});return n};var tt=(n,t,e)=>(e=n!=null?sE(cE(n)):{},Ng(t||!n||!n.__esModule?Wo(e,"default",{value:n,enumerable:!0}):e,n)),dE=n=>Ng(Wo({},"__esModule",{value:!0}),n);var Pg=xe(Zo=>{"use strict";B();Zo.byteLength=pE;Zo.toByteArray=gE;Zo.fromByteArray=bE;var zn=[],yn=[],fE=typeof Uint8Array<"u"?Uint8Array:Array,ih="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(mr=0,Bg=ih.length;mr<Bg;++mr)zn[mr]=ih[mr],yn[ih.charCodeAt(mr)]=mr;var mr,Bg;yn[45]=62;yn[95]=63;function kg(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var i=e===t?0:4-e%4;return[e,i]}function pE(n){var t=kg(n),e=t[0],i=t[1];return(e+i)*3/4-i}function mE(n,t,e){return(t+e)*3/4-e}function gE(n){var t,e=kg(n),i=e[0],r=e[1],a=new fE(mE(n,i,r)),s=0,o=r>0?i-4:i,l;for(l=0;l<o;l+=4)t=yn[n.charCodeAt(l)]<<18|yn[n.charCodeAt(l+1)]<<12|yn[n.charCodeAt(l+2)]<<6|yn[n.charCodeAt(l+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return r===2&&(t=yn[n.charCodeAt(l)]<<2|yn[n.charCodeAt(l+1)]>>4,a[s++]=t&255),r===1&&(t=yn[n.charCodeAt(l)]<<10|yn[n.charCodeAt(l+1)]<<4|yn[n.charCodeAt(l+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function yE(n){return zn[n>>18&63]+zn[n>>12&63]+zn[n>>6&63]+zn[n&63]}function vE(n,t,e){for(var i,r=[],a=t;a<e;a+=3)i=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),r.push(yE(i));return r.join("")}function bE(n){for(var t,e=n.length,i=e%3,r=[],a=16383,s=0,o=e-i;s<o;s+=a)r.push(vE(n,s,s+a>o?o:s+a));return i===1?(t=n[e-1],r.push(zn[t>>2]+zn[t<<4&63]+"==")):i===2&&(t=(n[e-2]<<8)+n[e-1],r.push(zn[t>>10]+zn[t>>4&63]+zn[t<<2&63]+"=")),r.join("")}});var Fg=xe(rh=>{B();rh.read=function(n,t,e,i,r){var a,s,o=r*8-i-1,l=(1<<o)-1,c=l>>1,u=-7,h=e?r-1:0,d=e?-1:1,f=n[t+h];for(h+=d,a=f&(1<<-u)-1,f>>=-u,u+=o;u>0;a=a*256+n[t+h],h+=d,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=i;u>0;s=s*256+n[t+h],h+=d,u-=8);if(a===0)a=1-c;else{if(a===l)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-c}return(f?-1:1)*s*Math.pow(2,a-i)};rh.write=function(n,t,e,i,r,a){var s,o,l,c=a*8-r-1,u=(1<<c)-1,h=u>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,y=i?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=u?(o=0,s=u):s+h>=1?(o=(t*l-1)*Math.pow(2,r),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;n[e+f]=o&255,f+=y,o/=256,r-=8);for(s=s<<r|o,c+=r;c>0;n[e+f]=s&255,f+=y,s/=256,c-=8);n[e+f-y]|=g*128}});var ty=xe(ta=>{"use strict";B();var ah=Pg(),Qr=Fg(),Ig=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ta.Buffer=N;ta.SlowBuffer=_E;ta.INSPECT_MAX_BYTES=50;var Qo=2147483647;ta.kMaxLength=Qo;N.TYPED_ARRAY_SUPPORT=wE();!N.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function wE(){try{let n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}}Object.defineProperty(N.prototype,"parent",{enumerable:!0,get:function(){if(N.isBuffer(this))return this.buffer}});Object.defineProperty(N.prototype,"offset",{enumerable:!0,get:function(){if(N.isBuffer(this))return this.byteOffset}});function ni(n){if(n>Qo)throw new RangeError('The value "'+n+'" is invalid for option "size"');let t=new Uint8Array(n);return Object.setPrototypeOf(t,N.prototype),t}function N(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ch(n)}return jg(n,t,e)}N.poolSize=8192;function jg(n,t,e){if(typeof n=="string")return EE(n,t);if(ArrayBuffer.isView(n))return AE(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(Hn(n,ArrayBuffer)||n&&Hn(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Hn(n,SharedArrayBuffer)||n&&Hn(n.buffer,SharedArrayBuffer)))return oh(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=n.valueOf&&n.valueOf();if(i!=null&&i!==n)return N.from(i,t,e);let r=xE(n);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return N.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}N.from=function(n,t,e){return jg(n,t,e)};Object.setPrototypeOf(N.prototype,Uint8Array.prototype);Object.setPrototypeOf(N,Uint8Array);function Gg(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function SE(n,t,e){return Gg(n),n<=0?ni(n):t!==void 0?typeof e=="string"?ni(n).fill(t,e):ni(n).fill(t):ni(n)}N.alloc=function(n,t,e){return SE(n,t,e)};function ch(n){return Gg(n),ni(n<0?0:uh(n)|0)}N.allocUnsafe=function(n){return ch(n)};N.allocUnsafeSlow=function(n){return ch(n)};function EE(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!N.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=Yg(n,t)|0,i=ni(e),r=i.write(n,t);return r!==e&&(i=i.slice(0,r)),i}function sh(n){let t=n.length<0?0:uh(n.length)|0,e=ni(t);for(let i=0;i<t;i+=1)e[i]=n[i]&255;return e}function AE(n){if(Hn(n,Uint8Array)){let t=new Uint8Array(n);return oh(t.buffer,t.byteOffset,t.byteLength)}return sh(n)}function oh(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&e===void 0?i=new Uint8Array(n):e===void 0?i=new Uint8Array(n,t):i=new Uint8Array(n,t,e),Object.setPrototypeOf(i,N.prototype),i}function xE(n){if(N.isBuffer(n)){let t=uh(n.length)|0,e=ni(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||dh(n.length)?ni(0):sh(n);if(n.type==="Buffer"&&Array.isArray(n.data))return sh(n.data)}function uh(n){if(n>=Qo)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qo.toString(16)+" bytes");return n|0}function _E(n){return+n!=n&&(n=0),N.alloc(+n)}N.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==N.prototype};N.compare=function(t,e){if(Hn(t,Uint8Array)&&(t=N.from(t,t.offset,t.byteLength)),Hn(e,Uint8Array)&&(e=N.from(e,e.offset,e.byteLength)),!N.isBuffer(t)||!N.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let a=0,s=Math.min(i,r);a<s;++a)if(t[a]!==e[a]){i=t[a],r=e[a];break}return i<r?-1:r<i?1:0};N.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};N.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return N.alloc(0);let i;if(e===void 0)for(e=0,i=0;i<t.length;++i)e+=t[i].length;let r=N.allocUnsafe(e),a=0;for(i=0;i<t.length;++i){let s=t[i];if(Hn(s,Uint8Array))a+s.length>r.length?(N.isBuffer(s)||(s=N.from(s)),s.copy(r,a)):Uint8Array.prototype.set.call(r,s,a);else if(N.isBuffer(s))s.copy(r,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return r};function Yg(n,t){if(N.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||Hn(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);let e=n.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&e===0)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return lh(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Jg(n).length;default:if(r)return i?-1:lh(n).length;t=(""+t).toLowerCase(),r=!0}}N.byteLength=Yg;function TE(n,t,e){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return PE(this,t,e);case"utf8":case"utf-8":return $g(this,t,e);case"ascii":return BE(this,t,e);case"latin1":case"binary":return kE(this,t,e);case"base64":return OE(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return FE(this,t,e);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),i=!0}}N.prototype._isBuffer=!0;function gr(n,t,e){let i=n[t];n[t]=n[e],n[e]=i}N.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)gr(this,e,e+1);return this};N.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)gr(this,e,e+3),gr(this,e+1,e+2);return this};N.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)gr(this,e,e+7),gr(this,e+1,e+6),gr(this,e+2,e+5),gr(this,e+3,e+4);return this};N.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?$g(this,0,t):TE.apply(this,arguments)};N.prototype.toLocaleString=N.prototype.toString;N.prototype.equals=function(t){if(!N.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:N.compare(this,t)===0};N.prototype.inspect=function(){let t="",e=ta.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Ig&&(N.prototype[Ig]=N.prototype.inspect);N.prototype.compare=function(t,e,i,r,a){if(Hn(t,Uint8Array)&&(t=N.from(t,t.offset,t.byteLength)),!N.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),a===void 0&&(a=this.length),e<0||i>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=i)return 0;if(r>=a)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,a>>>=0,this===t)return 0;let s=a-r,o=i-e,l=Math.min(s,o),c=this.slice(r,a),u=t.slice(e,i);for(let h=0;h<l;++h)if(c[h]!==u[h]){s=c[h],o=u[h];break}return s<o?-1:o<s?1:0};function Vg(n,t,e,i,r){if(n.length===0)return-1;if(typeof e=="string"?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,dh(e)&&(e=r?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(r)return-1;e=n.length-1}else if(e<0)if(r)e=0;else return-1;if(typeof t=="string"&&(t=N.from(t,i)),N.isBuffer(t))return t.length===0?-1:Ug(n,t,e,i,r);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):Ug(n,[t],e,i,r);throw new TypeError("val must be string, number or Buffer")}function Ug(n,t,e,i,r){let a=1,s=n.length,o=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(n.length<2||t.length<2)return-1;a=2,s/=2,o/=2,e/=2}function l(u,h){return a===1?u[h]:u.readUInt16BE(h*a)}let c;if(r){let u=-1;for(c=e;c<s;c++)if(l(n,c)===l(t,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===o)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(e+o>s&&(e=s-o),c=e;c>=0;c--){let u=!0;for(let h=0;h<o;h++)if(l(n,c+h)!==l(t,h)){u=!1;break}if(u)return c}return-1}N.prototype.includes=function(t,e,i){return this.indexOf(t,e,i)!==-1};N.prototype.indexOf=function(t,e,i){return Vg(this,t,e,i,!0)};N.prototype.lastIndexOf=function(t,e,i){return Vg(this,t,e,i,!1)};function RE(n,t,e,i){e=Number(e)||0;let r=n.length-e;i?(i=Number(i),i>r&&(i=r)):i=r;let a=t.length;i>a/2&&(i=a/2);let s;for(s=0;s<i;++s){let o=parseInt(t.substr(s*2,2),16);if(dh(o))return s;n[e+s]=o}return s}function CE(n,t,e,i){return Jo(lh(t,n.length-e),n,e,i)}function DE(n,t,e,i){return Jo(HE(t),n,e,i)}function ME(n,t,e,i){return Jo(Jg(t),n,e,i)}function LE(n,t,e,i){return Jo(jE(t,n.length-e),n,e,i)}N.prototype.write=function(t,e,i,r){if(e===void 0)r="utf8",i=this.length,e=0;else if(i===void 0&&typeof e=="string")r=e,i=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(i)?(i=i>>>0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-e;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return RE(this,t,e,i);case"utf8":case"utf-8":return CE(this,t,e,i);case"ascii":case"latin1":case"binary":return DE(this,t,e,i);case"base64":return ME(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return LE(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}};N.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function OE(n,t,e){return t===0&&e===n.length?ah.fromByteArray(n):ah.fromByteArray(n.slice(t,e))}function $g(n,t,e){e=Math.min(n.length,e);let i=[],r=t;for(;r<e;){let a=n[r],s=null,o=a>239?4:a>223?3:a>191?2:1;if(r+o<=e){let l,c,u,h;switch(o){case 1:a<128&&(s=a);break;case 2:l=n[r+1],(l&192)===128&&(h=(a&31)<<6|l&63,h>127&&(s=h));break;case 3:l=n[r+1],c=n[r+2],(l&192)===128&&(c&192)===128&&(h=(a&15)<<12|(l&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:l=n[r+1],c=n[r+2],u=n[r+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(h=(a&15)<<18|(l&63)<<12|(c&63)<<6|u&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),r+=o}return NE(i)}var zg=4096;function NE(n){let t=n.length;if(t<=zg)return String.fromCharCode.apply(String,n);let e="",i=0;for(;i<t;)e+=String.fromCharCode.apply(String,n.slice(i,i+=zg));return e}function BE(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]&127);return i}function kE(n,t,e){let i="";e=Math.min(n.length,e);for(let r=t;r<e;++r)i+=String.fromCharCode(n[r]);return i}function PE(n,t,e){let i=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>i)&&(e=i);let r="";for(let a=t;a<e;++a)r+=GE[n[a]];return r}function FE(n,t,e){let i=n.slice(t,e),r="";for(let a=0;a<i.length-1;a+=2)r+=String.fromCharCode(i[a]+i[a+1]*256);return r}N.prototype.slice=function(t,e){let i=this.length;t=~~t,e=e===void 0?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,N.prototype),r};function de(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}N.prototype.readUintLE=N.prototype.readUIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||de(t,e,this.length);let r=this[t],a=1,s=0;for(;++s<e&&(a*=256);)r+=this[t+s]*a;return r};N.prototype.readUintBE=N.prototype.readUIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||de(t,e,this.length);let r=this[t+--e],a=1;for(;e>0&&(a*=256);)r+=this[t+--e]*a;return r};N.prototype.readUint8=N.prototype.readUInt8=function(t,e){return t=t>>>0,e||de(t,1,this.length),this[t]};N.prototype.readUint16LE=N.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||de(t,2,this.length),this[t]|this[t+1]<<8};N.prototype.readUint16BE=N.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||de(t,2,this.length),this[t]<<8|this[t+1]};N.prototype.readUint32LE=N.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||de(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};N.prototype.readUint32BE=N.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||de(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};N.prototype.readBigUInt64LE=Mi(function(t){t=t>>>0,Jr(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&ls(t,this.length-8);let r=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))});N.prototype.readBigUInt64BE=Mi(function(t){t=t>>>0,Jr(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&ls(t,this.length-8);let r=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(r)<<BigInt(32))+BigInt(a)});N.prototype.readIntLE=function(t,e,i){t=t>>>0,e=e>>>0,i||de(t,e,this.length);let r=this[t],a=1,s=0;for(;++s<e&&(a*=256);)r+=this[t+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*e)),r};N.prototype.readIntBE=function(t,e,i){t=t>>>0,e=e>>>0,i||de(t,e,this.length);let r=e,a=1,s=this[t+--r];for(;r>0&&(a*=256);)s+=this[t+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*e)),s};N.prototype.readInt8=function(t,e){return t=t>>>0,e||de(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};N.prototype.readInt16LE=function(t,e){t=t>>>0,e||de(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};N.prototype.readInt16BE=function(t,e){t=t>>>0,e||de(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};N.prototype.readInt32LE=function(t,e){return t=t>>>0,e||de(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};N.prototype.readInt32BE=function(t,e){return t=t>>>0,e||de(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};N.prototype.readBigInt64LE=Mi(function(t){t=t>>>0,Jr(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&ls(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});N.prototype.readBigInt64BE=Mi(function(t){t=t>>>0,Jr(t,"offset");let e=this[t],i=this[t+7];(e===void 0||i===void 0)&&ls(t,this.length-8);let r=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});N.prototype.readFloatLE=function(t,e){return t=t>>>0,e||de(t,4,this.length),Qr.read(this,t,!0,23,4)};N.prototype.readFloatBE=function(t,e){return t=t>>>0,e||de(t,4,this.length),Qr.read(this,t,!1,23,4)};N.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||de(t,8,this.length),Qr.read(this,t,!0,52,8)};N.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||de(t,8,this.length),Qr.read(this,t,!1,52,8)};function ke(n,t,e,i,r,a){if(!N.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(e+i>n.length)throw new RangeError("Index out of range")}N.prototype.writeUintLE=N.prototype.writeUIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let o=Math.pow(2,8*i)-1;ke(this,t,e,i,o,0)}let a=1,s=0;for(this[e]=t&255;++s<i&&(a*=256);)this[e+s]=t/a&255;return e+i};N.prototype.writeUintBE=N.prototype.writeUIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,i=i>>>0,!r){let o=Math.pow(2,8*i)-1;ke(this,t,e,i,o,0)}let a=i-1,s=1;for(this[e+a]=t&255;--a>=0&&(s*=256);)this[e+a]=t/s&255;return e+i};N.prototype.writeUint8=N.prototype.writeUInt8=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,1,255,0),this[e]=t&255,e+1};N.prototype.writeUint16LE=N.prototype.writeUInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};N.prototype.writeUint16BE=N.prototype.writeUInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};N.prototype.writeUint32LE=N.prototype.writeUInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};N.prototype.writeUint32BE=N.prototype.writeUInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Xg(n,t,e,i,r){Qg(t,i,r,n,e,7);let a=Number(t&BigInt(4294967295));n[e++]=a,a=a>>8,n[e++]=a,a=a>>8,n[e++]=a,a=a>>8,n[e++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,s=s>>8,n[e++]=s,e}function qg(n,t,e,i,r){Qg(t,i,r,n,e,7);let a=Number(t&BigInt(4294967295));n[e+7]=a,a=a>>8,n[e+6]=a,a=a>>8,n[e+5]=a,a=a>>8,n[e+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=s,s=s>>8,n[e+2]=s,s=s>>8,n[e+1]=s,s=s>>8,n[e]=s,e+8}N.prototype.writeBigUInt64LE=Mi(function(t,e=0){return Xg(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeBigUInt64BE=Mi(function(t,e=0){return qg(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});N.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);ke(this,t,e,i,l-1,-l)}let a=0,s=1,o=0;for(this[e]=t&255;++a<i&&(s*=256);)t<0&&o===0&&this[e+a-1]!==0&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i};N.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*i-1);ke(this,t,e,i,l-1,-l)}let a=i-1,s=1,o=0;for(this[e+a]=t&255;--a>=0&&(s*=256);)t<0&&o===0&&this[e+a+1]!==0&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i};N.prototype.writeInt8=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};N.prototype.writeInt16LE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};N.prototype.writeInt16BE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};N.prototype.writeInt32LE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};N.prototype.writeInt32BE=function(t,e,i){return t=+t,e=e>>>0,i||ke(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};N.prototype.writeBigInt64LE=Mi(function(t,e=0){return Xg(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});N.prototype.writeBigInt64BE=Mi(function(t,e=0){return qg(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Kg(n,t,e,i,r,a){if(e+i>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Wg(n,t,e,i,r){return t=+t,e=e>>>0,r||Kg(n,t,e,4,34028234663852886e22,-34028234663852886e22),Qr.write(n,t,e,i,23,4),e+4}N.prototype.writeFloatLE=function(t,e,i){return Wg(this,t,e,!0,i)};N.prototype.writeFloatBE=function(t,e,i){return Wg(this,t,e,!1,i)};function Zg(n,t,e,i,r){return t=+t,e=e>>>0,r||Kg(n,t,e,8,17976931348623157e292,-17976931348623157e292),Qr.write(n,t,e,i,52,8),e+8}N.prototype.writeDoubleLE=function(t,e,i){return Zg(this,t,e,!0,i)};N.prototype.writeDoubleBE=function(t,e,i){return Zg(this,t,e,!1,i)};N.prototype.copy=function(t,e,i,r){if(!N.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!r&&r!==0&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);let a=r-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),a};N.prototype.fill=function(t,e,i,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!N.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let s=t.charCodeAt(0);(r==="utf8"&&s<128||r==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e=e>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let a;if(typeof t=="number")for(a=e;a<i;++a)this[a]=t;else{let s=N.isBuffer(t)?t:N.from(t,r),o=s.length;if(o===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-e;++a)this[a+e]=s[a%o]}return this};var Zr={};function hh(n,t,e){Zr[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}hh("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);hh("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError);hh("ERR_OUT_OF_RANGE",function(n,t,e){let i=`The value of "${n}" is out of range.`,r=e;return Number.isInteger(e)&&Math.abs(e)>2**32?r=Hg(String(e)):typeof e=="bigint"&&(r=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(r=Hg(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i},RangeError);function Hg(n){let t="",e=n.length,i=n[0]==="-"?1:0;for(;e>=i+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function IE(n,t,e){Jr(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&ls(t,n.length-(e+1))}function Qg(n,t,e,i,r,a){if(n>e||n<t){let s=typeof t=="bigint"?"n":"",o;throw a>3?t===0||t===BigInt(0)?o=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:o=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:o=`>= ${t}${s} and <= ${e}${s}`,new Zr.ERR_OUT_OF_RANGE("value",o,n)}IE(i,r,a)}function Jr(n,t){if(typeof n!="number")throw new Zr.ERR_INVALID_ARG_TYPE(t,"number",n)}function ls(n,t,e){throw Math.floor(n)!==n?(Jr(n,e),new Zr.ERR_OUT_OF_RANGE(e||"offset","an integer",n)):t<0?new Zr.ERR_BUFFER_OUT_OF_BOUNDS:new Zr.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,n)}var UE=/[^+/0-9A-Za-z-_]/g;function zE(n){if(n=n.split("=")[0],n=n.trim().replace(UE,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function lh(n,t){t=t||1/0;let e,i=n.length,r=null,a=[];for(let s=0;s<i;++s){if(e=n.charCodeAt(s),e>55295&&e<57344){if(!r){if(e>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=e;continue}if(e<56320){(t-=3)>-1&&a.push(239,191,189),r=e;continue}e=(r-55296<<10|e-56320)+65536}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,e<128){if((t-=1)<0)break;a.push(e)}else if(e<2048){if((t-=2)<0)break;a.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;a.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;a.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return a}function HE(n){let t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function jE(n,t){let e,i,r,a=[];for(let s=0;s<n.length&&!((t-=2)<0);++s)e=n.charCodeAt(s),i=e>>8,r=e%256,a.push(r),a.push(i);return a}function Jg(n){return ah.toByteArray(zE(n))}function Jo(n,t,e,i){let r;for(r=0;r<i&&!(r+e>=t.length||r>=n.length);++r)t[r+e]=n[r];return r}function Hn(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function dh(n){return n!==n}var GE=function(){let n="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let i=e*16;for(let r=0;r<16;++r)t[i+r]=n[e]+n[r]}return t}();function Mi(n){return typeof BigInt>"u"?YE:n}function YE(){throw new Error("BigInt not supported")}});var z,B=Og(()=>{"use strict";z=tt(ty());window.Buffer=z.Buffer});var uy=xe(Ft=>{"use strict";B();function gh(n,t){var e=n.length;n.push(t);t:for(;0<e;){var i=e-1>>>1,r=n[i];if(0<tl(r,t))n[i]=t,n[e]=r,e=i;else break t}}function jn(n){return n.length===0?null:n[0]}function nl(n){if(n.length===0)return null;var t=n[0],e=n.pop();if(e!==t){n[0]=e;t:for(var i=0,r=n.length,a=r>>>1;i<a;){var s=2*(i+1)-1,o=n[s],l=s+1,c=n[l];if(0>tl(o,e))l<r&&0>tl(c,o)?(n[i]=c,n[l]=e,i=l):(n[i]=o,n[s]=e,i=s);else if(l<r&&0>tl(c,e))n[i]=c,n[l]=e,i=l;else break t}}return t}function tl(n,t){var e=n.sortIndex-t.sortIndex;return e!==0?e:n.id-t.id}Ft.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(ey=performance,Ft.unstable_now=function(){return ey.now()}):(fh=Date,ny=fh.now(),Ft.unstable_now=function(){return fh.now()-ny});var ey,fh,ny,ii=[],Li=[],VE=1,vn=null,Ae=3,yh=!1,cs=!1,us=!1,vh=!1,ay=typeof setTimeout=="function"?setTimeout:null,sy=typeof clearTimeout=="function"?clearTimeout:null,iy=typeof setImmediate<"u"?setImmediate:null;function el(n){for(var t=jn(Li);t!==null;){if(t.callback===null)nl(Li);else if(t.startTime<=n)nl(Li),t.sortIndex=t.expirationTime,gh(ii,t);else break;t=jn(Li)}}function bh(n){if(us=!1,el(n),!cs)if(jn(ii)!==null)cs=!0,na||(na=!0,ea());else{var t=jn(Li);t!==null&&wh(bh,t.startTime-n)}}var na=!1,hs=-1,oy=5,ly=-1;function cy(){return vh?!0:!(Ft.unstable_now()-ly<oy)}function ph(){if(vh=!1,na){var n=Ft.unstable_now();ly=n;var t=!0;try{t:{cs=!1,us&&(us=!1,sy(hs),hs=-1),yh=!0;var e=Ae;try{e:{for(el(n),vn=jn(ii);vn!==null&&!(vn.expirationTime>n&&cy());){var i=vn.callback;if(typeof i=="function"){vn.callback=null,Ae=vn.priorityLevel;var r=i(vn.expirationTime<=n);if(n=Ft.unstable_now(),typeof r=="function"){vn.callback=r,el(n),t=!0;break e}vn===jn(ii)&&nl(ii),el(n)}else nl(ii);vn=jn(ii)}if(vn!==null)t=!0;else{var a=jn(Li);a!==null&&wh(bh,a.startTime-n),t=!1}}break t}finally{vn=null,Ae=e,yh=!1}t=void 0}}finally{t?ea():na=!1}}}var ea;typeof iy=="function"?ea=function(){iy(ph)}:typeof MessageChannel<"u"?(mh=new MessageChannel,ry=mh.port2,mh.port1.onmessage=ph,ea=function(){ry.postMessage(null)}):ea=function(){ay(ph,0)};var mh,ry;function wh(n,t){hs=ay(function(){n(Ft.unstable_now())},t)}Ft.unstable_IdlePriority=5;Ft.unstable_ImmediatePriority=1;Ft.unstable_LowPriority=4;Ft.unstable_NormalPriority=3;Ft.unstable_Profiling=null;Ft.unstable_UserBlockingPriority=2;Ft.unstable_cancelCallback=function(n){n.callback=null};Ft.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oy=0<n?Math.floor(1e3/n):5};Ft.unstable_getCurrentPriorityLevel=function(){return Ae};Ft.unstable_next=function(n){switch(Ae){case 1:case 2:case 3:var t=3;break;default:t=Ae}var e=Ae;Ae=t;try{return n()}finally{Ae=e}};Ft.unstable_requestPaint=function(){vh=!0};Ft.unstable_runWithPriority=function(n,t){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var e=Ae;Ae=n;try{return t()}finally{Ae=e}};Ft.unstable_scheduleCallback=function(n,t,e){var i=Ft.unstable_now();switch(typeof e=="object"&&e!==null?(e=e.delay,e=typeof e=="number"&&0<e?i+e:i):e=i,n){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return r=e+r,n={id:VE++,callback:t,priorityLevel:n,startTime:e,expirationTime:r,sortIndex:-1},e>i?(n.sortIndex=e,gh(Li,n),jn(ii)===null&&n===jn(Li)&&(us?(sy(hs),hs=-1):us=!0,wh(bh,e-i))):(n.sortIndex=r,gh(ii,n),cs||yh||(cs=!0,na||(na=!0,ea()))),n};Ft.unstable_shouldYield=cy;Ft.unstable_wrapCallback=function(n){var t=Ae;return function(){var e=Ae;Ae=t;try{return n.apply(this,arguments)}finally{Ae=e}}}});var dy=xe((YC,hy)=>{"use strict";B();hy.exports=uy()});var Ay=xe(nt=>{"use strict";B();var Ah=Symbol.for("react.transitional.element"),$E=Symbol.for("react.portal"),XE=Symbol.for("react.fragment"),qE=Symbol.for("react.strict_mode"),KE=Symbol.for("react.profiler"),WE=Symbol.for("react.consumer"),ZE=Symbol.for("react.context"),QE=Symbol.for("react.forward_ref"),JE=Symbol.for("react.suspense"),tA=Symbol.for("react.memo"),yy=Symbol.for("react.lazy"),eA=Symbol.for("react.activity"),fy=Symbol.iterator;function nA(n){return n===null||typeof n!="object"?null:(n=fy&&n[fy]||n["@@iterator"],typeof n=="function"?n:null)}var vy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,wy={};function ra(n,t,e){this.props=n,this.context=t,this.refs=wy,this.updater=e||vy}ra.prototype.isReactComponent={};ra.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};ra.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Sy(){}Sy.prototype=ra.prototype;function xh(n,t,e){this.props=n,this.context=t,this.refs=wy,this.updater=e||vy}var _h=xh.prototype=new Sy;_h.constructor=xh;by(_h,ra.prototype);_h.isPureReactComponent=!0;var py=Array.isArray;function Eh(){}var Ot={H:null,A:null,T:null,S:null},Ey=Object.prototype.hasOwnProperty;function Th(n,t,e){var i=e.ref;return{$$typeof:Ah,type:n,key:t,ref:i!==void 0?i:null,props:e}}function iA(n,t){return Th(n.type,t,n.props)}function Rh(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ah}function rA(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var my=/\/+/g;function Sh(n,t){return typeof n=="object"&&n!==null&&n.key!=null?rA(""+n.key):t.toString(36)}function aA(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(Eh,Eh):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function ia(n,t,e,i,r){var a=typeof n;(a==="undefined"||a==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Ah:case $E:s=!0;break;case yy:return s=n._init,ia(s(n._payload),t,e,i,r)}}if(s)return r=r(n),s=i===""?"."+Sh(n,0):i,py(r)?(e="",s!=null&&(e=s.replace(my,"$&/")+"/"),ia(r,t,e,"",function(c){return c})):r!=null&&(Rh(r)&&(r=iA(r,e+(r.key==null||n&&n.key===r.key?"":(""+r.key).replace(my,"$&/")+"/")+s)),t.push(r)),1;s=0;var o=i===""?".":i+":";if(py(n))for(var l=0;l<n.length;l++)i=n[l],a=o+Sh(i,l),s+=ia(i,t,e,a,r);else if(l=nA(n),typeof l=="function")for(n=l.call(n),l=0;!(i=n.next()).done;)i=i.value,a=o+Sh(i,l++),s+=ia(i,t,e,a,r);else if(a==="object"){if(typeof n.then=="function")return ia(aA(n),t,e,i,r);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function il(n,t,e){if(n==null)return n;var i=[],r=0;return ia(n,i,"","",function(a){return t.call(e,a,r++)}),i}function sA(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var gy=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},oA={map:il,forEach:function(n,t,e){il(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return il(n,function(){t++}),t},toArray:function(n){return il(n,function(t){return t})||[]},only:function(n){if(!Rh(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};nt.Activity=eA;nt.Children=oA;nt.Component=ra;nt.Fragment=XE;nt.Profiler=KE;nt.PureComponent=xh;nt.StrictMode=qE;nt.Suspense=JE;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ot;nt.__COMPILER_RUNTIME={__proto__:null,c:function(n){return Ot.H.useMemoCache(n)}};nt.cache=function(n){return function(){return n.apply(null,arguments)}};nt.cacheSignal=function(){return null};nt.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=by({},n.props),r=n.key;if(t!=null)for(a in t.key!==void 0&&(r=""+t.key),t)!Ey.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=e;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];i.children=s}return Th(n.type,r,i)};nt.createContext=function(n){return n={$$typeof:ZE,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:WE,_context:n},n};nt.createElement=function(n,t,e){var i,r={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)Ey.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=e;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];r.children=o}if(n&&n.defaultProps)for(i in s=n.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return Th(n,a,r)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(n){return{$$typeof:QE,render:n}};nt.isValidElement=Rh;nt.lazy=function(n){return{$$typeof:yy,_payload:{_status:-1,_result:n},_init:sA}};nt.memo=function(n,t){return{$$typeof:tA,type:n,compare:t===void 0?null:t}};nt.startTransition=function(n){var t=Ot.T,e={};Ot.T=e;try{var i=n(),r=Ot.S;r!==null&&r(e,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Eh,gy)}catch(a){gy(a)}finally{t!==null&&e.types!==null&&(t.types=e.types),Ot.T=t}};nt.unstable_useCacheRefresh=function(){return Ot.H.useCacheRefresh()};nt.use=function(n){return Ot.H.use(n)};nt.useActionState=function(n,t,e){return Ot.H.useActionState(n,t,e)};nt.useCallback=function(n,t){return Ot.H.useCallback(n,t)};nt.useContext=function(n){return Ot.H.useContext(n)};nt.useDebugValue=function(){};nt.useDeferredValue=function(n,t){return Ot.H.useDeferredValue(n,t)};nt.useEffect=function(n,t){return Ot.H.useEffect(n,t)};nt.useEffectEvent=function(n){return Ot.H.useEffectEvent(n)};nt.useId=function(){return Ot.H.useId()};nt.useImperativeHandle=function(n,t,e){return Ot.H.useImperativeHandle(n,t,e)};nt.useInsertionEffect=function(n,t){return Ot.H.useInsertionEffect(n,t)};nt.useLayoutEffect=function(n,t){return Ot.H.useLayoutEffect(n,t)};nt.useMemo=function(n,t){return Ot.H.useMemo(n,t)};nt.useOptimistic=function(n,t){return Ot.H.useOptimistic(n,t)};nt.useReducer=function(n,t,e){return Ot.H.useReducer(n,t,e)};nt.useRef=function(n){return Ot.H.useRef(n)};nt.useState=function(n){return Ot.H.useState(n)};nt.useSyncExternalStore=function(n,t,e){return Ot.H.useSyncExternalStore(n,t,e)};nt.useTransition=function(){return Ot.H.useTransition()};nt.version="19.2.0"});var It=xe((qC,xy)=>{"use strict";B();xy.exports=Ay()});var Ty=xe(Te=>{"use strict";B();var lA=It();function _y(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Oi(){}var _e={d:{f:Oi,r:function(){throw Error(_y(522))},D:Oi,C:Oi,L:Oi,m:Oi,X:Oi,S:Oi,M:Oi},p:0,findDOMNode:null},cA=Symbol.for("react.portal");function uA(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cA,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}var ds=lA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function rl(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Te.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_e;Te.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(_y(299));return uA(n,t,null,e)};Te.flushSync=function(n){var t=ds.T,e=_e.p;try{if(ds.T=null,_e.p=2,n)return n()}finally{ds.T=t,_e.p=e,_e.d.f()}};Te.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,_e.d.C(n,t))};Te.prefetchDNS=function(n){typeof n=="string"&&_e.d.D(n)};Te.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,i=rl(e,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?_e.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):e==="script"&&_e.d.X(n,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Te.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=rl(t.as,t.crossOrigin);_e.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&_e.d.M(n)};Te.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,i=rl(e,t.crossOrigin);_e.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Te.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=rl(t.as,t.crossOrigin);_e.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else _e.d.m(n)};Te.requestFormReset=function(n){_e.d.r(n)};Te.unstable_batchedUpdates=function(n,t){return n(t)};Te.useFormState=function(n,t,e){return ds.H.useFormState(n,t,e)};Te.useFormStatus=function(){return ds.H.useHostTransitionStatus()};Te.version="19.2.0"});var Dy=xe((QC,Cy)=>{"use strict";B();function Ry(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ry)}catch(n){console.error(n)}}Ry(),Cy.exports=Ty()});var Hw=xe(Dc=>{"use strict";B();var se=dy(),ev=It(),hA=Dy();function k(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function nv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Qs(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function iv(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function rv(n){if(n.tag===31){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function My(n){if(Qs(n)!==n)throw Error(k(188))}function dA(n){var t=n.alternate;if(!t){if(t=Qs(n),t===null)throw Error(k(188));return t!==n?null:n}for(var e=n,i=t;;){var r=e.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){e=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===e)return My(r),n;if(a===i)return My(r),t;a=a.sibling}throw Error(k(188))}if(e.return!==i.return)e=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===e){s=!0,e=r,i=a;break}if(o===i){s=!0,i=r,e=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===e){s=!0,e=a,i=r;break}if(o===i){s=!0,i=a,e=r;break}o=o.sibling}if(!s)throw Error(k(189))}}if(e.alternate!==i)throw Error(k(190))}if(e.tag!==3)throw Error(k(188));return e.stateNode.current===e?n:t}function av(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=av(n),t!==null)return t;n=n.sibling}return null}var kt=Object.assign,fA=Symbol.for("react.element"),al=Symbol.for("react.transitional.element"),ws=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),sv=Symbol.for("react.strict_mode"),od=Symbol.for("react.profiler"),ov=Symbol.for("react.consumer"),hi=Symbol.for("react.context"),nf=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy");Symbol.for("react.scope");var ud=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var pA=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var Ly=Symbol.iterator;function fs(n){return n===null||typeof n!="object"?null:(n=Ly&&n[Ly]||n["@@iterator"],typeof n=="function"?n:null)}var mA=Symbol.for("react.client.reference");function hd(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===mA?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ua:return"Fragment";case od:return"Profiler";case sv:return"StrictMode";case ld:return"Suspense";case cd:return"SuspenseList";case ud:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case ws:return"Portal";case hi:return n.displayName||"Context";case ov:return(n._context.displayName||"Context")+".Consumer";case nf:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rf:return t=n.displayName||null,t!==null?t:hd(n.type)||"Memo";case Ni:t=n._payload,n=n._init;try{return hd(n(t))}catch{}}return null}var Ss=Array.isArray,K=ev.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt=hA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Er={pending:!1,data:null,method:null,action:null},dd=[],ha=-1;function Xn(n){return{current:n}}function me(n){0>ha||(n.current=dd[ha],dd[ha]=null,ha--)}function Dt(n,t){ha++,dd[ha]=n.current,n.current=t}var $n=Xn(null),Is=Xn(null),Yi=Xn(null),Il=Xn(null);function Ul(n,t){switch(Dt(Yi,t),Dt(Is,n),Dt($n,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?I0(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=I0(t),n=Rw(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}me($n),Dt($n,n)}function Da(){me($n),me(Is),me(Yi)}function fd(n){n.memoizedState!==null&&Dt(Il,n);var t=$n.current,e=Rw(t,n.type);t!==e&&(Dt(Is,n),Dt($n,e))}function zl(n){Is.current===n&&(me($n),me(Is)),Il.current===n&&(me(Il),Ks._currentValue=Er)}var Ch,Oy;function vr(n){if(Ch===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ch=t&&t[1]||"",Oy=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ch+n+Oy}var Dh=!1;function Mh(n,t){if(!n||Dh)return"";Dh=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(f){var d=f}Reflect.construct(n,[],h)}else{try{h.call()}catch(f){d=f}n.call(h.prototype)}}else{try{throw Error()}catch(f){d=f}(h=n())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(f){if(f&&d&&typeof f.stack=="string")return[f.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=i&&0<=r);break}}}finally{Dh=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?vr(e):""}function gA(n,t){switch(n.tag){case 26:case 27:case 5:return vr(n.type);case 16:return vr("Lazy");case 13:return n.child!==t&&t!==null?vr("Suspense Fallback"):vr("Suspense");case 19:return vr("SuspenseList");case 0:case 15:return Mh(n.type,!1);case 11:return Mh(n.type.render,!1);case 1:return Mh(n.type,!0);case 31:return vr("Activity");default:return""}}function Ny(n){try{var t="",e=null;do t+=gA(n,e),e=n,n=n.return;while(n);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var pd=Object.prototype.hasOwnProperty,af=se.unstable_scheduleCallback,Lh=se.unstable_cancelCallback,yA=se.unstable_shouldYield,vA=se.unstable_requestPaint,en=se.unstable_now,bA=se.unstable_getCurrentPriorityLevel,lv=se.unstable_ImmediatePriority,cv=se.unstable_UserBlockingPriority,Hl=se.unstable_NormalPriority,wA=se.unstable_LowPriority,uv=se.unstable_IdlePriority,SA=se.log,EA=se.unstable_setDisableYieldValue,Js=null,nn=null;function Ui(n){if(typeof SA=="function"&&EA(n),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Js,n)}catch{}}var rn=Math.clz32?Math.clz32:_A,AA=Math.log,xA=Math.LN2;function _A(n){return n>>>=0,n===0?32:31-(AA(n)/xA|0)|0}var sl=256,ol=262144,ll=4194304;function br(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fc(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var r=0,a=n.suspendedLanes,s=n.pingedLanes;n=n.warmLanes;var o=i&134217727;return o!==0?(i=o&~a,i!==0?r=br(i):(s&=o,s!==0?r=br(s):e||(e=o&~n,e!==0&&(r=br(e))))):(o=i&~a,o!==0?r=br(o):s!==0?r=br(s):e||(e=i&~n,e!==0&&(r=br(e)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,e=t&-t,a>=e||a===32&&(e&4194048)!==0)?t:r}function to(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function TA(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hv(){var n=ll;return ll<<=1,!(ll&62914560)&&(ll=4194304),n}function Oh(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function eo(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function RA(n,t,e,i,r,a){var s=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var o=n.entanglements,l=n.expirationTimes,c=n.hiddenUpdates;for(e=s&~e;0<e;){var u=31-rn(e),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];f!==null&&(f.lane&=-536870913)}e&=~h}i!==0&&dv(n,i,0),a!==0&&r===0&&n.tag!==0&&(n.suspendedLanes|=a&~(s&~t))}function dv(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var i=31-rn(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&261930}function fv(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-rn(e),r=1<<i;r&t|n[i]&t&&(n[i]|=t),e&=~r}}function pv(n,t){var e=t&-t;return e=e&42?1:sf(e),e&(n.suspendedLanes|t)?0:e}function sf(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function of(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function mv(){var n=bt.p;return n!==0?n:(n=window.event,n===void 0?32:Iw(n.type))}function By(n,t){var e=bt.p;try{return bt.p=n,t()}finally{bt.p=e}}var ir=Math.random().toString(36).slice(2),ye="__reactFiber$"+ir,He="__reactProps$"+ir,za="__reactContainer$"+ir,md="__reactEvents$"+ir,CA="__reactListeners$"+ir,DA="__reactHandles$"+ir,ky="__reactResources$"+ir,no="__reactMarker$"+ir;function lf(n){delete n[ye],delete n[He],delete n[md],delete n[CA],delete n[DA]}function da(n){var t=n[ye];if(t)return t;for(var e=n.parentNode;e;){if(t=e[za]||e[ye]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=G0(n);n!==null;){if(e=n[ye])return e;n=G0(n)}return t}n=e,e=n.parentNode}return null}function Ha(n){if(n=n[ye]||n[za]){var t=n.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return n}return null}function Es(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(k(33))}function Ea(n){var t=n[ky];return t||(t=n[ky]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function pe(n){n[no]=!0}var gv=new Set,yv={};function Or(n,t){Ma(n,t),Ma(n+"Capture",t)}function Ma(n,t){for(yv[n]=t,n=0;n<t.length;n++)gv.add(t[n])}var MA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Py={},Fy={};function LA(n){return pd.call(Fy,n)?!0:pd.call(Py,n)?!1:MA.test(n)?Fy[n]=!0:(Py[n]=!0,!1)}function Al(n,t,e){if(LA(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function cl(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function ri(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+i)}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vv(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OA(n,t,e){var i=Object.getOwnPropertyDescriptor(n.constructor.prototype,t);if(!n.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,a=i.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){e=""+s,a.call(this,s)}}),Object.defineProperty(n,t,{enumerable:i.enumerable}),{getValue:function(){return e},setValue:function(s){e=""+s},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function gd(n){if(!n._valueTracker){var t=vv(n)?"checked":"value";n._valueTracker=OA(n,t,""+n[t])}}function bv(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=vv(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function jl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var NA=/[\n"\\]/g;function An(n){return n.replace(NA,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yd(n,t,e,i,r,a,s,o){n.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?n.type=s:n.removeAttribute("type"),t!=null?s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+wn(t)):n.value!==""+wn(t)&&(n.value=""+wn(t)):s!=="submit"&&s!=="reset"||n.removeAttribute("value"),t!=null?vd(n,s,wn(t)):e!=null?vd(n,s,wn(e)):i!=null&&n.removeAttribute("value"),r==null&&a!=null&&(n.defaultChecked=!!a),r!=null&&(n.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+wn(o):n.removeAttribute("name")}function wv(n,t,e,i,r,a,s,o){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){gd(n);return}e=e!=null?""+wn(e):"",t=t!=null?""+wn(t):e,o||t===n.value||(n.value=t),n.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=o?n.checked:!!i,n.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.name=s),gd(n)}function vd(n,t,e){t==="number"&&jl(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function Aa(n,t,e,i){if(n=n.options,t){t={};for(var r=0;r<e.length;r++)t["$"+e[r]]=!0;for(e=0;e<n.length;e++)r=t.hasOwnProperty("$"+n[e].value),n[e].selected!==r&&(n[e].selected=r),r&&i&&(n[e].defaultSelected=!0)}else{for(e=""+wn(e),t=null,r=0;r<n.length;r++){if(n[r].value===e){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}t!==null||n[r].disabled||(t=n[r])}t!==null&&(t.selected=!0)}}function Sv(n,t,e){if(t!=null&&(t=""+wn(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+wn(e):""}function Ev(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(k(92));if(Ss(i)){if(1<i.length)throw Error(k(93));i=i[0]}e=i}e==null&&(e=""),t=e}e=wn(t),n.defaultValue=e,i=n.textContent,i===e&&i!==""&&i!==null&&(n.value=i),gd(n)}function La(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var BA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iy(n,t,e){var i=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?i?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":i?n.setProperty(t,e):typeof e!="number"||e===0||BA.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function Av(n,t,e){if(t!=null&&typeof t!="object")throw Error(k(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&e[r]!==i&&Iy(n,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Iy(n,a,t[a])}function cf(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xl(n){return PA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function di(){}var bd=null;function uf(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fa=null,xa=null;function Uy(n){var t=Ha(n);if(t&&(n=t.stateNode)){var e=n[He]||null;t:switch(n=t.stateNode,t.type){case"input":if(yd(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+An(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var r=i[He]||null;if(!r)throw Error(k(90));yd(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<e.length;t++)i=e[t],i.form===n.form&&bv(i)}break t;case"textarea":Sv(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&Aa(n,!!e.multiple,t,!1)}}}var Nh=!1;function xv(n,t,e){if(Nh)return n(t,e);Nh=!0;try{var i=n(t);return i}finally{if(Nh=!1,(fa!==null||xa!==null)&&(_c(),fa&&(t=fa,n=xa,xa=fa=null,Uy(t),n)))for(t=0;t<n.length;t++)Uy(n[t])}}function Us(n,t){var e=n.stateNode;if(e===null)return null;var i=e[He]||null;if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(k(231,t,typeof e));return e}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wd=!1;if(yi)try{aa={},Object.defineProperty(aa,"passive",{get:function(){wd=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{wd=!1}var aa,zi=null,hf=null,_l=null;function _v(){if(_l)return _l;var n,t=hf,e=t.length,i,r="value"in zi?zi.value:zi.textContent,a=r.length;for(n=0;n<e&&t[n]===r[n];n++);var s=e-n;for(i=1;i<=s&&t[e-i]===r[a-i];i++);return _l=r.slice(n,1<i?1-i:void 0)}function Tl(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function ul(){return!0}function zy(){return!1}function je(n){function t(e,i,r,a,s){this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(e=n[o],this[o]=e?e(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ul:zy,this.isPropagationStopped=zy,this}return kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=je(Nr),io=kt({},Nr,{view:0,detail:0}),FA=je(io),Bh,kh,ps,mc=kt({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ps&&(ps&&n.type==="mousemove"?(Bh=n.screenX-ps.screenX,kh=n.screenY-ps.screenY):kh=Bh=0,ps=n),Bh)},movementY:function(n){return"movementY"in n?n.movementY:kh}}),Hy=je(mc),IA=kt({},mc,{dataTransfer:0}),UA=je(IA),zA=kt({},io,{relatedTarget:0}),Ph=je(zA),HA=kt({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),jA=je(HA),GA=kt({},Nr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YA=je(GA),VA=kt({},Nr,{data:0}),jy=je(VA),$A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KA(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=qA[n])?!!t[n]:!1}function df(){return KA}var WA=kt({},io,{key:function(n){if(n.key){var t=$A[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Tl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(n){return n.type==="keypress"?Tl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Tl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ZA=je(WA),QA=kt({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=je(QA),JA=kt({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),tx=je(JA),ex=kt({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nx=je(ex),ix=kt({},mc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rx=je(ix),ax=kt({},Nr,{newState:0,oldState:0}),sx=je(ax),ox=[9,13,27,32],ff=yi&&"CompositionEvent"in window,_s=null;yi&&"documentMode"in document&&(_s=document.documentMode);var lx=yi&&"TextEvent"in window&&!_s,Tv=yi&&(!ff||_s&&8<_s&&11>=_s),Yy=" ",Vy=!1;function Rv(n,t){switch(n){case"keyup":return ox.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pa=!1;function cx(n,t){switch(n){case"compositionend":return Cv(t);case"keypress":return t.which!==32?null:(Vy=!0,Yy);case"textInput":return n=t.data,n===Yy&&Vy?null:n;default:return null}}function ux(n,t){if(pa)return n==="compositionend"||!ff&&Rv(n,t)?(n=_v(),_l=hf=zi=null,pa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tv&&t.locale!=="ko"?null:t.data;default:return null}}var hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!hx[n.type]:t==="textarea"}function Dv(n,t,e,i){fa?xa?xa.push(i):xa=[i]:fa=i,t=sc(t,"onChange"),0<t.length&&(e=new pc("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var Ts=null,zs=null;function dx(n){xw(n,0)}function gc(n){var t=Es(n);if(bv(t))return n}function Xy(n,t){if(n==="change")return t}var Mv=!1;yi&&(yi?(dl="oninput"in document,dl||(Fh=document.createElement("div"),Fh.setAttribute("oninput","return;"),dl=typeof Fh.oninput=="function"),hl=dl):hl=!1,Mv=hl&&(!document.documentMode||9<document.documentMode));var hl,dl,Fh;function qy(){Ts&&(Ts.detachEvent("onpropertychange",Lv),zs=Ts=null)}function Lv(n){if(n.propertyName==="value"&&gc(zs)){var t=[];Dv(t,zs,n,uf(n)),xv(dx,t)}}function fx(n,t,e){n==="focusin"?(qy(),Ts=t,zs=e,Ts.attachEvent("onpropertychange",Lv)):n==="focusout"&&qy()}function px(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gc(zs)}function mx(n,t){if(n==="click")return gc(t)}function gx(n,t){if(n==="input"||n==="change")return gc(t)}function yx(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var sn=typeof Object.is=="function"?Object.is:yx;function Hs(n,t){if(sn(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var r=e[i];if(!pd.call(t,r)||!sn(n[r],t[r]))return!1}return!0}function Ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wy(n,t){var e=Ky(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Ky(e)}}function Ov(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?Ov(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function Nv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=jl(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=jl(n.document)}return t}function pf(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var vx=yi&&"documentMode"in document&&11>=document.documentMode,ma=null,Sd=null,Rs=null,Ed=!1;function Zy(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Ed||ma==null||ma!==jl(i)||(i=ma,"selectionStart"in i&&pf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rs&&Hs(Rs,i)||(Rs=i,i=sc(Sd,"onSelect"),0<i.length&&(t=new pc("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=ma)))}function yr(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var ga={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},Ih={},Bv={};yi&&(Bv=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Br(n){if(Ih[n])return Ih[n];if(!ga[n])return n;var t=ga[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in Bv)return Ih[n]=t[e];return n}var kv=Br("animationend"),Pv=Br("animationiteration"),Fv=Br("animationstart"),bx=Br("transitionrun"),wx=Br("transitionstart"),Sx=Br("transitioncancel"),Iv=Br("transitionend"),Uv=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Fn(n,t){Uv.set(n,t),Or(t,[n])}var Gl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},bn=[],ya=0,mf=0;function yc(){for(var n=ya,t=mf=ya=0;t<n;){var e=bn[t];bn[t++]=null;var i=bn[t];bn[t++]=null;var r=bn[t];bn[t++]=null;var a=bn[t];if(bn[t++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&zv(e,r,a)}}function vc(n,t,e,i){bn[ya++]=n,bn[ya++]=t,bn[ya++]=e,bn[ya++]=i,mf|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function gf(n,t,e,i){return vc(n,t,e,i),Yl(n)}function kr(n,t){return vc(n,null,null,t),Yl(n)}function zv(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e);for(var r=!1,a=n.return;a!==null;)a.childLanes|=e,i=a.alternate,i!==null&&(i.childLanes|=e),a.tag===22&&(n=a.stateNode,n===null||n._visibility&1||(r=!0)),n=a,a=a.return;return n.tag===3?(a=n.stateNode,r&&t!==null&&(r=31-rn(e),n=a.hiddenUpdates,i=n[r],i===null?n[r]=[t]:i.push(t),t.lane=e|536870912),a):null}function Yl(n){if(50<Ps)throw Ps=0,Yd=null,Error(k(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var va={};function Ex(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(n,t,e,i){return new Ex(n,t,e,i)}function yf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pi(n,t){var e=n.alternate;return e===null?(e=Je(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function Hv(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function Rl(n,t,e,i,r,a){var s=0;if(i=n,typeof n=="function")yf(n)&&(s=1);else if(typeof n=="string")s=__(n,e,$n.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case ud:return n=Je(31,e,t,r),n.elementType=ud,n.lanes=a,n;case ua:return Ar(e.children,r,a,t);case sv:s=8,r|=24;break;case od:return n=Je(12,e,t,r|2),n.elementType=od,n.lanes=a,n;case ld:return n=Je(13,e,t,r),n.elementType=ld,n.lanes=a,n;case cd:return n=Je(19,e,t,r),n.elementType=cd,n.lanes=a,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case hi:s=10;break t;case ov:s=9;break t;case nf:s=11;break t;case rf:s=14;break t;case Ni:s=16,i=null;break t}s=29,e=Error(k(130,n===null?"null":typeof n,"")),i=null}return t=Je(s,e,t,r),t.elementType=n,t.type=i,t.lanes=a,t}function Ar(n,t,e,i){return n=Je(7,n,i,t),n.lanes=e,n}function Uh(n,t,e){return n=Je(6,n,null,t),n.lanes=e,n}function jv(n){var t=Je(18,null,null,0);return t.stateNode=n,t}function zh(n,t,e){return t=Je(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Qy=new WeakMap;function xn(n,t){if(typeof n=="object"&&n!==null){var e=Qy.get(n);return e!==void 0?e:(t={value:n,source:t,stack:Ny(t)},Qy.set(n,t),t)}return{value:n,source:t,stack:Ny(t)}}var ba=[],wa=0,Vl=null,js=0,Sn=[],En=0,Ji=null,Gn=1,Yn="";function ci(n,t){ba[wa++]=js,ba[wa++]=Vl,Vl=n,js=t}function Gv(n,t,e){Sn[En++]=Gn,Sn[En++]=Yn,Sn[En++]=Ji,Ji=n;var i=Gn;n=Yn;var r=32-rn(i)-1;i&=~(1<<r),e+=1;var a=32-rn(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Gn=1<<32-rn(t)+r|e<<r|i,Yn=a+n}else Gn=1<<a|e<<r|i,Yn=n}function vf(n){n.return!==null&&(ci(n,1),Gv(n,1,0))}function bf(n){for(;n===Vl;)Vl=ba[--wa],ba[wa]=null,js=ba[--wa],ba[wa]=null;for(;n===Ji;)Ji=Sn[--En],Sn[En]=null,Yn=Sn[--En],Sn[En]=null,Gn=Sn[--En],Sn[En]=null}function Yv(n,t){Sn[En++]=Gn,Sn[En++]=Yn,Sn[En++]=Ji,Gn=t.id,Yn=t.overflow,Ji=n}var ve=null,Bt=null,pt=!1,Vi=null,_n=!1,xd=Error(k(519));function tr(n){var t=Error(k(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gs(xn(t,n)),xd}function Jy(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[ye]=n,t[He]=i,e){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(e=0;e<Xs.length;e++)ut(Xs[e],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),wv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),Ev(t,i.value,i.defaultValue,i.children)}e=i.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||i.suppressHydrationWarning===!0||Tw(t.textContent,e)?(i.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),i.onScroll!=null&&ut("scroll",t),i.onScrollEnd!=null&&ut("scrollend",t),i.onClick!=null&&(t.onclick=di),t=!0):t=!1,t||tr(n,!0)}function t0(n){for(ve=n.return;ve;)switch(ve.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:ve=ve.return}}function sa(n){if(n!==ve)return!1;if(!pt)return t0(n),pt=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||Kd(n.type,n.memoizedProps)),e=!e),e&&Bt&&tr(n),t0(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(k(317));Bt=j0(n)}else if(t===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(k(317));Bt=j0(n)}else t===27?(t=Bt,rr(n.type)?(n=Jd,Jd=null,Bt=n):Bt=t):Bt=ve?Rn(n.stateNode.nextSibling):null;return!0}function Rr(){Bt=ve=null,pt=!1}function Hh(){var n=Vi;return n!==null&&(Ue===null?Ue=n:Ue.push.apply(Ue,n),Vi=null),n}function Gs(n){Vi===null?Vi=[n]:Vi.push(n)}var _d=Xn(null),Pr=null,fi=null;function ki(n,t,e){Dt(_d,t._currentValue),t._currentValue=e}function mi(n){n._currentValue=_d.current,me(_d)}function Td(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function Rd(n,t,e,i){var r=n.child;for(r!==null&&(r.return=n);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;t:for(;a!==null;){var o=a;a=r;for(var l=0;l<t.length;l++)if(o.context===t[l]){a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),Td(a.return,e,n),i||(s=null);break t}a=o.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(k(341));s.lanes|=e,a=s.alternate,a!==null&&(a.lanes|=e),Td(s,e,n),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===n){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function ja(n,t,e,i){n=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(k(387));if(s=s.memoizedProps,s!==null){var o=r.type;sn(r.pendingProps.value,s.value)||(n!==null?n.push(o):n=[o])}}else if(r===Il.current){if(s=r.alternate,s===null)throw Error(k(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(n!==null?n.push(Ks):n=[Ks])}r=r.return}n!==null&&Rd(t,n,e,i),t.flags|=262144}function $l(n){for(n=n.firstContext;n!==null;){if(!sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Cr(n){Pr=n,fi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function be(n){return Vv(Pr,n)}function fl(n,t){return Pr===null&&Cr(n),Vv(n,t)}function Vv(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},fi===null){if(n===null)throw Error(k(308));fi=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else fi=fi.next=t;return e}var Ax=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},xx=se.unstable_scheduleCallback,_x=se.unstable_NormalPriority,Jt={$$typeof:hi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new Ax,data:new Map,refCount:0}}function ro(n){n.refCount--,n.refCount===0&&xx(_x,function(){n.controller.abort()})}var Cs=null,Cd=0,Oa=0,_a=null;function Tx(n,t){if(Cs===null){var e=Cs=[];Cd=0,Oa=Vf(),_a={status:"pending",value:void 0,then:function(i){e.push(i)}}}return Cd++,t.then(e0,e0),t}function e0(){if(--Cd===0&&Cs!==null){_a!==null&&(_a.status="fulfilled");var n=Cs;Cs=null,Oa=0,_a=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function Rx(n,t){var e=[],i={status:"pending",value:null,reason:null,then:function(r){e.push(r)}};return n.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<e.length;r++)(0,e[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<e.length;r++)(0,e[r])(void 0)}),i}var n0=K.S;K.S=function(n,t){aw=en(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Tx(n,t),n0!==null&&n0(n,t)};var xr=Xn(null);function Sf(){var n=xr.current;return n!==null?n:Tt.pooledCache}function Cl(n,t){t===null?Dt(xr,xr.current):Dt(xr,t.pool)}function $v(){var n=Sf();return n===null?null:{parent:Jt._currentValue,pool:n}}var Ga=Error(k(460)),Ef=Error(k(474)),bc=Error(k(542)),Xl={then:function(){}};function i0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Xv(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(di,di),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,a0(n),n;default:if(typeof t.status=="string")t.then(di,di);else{if(n=Tt,n!==null&&100<n.shellSuspendCounter)throw Error(k(482));n=t,n.status="pending",n.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,a0(n),n}throw _r=t,Ga}}function wr(n){try{var t=n._init;return t(n._payload)}catch(e){throw e!==null&&typeof e=="object"&&typeof e.then=="function"?(_r=e,Ga):e}}var _r=null;function r0(){if(_r===null)throw Error(k(459));var n=_r;return _r=null,n}function a0(n){if(n===Ga||n===bc)throw Error(k(483))}var Ta=null,Ys=0;function pl(n){var t=Ys;return Ys+=1,Ta===null&&(Ta=[]),Xv(Ta,n,t)}function ms(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function ml(n,t){throw t.$$typeof===fA?Error(k(525)):(n=Object.prototype.toString.call(t),Error(k(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function qv(n){function t(p,m){if(n){var b=p.deletions;b===null?(p.deletions=[m],p.flags|=16):b.push(m)}}function e(p,m){if(!n)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function i(p){for(var m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function r(p,m){return p=pi(p,m),p.index=0,p.sibling=null,p}function a(p,m,b){return p.index=b,n?(b=p.alternate,b!==null?(b=b.index,b<m?(p.flags|=67108866,m):b):(p.flags|=67108866,m)):(p.flags|=1048576,m)}function s(p){return n&&p.alternate===null&&(p.flags|=67108866),p}function o(p,m,b,E){return m===null||m.tag!==6?(m=Uh(b,p.mode,E),m.return=p,m):(m=r(m,b),m.return=p,m)}function l(p,m,b,E){var A=b.type;return A===ua?u(p,m,b.props.children,E,b.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ni&&wr(A)===m.type)?(m=r(m,b.props),ms(m,b),m.return=p,m):(m=Rl(b.type,b.key,b.props,null,p.mode,E),ms(m,b),m.return=p,m)}function c(p,m,b,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=zh(b,p.mode,E),m.return=p,m):(m=r(m,b.children||[]),m.return=p,m)}function u(p,m,b,E,A){return m===null||m.tag!==7?(m=Ar(b,p.mode,E,A),m.return=p,m):(m=r(m,b),m.return=p,m)}function h(p,m,b){if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return m=Uh(""+m,p.mode,b),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case al:return b=Rl(m.type,m.key,m.props,null,p.mode,b),ms(b,m),b.return=p,b;case ws:return m=zh(m,p.mode,b),m.return=p,m;case Ni:return m=wr(m),h(p,m,b)}if(Ss(m)||fs(m))return m=Ar(m,p.mode,b,null),m.return=p,m;if(typeof m.then=="function")return h(p,pl(m),b);if(m.$$typeof===hi)return h(p,fl(p,m),b);ml(p,m)}return null}function d(p,m,b,E){var A=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return A!==null?null:o(p,m,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case al:return b.key===A?l(p,m,b,E):null;case ws:return b.key===A?c(p,m,b,E):null;case Ni:return b=wr(b),d(p,m,b,E)}if(Ss(b)||fs(b))return A!==null?null:u(p,m,b,E,null);if(typeof b.then=="function")return d(p,m,pl(b),E);if(b.$$typeof===hi)return d(p,m,fl(p,b),E);ml(p,b)}return null}function f(p,m,b,E,A){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return p=p.get(b)||null,o(m,p,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case al:return p=p.get(E.key===null?b:E.key)||null,l(m,p,E,A);case ws:return p=p.get(E.key===null?b:E.key)||null,c(m,p,E,A);case Ni:return E=wr(E),f(p,m,b,E,A)}if(Ss(E)||fs(E))return p=p.get(b)||null,u(m,p,E,A,null);if(typeof E.then=="function")return f(p,m,b,pl(E),A);if(E.$$typeof===hi)return f(p,m,b,fl(m,E),A);ml(m,E)}return null}function y(p,m,b,E){for(var A=null,T=null,x=m,D=m=0,R=null;x!==null&&D<b.length;D++){x.index>D?(R=x,x=null):R=x.sibling;var L=d(p,x,b[D],E);if(L===null){x===null&&(x=R);break}n&&x&&L.alternate===null&&t(p,x),m=a(L,m,D),T===null?A=L:T.sibling=L,T=L,x=R}if(D===b.length)return e(p,x),pt&&ci(p,D),A;if(x===null){for(;D<b.length;D++)x=h(p,b[D],E),x!==null&&(m=a(x,m,D),T===null?A=x:T.sibling=x,T=x);return pt&&ci(p,D),A}for(x=i(x);D<b.length;D++)R=f(x,p,D,b[D],E),R!==null&&(n&&R.alternate!==null&&x.delete(R.key===null?D:R.key),m=a(R,m,D),T===null?A=R:T.sibling=R,T=R);return n&&x.forEach(function(F){return t(p,F)}),pt&&ci(p,D),A}function g(p,m,b,E){if(b==null)throw Error(k(151));for(var A=null,T=null,x=m,D=m=0,R=null,L=b.next();x!==null&&!L.done;D++,L=b.next()){x.index>D?(R=x,x=null):R=x.sibling;var F=d(p,x,L.value,E);if(F===null){x===null&&(x=R);break}n&&x&&F.alternate===null&&t(p,x),m=a(F,m,D),T===null?A=F:T.sibling=F,T=F,x=R}if(L.done)return e(p,x),pt&&ci(p,D),A;if(x===null){for(;!L.done;D++,L=b.next())L=h(p,L.value,E),L!==null&&(m=a(L,m,D),T===null?A=L:T.sibling=L,T=L);return pt&&ci(p,D),A}for(x=i(x);!L.done;D++,L=b.next())L=f(x,p,D,L.value,E),L!==null&&(n&&L.alternate!==null&&x.delete(L.key===null?D:L.key),m=a(L,m,D),T===null?A=L:T.sibling=L,T=L);return n&&x.forEach(function(G){return t(p,G)}),pt&&ci(p,D),A}function w(p,m,b,E){if(typeof b=="object"&&b!==null&&b.type===ua&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case al:t:{for(var A=b.key;m!==null;){if(m.key===A){if(A=b.type,A===ua){if(m.tag===7){e(p,m.sibling),E=r(m,b.props.children),E.return=p,p=E;break t}}else if(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ni&&wr(A)===m.type){e(p,m.sibling),E=r(m,b.props),ms(E,b),E.return=p,p=E;break t}e(p,m);break}else t(p,m);m=m.sibling}b.type===ua?(E=Ar(b.props.children,p.mode,E,b.key),E.return=p,p=E):(E=Rl(b.type,b.key,b.props,null,p.mode,E),ms(E,b),E.return=p,p=E)}return s(p);case ws:t:{for(A=b.key;m!==null;){if(m.key===A)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){e(p,m.sibling),E=r(m,b.children||[]),E.return=p,p=E;break t}else{e(p,m);break}else t(p,m);m=m.sibling}E=zh(b,p.mode,E),E.return=p,p=E}return s(p);case Ni:return b=wr(b),w(p,m,b,E)}if(Ss(b))return y(p,m,b,E);if(fs(b)){if(A=fs(b),typeof A!="function")throw Error(k(150));return b=A.call(b),g(p,m,b,E)}if(typeof b.then=="function")return w(p,m,pl(b),E);if(b.$$typeof===hi)return w(p,m,fl(p,b),E);ml(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,m!==null&&m.tag===6?(e(p,m.sibling),E=r(m,b),E.return=p,p=E):(e(p,m),E=Uh(b,p.mode,E),E.return=p,p=E),s(p)):e(p,m)}return function(p,m,b,E){try{Ys=0;var A=w(p,m,b,E);return Ta=null,A}catch(x){if(x===Ga||x===bc)throw x;var T=Je(29,x,null,p.mode);return T.lanes=E,T.return=p,T}finally{}}}var Dr=qv(!0),Kv=qv(!1),Bi=!1;function Af(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dd(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Xi(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,vt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Yl(n),zv(n,null,e),t}return vc(n,i,t,e),Yl(n)}function Ds(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,fv(n,e)}}function jh(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var r=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var s={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,e=e.next}while(e!==null);a===null?r=a=t:a=a.next=t}else r=a=t;e={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var Md=!1;function Ms(){if(Md){var n=_a;if(n!==null)throw n}}function Ls(n,t,e,i){Md=!1;var r=n.updateQueue;Bi=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var h=r.baseState;s=0,u=c=l=null,o=a;do{var d=o.lane&-536870913,f=d!==o.lane;if(f?(dt&d)===d:(i&d)===d){d!==0&&d===Oa&&(Md=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});t:{var y=n,g=o;d=t;var w=e;switch(g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(w,h,d);break t}h=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,d=typeof y=="function"?y.call(w,h,d):y,d==null)break t;h=kt({},h,d);break t;case 2:Bi=!0}}d=o.callback,d!==null&&(n.flags|=64,f&&(n.flags|=8192),f=r.callbacks,f===null?r.callbacks=[d]:f.push(d))}else f={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,s|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,a===null&&(r.shared.lanes=0),nr|=s,n.lanes=s,n.memoizedState=h}}function Wv(n,t){if(typeof n!="function")throw Error(k(191,n));n.call(t)}function Zv(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)Wv(e[n],t)}var Na=Xn(null),ql=Xn(0);function s0(n,t){n=Si,Dt(ql,n),Dt(Na,t),Si=n|t.baseLanes}function Ld(){Dt(ql,Si),Dt(Na,Na.current)}function xf(){Si=ql.current,me(Na),me(ql)}var on=Xn(null),Tn=null;function Pi(n){var t=n.alternate;Dt(qt,qt.current&1),Dt(on,n),Tn===null&&(t===null||Na.current!==null||t.memoizedState!==null)&&(Tn=n)}function Od(n){Dt(qt,qt.current),Dt(on,n),Tn===null&&(Tn=n)}function Qv(n){n.tag===22?(Dt(qt,qt.current),Dt(on,n),Tn===null&&(Tn=n)):Fi(n)}function Fi(){Dt(qt,qt.current),Dt(on,on.current)}function Qe(n){me(on),Tn===n&&(Tn=null),me(qt)}var qt=Xn(0);function Kl(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||Zd(e)||Qd(e)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vi=0,st=null,_t=null,Zt=null,Wl=!1,Ra=!1,Mr=!1,Zl=0,Vs=0,Ca=null,Cx=0;function Vt(){throw Error(k(321))}function _f(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!sn(n[e],t[e]))return!1;return!0}function Tf(n,t,e,i,r,a){return vi=a,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=n===null||n.memoizedState===null?Db:Ff,Mr=!1,a=e(i,r),Mr=!1,Ra&&(a=tb(t,e,i,r)),Jv(n),a}function Jv(n){K.H=$s;var t=_t!==null&&_t.next!==null;if(vi=0,Zt=_t=st=null,Wl=!1,Vs=0,Ca=null,t)throw Error(k(300));n===null||te||(n=n.dependencies,n!==null&&$l(n)&&(te=!0))}function tb(n,t,e,i){st=n;var r=0;do{if(Ra&&(Ca=null),Vs=0,Ra=!1,25<=r)throw Error(k(301));if(r+=1,Zt=_t=null,n.updateQueue!=null){var a=n.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}K.H=Mb,a=t(e,i)}while(Ra);return a}function Dx(){var n=K.H,t=n.useState()[0];return t=typeof t.then=="function"?ao(t):t,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(st.flags|=1024),t}function Rf(){var n=Zl!==0;return Zl=0,n}function Cf(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function Df(n){if(Wl){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}Wl=!1}vi=0,Zt=_t=st=null,Ra=!1,Vs=Zl=0,Ca=null}function Re(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?st.memoizedState=Zt=n:Zt=Zt.next=n,Zt}function Kt(){if(_t===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var t=Zt===null?st.memoizedState:Zt.next;if(t!==null)Zt=t,_t=n;else{if(n===null)throw st.alternate===null?Error(k(467)):Error(k(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Zt===null?st.memoizedState=Zt=n:Zt=Zt.next=n}return Zt}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ao(n){var t=Vs;return Vs+=1,Ca===null&&(Ca=[]),n=Xv(Ca,n,t),t=st,(Zt===null?t.memoizedState:Zt.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?Db:Ff),n}function Sc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ao(n);if(n.$$typeof===hi)return be(n)}throw Error(k(438,String(n)))}function Mf(n){var t=null,e=st.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var i=st.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=wc(),st.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i<n;i++)e[i]=pA;return t.index++,e}function bi(n,t){return typeof t=="function"?t(n):t}function Dl(n){var t=Kt();return Lf(t,_t,n)}function Lf(n,t,e){var i=n.queue;if(i===null)throw Error(k(311));i.lastRenderedReducer=e;var r=n.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}t.baseQueue=r=a,i.pending=null}if(a=n.baseState,r===null)n.memoizedState=a;else{t=r.next;var o=s=null,l=null,c=t,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(dt&h)===h:(vi&h)===h){var d=c.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Oa&&(u=!0);else if((vi&d)===d){c=c.next,d===Oa&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,s=a):l=l.next=h,st.lanes|=d,nr|=d;h=c.action,Mr&&e(a,h),a=c.hasEagerState?c.eagerState:e(a,h)}else d={lane:h,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,s=a):l=l.next=d,st.lanes|=h,nr|=h;c=c.next}while(c!==null&&c!==t);if(l===null?s=a:l.next=o,!sn(a,n.memoizedState)&&(te=!0,u&&(e=_a,e!==null)))throw e;n.memoizedState=a,n.baseState=s,n.baseQueue=l,i.lastRenderedState=a}return r===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function Gh(n){var t=Kt(),e=t.queue;if(e===null)throw Error(k(311));e.lastRenderedReducer=n;var i=e.dispatch,r=e.pending,a=t.memoizedState;if(r!==null){e.pending=null;var s=r=r.next;do a=n(a,s.action),s=s.next;while(s!==r);sn(a,t.memoizedState)||(te=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,i]}function eb(n,t,e){var i=st,r=Kt(),a=pt;if(a){if(e===void 0)throw Error(k(407));e=e()}else e=t();var s=!sn((_t||r).memoizedState,e);if(s&&(r.memoizedState=e,te=!0),r=r.queue,Of(rb.bind(null,i,r,n),[n]),r.getSnapshot!==t||s||Zt!==null&&Zt.memoizedState.tag&1){if(i.flags|=2048,Ba(9,{destroy:void 0},ib.bind(null,i,r,e,t),null),Tt===null)throw Error(k(349));a||vi&127||nb(i,t,e)}return e}function nb(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=st.updateQueue,t===null?(t=wc(),st.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function ib(n,t,e,i){t.value=e,t.getSnapshot=i,ab(t)&&sb(n)}function rb(n,t,e){return e(function(){ab(t)&&sb(n)})}function ab(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!sn(n,e)}catch{return!0}}function sb(n){var t=kr(n,2);t!==null&&ze(t,n,2)}function Nd(n){var t=Re();if(typeof n=="function"){var e=n;if(n=e(),Mr){Ui(!0);try{e()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:n},t}function ob(n,t,e,i){return n.baseState=e,Lf(n,_t,typeof i=="function"?i:bi)}function Mx(n,t,e,i,r){if(Ac(n))throw Error(k(485));if(n=t.action,n!==null){var a={payload:r,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};K.T!==null?e(!0):a.isTransition=!1,i(a),e=t.pending,e===null?(a.next=t.pending=a,lb(t,a)):(a.next=e.next,t.pending=e.next=a)}}function lb(n,t){var e=t.action,i=t.payload,r=n.state;if(t.isTransition){var a=K.T,s={};K.T=s;try{var o=e(r,i),l=K.S;l!==null&&l(s,o),o0(n,t,o)}catch(c){Bd(n,t,c)}finally{a!==null&&s.types!==null&&(a.types=s.types),K.T=a}}else try{a=e(r,i),o0(n,t,a)}catch(c){Bd(n,t,c)}}function o0(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(i){l0(n,t,i)},function(i){return Bd(n,t,i)}):l0(n,t,e)}function l0(n,t,e){t.status="fulfilled",t.value=e,cb(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,lb(n,e)))}function Bd(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=e,cb(t),t=t.next;while(t!==i)}n.action=null}function cb(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function ub(n,t){return t}function c0(n,t){if(pt){var e=Tt.formState;if(e!==null){t:{var i=st;if(pt){if(Bt){e:{for(var r=Bt,a=_n;r.nodeType!==8;){if(!a){r=null;break e}if(r=Rn(r.nextSibling),r===null){r=null;break e}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){Bt=Rn(r.nextSibling),i=r.data==="F!";break t}}tr(i)}i=!1}i&&(t=e[0])}}return e=Re(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ub,lastRenderedState:t},e.queue=i,e=Tb.bind(null,st,i),i.dispatch=e,i=Nd(!1),a=Pf.bind(null,st,!1,i.queue),i=Re(),r={state:t,dispatch:null,action:n,pending:null},i.queue=r,e=Mx.bind(null,st,r,a,e),r.dispatch=e,i.memoizedState=n,[t,e,!1]}function u0(n){var t=Kt();return hb(t,_t,n)}function hb(n,t,e){if(t=Lf(n,t,ub)[0],n=Dl(bi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=ao(t)}catch(s){throw s===Ga?bc:s}else i=t;t=Kt();var r=t.queue,a=r.dispatch;return e!==t.memoizedState&&(st.flags|=2048,Ba(9,{destroy:void 0},Lx.bind(null,r,e),null)),[i,a,n]}function Lx(n,t){n.action=t}function h0(n){var t=Kt(),e=_t;if(e!==null)return hb(t,e,n);Kt(),t=t.memoizedState,e=Kt();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function Ba(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=st.updateQueue,t===null&&(t=wc(),st.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function db(){return Kt().memoizedState}function Ml(n,t,e,i){var r=Re();st.flags|=n,r.memoizedState=Ba(1|t,{destroy:void 0},e,i===void 0?null:i)}function Ec(n,t,e,i){var r=Kt();i=i===void 0?null:i;var a=r.memoizedState.inst;_t!==null&&i!==null&&_f(i,_t.memoizedState.deps)?r.memoizedState=Ba(t,a,e,i):(st.flags|=n,r.memoizedState=Ba(1|t,a,e,i))}function d0(n,t){Ml(8390656,8,n,t)}function Of(n,t){Ec(2048,8,n,t)}function Ox(n){st.flags|=4;var t=st.updateQueue;if(t===null)t=wc(),st.updateQueue=t,t.events=[n];else{var e=t.events;e===null?t.events=[n]:e.push(n)}}function fb(n){var t=Kt().memoizedState;return Ox({ref:t,nextImpl:n}),function(){if(vt&2)throw Error(k(440));return t.impl.apply(void 0,arguments)}}function pb(n,t){return Ec(4,2,n,t)}function mb(n,t){return Ec(4,4,n,t)}function gb(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function yb(n,t,e){e=e!=null?e.concat([n]):null,Ec(4,4,gb.bind(null,t,n),e)}function Nf(){}function vb(n,t){var e=Kt();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&&_f(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function bb(n,t){var e=Kt();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&&_f(t,i[1]))return i[0];if(i=n(),Mr){Ui(!0);try{n()}finally{Ui(!1)}}return e.memoizedState=[i,t],i}function Bf(n,t,e){return e===void 0||vi&1073741824&&!(dt&261930)?n.memoizedState=t:(n.memoizedState=e,n=ow(),st.lanes|=n,nr|=n,e)}function wb(n,t,e,i){return sn(e,t)?e:Na.current!==null?(n=Bf(n,e,i),sn(n,t)||(te=!0),n):!(vi&42)||vi&1073741824&&!(dt&261930)?(te=!0,n.memoizedState=e):(n=ow(),st.lanes|=n,nr|=n,t)}function Sb(n,t,e,i,r){var a=bt.p;bt.p=a!==0&&8>a?a:8;var s=K.T,o={};K.T=o,Pf(n,!1,t,e);try{var l=r(),c=K.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=Rx(l,i);Os(n,t,u,an(n))}else Os(n,t,i,an(n))}catch(h){Os(n,t,{then:function(){},status:"rejected",reason:h},an())}finally{bt.p=a,s!==null&&o.types!==null&&(s.types=o.types),K.T=s}}function Nx(){}function kd(n,t,e,i){if(n.tag!==5)throw Error(k(476));var r=Eb(n).queue;Sb(n,r,t,Er,e===null?Nx:function(){return Ab(n),e(i)})}function Eb(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:Er,baseState:Er,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:Er},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function Ab(n){var t=Eb(n);t.next===null&&(t=n.alternate.memoizedState),Os(n,t.next.queue,{},an())}function kf(){return be(Ks)}function xb(){return Kt().memoizedState}function _b(){return Kt().memoizedState}function Bx(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=an();n=$i(e);var i=Xi(t,n,e);i!==null&&(ze(i,t,e),Ds(i,t,e)),t={cache:wf()},n.payload=t;return}t=t.return}}function kx(n,t,e){var i=an();e={lane:i,revertLane:0,gesture:null,action:e,hasEagerState:!1,eagerState:null,next:null},Ac(n)?Rb(t,e):(e=gf(n,t,e,i),e!==null&&(ze(e,n,i),Cb(e,t,i)))}function Tb(n,t,e){var i=an();Os(n,t,e,i)}function Os(n,t,e,i){var r={lane:i,revertLane:0,gesture:null,action:e,hasEagerState:!1,eagerState:null,next:null};if(Ac(n))Rb(t,r);else{var a=n.alternate;if(n.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,e);if(r.hasEagerState=!0,r.eagerState=o,sn(o,s))return vc(n,t,r,0),Tt===null&&yc(),!1}catch{}finally{}if(e=gf(n,t,r,i),e!==null)return ze(e,n,i),Cb(e,t,i),!0}return!1}function Pf(n,t,e,i){if(i={lane:2,revertLane:Vf(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ac(n)){if(t)throw Error(k(479))}else t=gf(n,e,i,2),t!==null&&ze(t,n,2)}function Ac(n){var t=n.alternate;return n===st||t!==null&&t===st}function Rb(n,t){Ra=Wl=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function Cb(n,t,e){if(e&4194048){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,fv(n,e)}}var $s={readContext:be,use:Sc,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};$s.useEffectEvent=Vt;var Db={readContext:be,use:Sc,useCallback:function(n,t){return Re().memoizedState=[n,t===void 0?null:t],n},useContext:be,useEffect:d0,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,Ml(4194308,4,gb.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Ml(4194308,4,n,t)},useInsertionEffect:function(n,t){Ml(4,2,n,t)},useMemo:function(n,t){var e=Re();t=t===void 0?null:t;var i=n();if(Mr){Ui(!0);try{n()}finally{Ui(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=Re();if(e!==void 0){var r=e(t);if(Mr){Ui(!0);try{e(t)}finally{Ui(!1)}}}else r=t;return i.memoizedState=i.baseState=r,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},i.queue=n,n=n.dispatch=kx.bind(null,st,n),[i.memoizedState,n]},useRef:function(n){var t=Re();return n={current:n},t.memoizedState=n},useState:function(n){n=Nd(n);var t=n.queue,e=Tb.bind(null,st,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:Nf,useDeferredValue:function(n,t){var e=Re();return Bf(e,n,t)},useTransition:function(){var n=Nd(!1);return n=Sb.bind(null,st,n.queue,!0,!1),Re().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=st,r=Re();if(pt){if(e===void 0)throw Error(k(407));e=e()}else{if(e=t(),Tt===null)throw Error(k(349));dt&127||nb(i,t,e)}r.memoizedState=e;var a={value:e,getSnapshot:t};return r.queue=a,d0(rb.bind(null,i,a,n),[n]),i.flags|=2048,Ba(9,{destroy:void 0},ib.bind(null,i,a,e,t),null),e},useId:function(){var n=Re(),t=Tt.identifierPrefix;if(pt){var e=Yn,i=Gn;e=(i&~(1<<32-rn(i)-1)).toString(32)+e,t="_"+t+"R_"+e,e=Zl++,0<e&&(t+="H"+e.toString(32)),t+="_"}else e=Cx++,t="_"+t+"r_"+e.toString(32)+"_";return n.memoizedState=t},useHostTransitionStatus:kf,useFormState:c0,useActionState:c0,useOptimistic:function(n){var t=Re();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=Pf.bind(null,st,!0,e),e.dispatch=t,[n,t]},useMemoCache:Mf,useCacheRefresh:function(){return Re().memoizedState=Bx.bind(null,st)},useEffectEvent:function(n){var t=Re(),e={impl:n};return t.memoizedState=e,function(){if(vt&2)throw Error(k(440));return e.impl.apply(void 0,arguments)}}},Ff={readContext:be,use:Sc,useCallback:vb,useContext:be,useEffect:Of,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:bb,useReducer:Dl,useRef:db,useState:function(){return Dl(bi)},useDebugValue:Nf,useDeferredValue:function(n,t){var e=Kt();return wb(e,_t.memoizedState,n,t)},useTransition:function(){var n=Dl(bi)[0],t=Kt().memoizedState;return[typeof n=="boolean"?n:ao(n),t]},useSyncExternalStore:eb,useId:xb,useHostTransitionStatus:kf,useFormState:u0,useActionState:u0,useOptimistic:function(n,t){var e=Kt();return ob(e,_t,n,t)},useMemoCache:Mf,useCacheRefresh:_b};Ff.useEffectEvent=fb;var Mb={readContext:be,use:Sc,useCallback:vb,useContext:be,useEffect:Of,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:bb,useReducer:Gh,useRef:db,useState:function(){return Gh(bi)},useDebugValue:Nf,useDeferredValue:function(n,t){var e=Kt();return _t===null?Bf(e,n,t):wb(e,_t.memoizedState,n,t)},useTransition:function(){var n=Gh(bi)[0],t=Kt().memoizedState;return[typeof n=="boolean"?n:ao(n),t]},useSyncExternalStore:eb,useId:xb,useHostTransitionStatus:kf,useFormState:h0,useActionState:h0,useOptimistic:function(n,t){var e=Kt();return _t!==null?ob(e,_t,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:_b};Mb.useEffectEvent=fb;function Yh(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:kt({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Pd={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=an(),r=$i(i);r.payload=t,e!=null&&(r.callback=e),t=Xi(n,r,i),t!==null&&(ze(t,n,i),Ds(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=an(),r=$i(i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Xi(n,r,i),t!==null&&(ze(t,n,i),Ds(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=an(),i=$i(e);i.tag=2,t!=null&&(i.callback=t),t=Xi(n,i,e),t!==null&&(ze(t,n,e),Ds(t,n,e))}};function f0(n,t,e,i,r,a,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,a,s):t.prototype&&t.prototype.isPureReactComponent?!Hs(e,i)||!Hs(r,a):!0}function p0(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Pd.enqueueReplaceState(t,t.state,null)}function Lr(n,t){var e=t;if("ref"in t){e={};for(var i in t)i!=="ref"&&(e[i]=t[i])}if(n=n.defaultProps){e===t&&(e=kt({},e));for(var r in n)e[r]===void 0&&(e[r]=n[r])}return e}function Lb(n){Gl(n)}function Ob(n){console.error(n)}function Nb(n){Gl(n)}function Ql(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function m0(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Fd(n,t,e){return e=$i(e),e.tag=3,e.payload={element:null},e.callback=function(){Ql(n,t)},e}function Bb(n){return n=$i(n),n.tag=3,n}function kb(n,t,e,i){var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;n.payload=function(){return r(a)},n.callback=function(){m0(t,e,i)}}var s=e.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){m0(t,e,i),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function Px(n,t,e,i,r){if(e.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=e.alternate,t!==null&&ja(t,e,r,!0),e=on.current,e!==null){switch(e.tag){case 31:case 13:return Tn===null?ic():e.alternate===null&&$t===0&&($t=3),e.flags&=-257,e.flags|=65536,e.lanes=r,i===Xl?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),ed(n,i,r)),!1;case 22:return e.flags|=65536,i===Xl?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),ed(n,i,r)),!1}throw Error(k(435,e.tag))}return ed(n,i,r),ic(),!1}if(pt)return t=on.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==xd&&(n=Error(k(422),{cause:i}),Gs(xn(n,e)))):(i!==xd&&(t=Error(k(423),{cause:i}),Gs(xn(t,e))),n=n.current.alternate,n.flags|=65536,r&=-r,n.lanes|=r,i=xn(i,e),r=Fd(n.stateNode,i,r),jh(n,r),$t!==4&&($t=2)),!1;var a=Error(k(520),{cause:i});if(a=xn(a,e),ks===null?ks=[a]:ks.push(a),$t!==4&&($t=2),t===null)return!0;i=xn(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=r&-r,e.lanes|=n,n=Fd(e.stateNode,i,n),jh(e,n),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(qi===null||!qi.has(a))))return e.flags|=65536,r&=-r,e.lanes|=r,r=Bb(r),kb(r,n,e,i),jh(e,r),!1}e=e.return}while(e!==null);return!1}var If=Error(k(461)),te=!1;function ge(n,t,e,i){t.child=n===null?Kv(t,null,e,i):Dr(t,n.child,e,i)}function g0(n,t,e,i,r){e=e.render;var a=t.ref;if("ref"in i){var s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}else s=i;return Cr(t),i=Tf(n,t,e,s,a,r),o=Rf(),n!==null&&!te?(Cf(n,t,r),wi(n,t,r)):(pt&&o&&vf(t),t.flags|=1,ge(n,t,i,r),t.child)}function y0(n,t,e,i,r){if(n===null){var a=e.type;return typeof a=="function"&&!yf(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,Pb(n,t,a,i,r)):(n=Rl(e.type,null,i,t,t.mode,r),n.ref=t.ref,n.return=t,t.child=n)}if(a=n.child,!Uf(n,r)){var s=a.memoizedProps;if(e=e.compare,e=e!==null?e:Hs,e(s,i)&&n.ref===t.ref)return wi(n,t,r)}return t.flags|=1,n=pi(a,i),n.ref=t.ref,n.return=t,t.child=n}function Pb(n,t,e,i,r){if(n!==null){var a=n.memoizedProps;if(Hs(a,i)&&n.ref===t.ref)if(te=!1,t.pendingProps=i=a,Uf(n,r))n.flags&131072&&(te=!0);else return t.lanes=n.lanes,wi(n,t,r)}return Id(n,t,e,i,r)}function Fb(n,t,e,i){var r=i.children,a=n!==null?n.memoizedState:null;if(n===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|e:e,n!==null){for(i=t.child=n.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~a}else i=0,t.child=null;return v0(n,t,a,e,i)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&Cl(t,a!==null?a.cachePool:null),a!==null?s0(t,a):Ld(),Qv(t);else return i=t.lanes=536870912,v0(n,t,a!==null?a.baseLanes|e:e,e,i)}else a!==null?(Cl(t,a.cachePool),s0(t,a),Fi(t),t.memoizedState=null):(n!==null&&Cl(t,null),Ld(),Fi(t));return ge(n,t,r,e),t.child}function As(n,t){return n!==null&&n.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function v0(n,t,e,i,r){var a=Sf();return a=a===null?null:{parent:Jt._currentValue,pool:a},t.memoizedState={baseLanes:e,cachePool:a},n!==null&&Cl(t,null),Ld(),Qv(t),n!==null&&ja(n,t,i,!0),t.childLanes=r,null}function Ll(n,t){return t=Jl({mode:t.mode,children:t.children},n.mode),t.ref=n.ref,n.child=t,t.return=n,t}function b0(n,t,e){return Dr(t,n.child,null,e),n=Ll(t,t.pendingProps),n.flags|=2,Qe(t),t.memoizedState=null,n}function Fx(n,t,e){var i=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,n===null){if(pt){if(i.mode==="hidden")return n=Ll(t,i),t.lanes=536870912,As(null,n);if(Od(t),(n=Bt)?(n=Dw(n,_n),n=n!==null&&n.data==="&"?n:null,n!==null&&(t.memoizedState={dehydrated:n,treeContext:Ji!==null?{id:Gn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},e=jv(n),e.return=t,t.child=e,ve=t,Bt=null)):n=null,n===null)throw tr(t);return t.lanes=536870912,null}return Ll(t,i)}var a=n.memoizedState;if(a!==null){var s=a.dehydrated;if(Od(t),r)if(t.flags&256)t.flags&=-257,t=b0(n,t,e);else if(t.memoizedState!==null)t.child=n.child,t.flags|=128,t=null;else throw Error(k(558));else if(te||ja(n,t,e,!1),r=(e&n.childLanes)!==0,te||r){if(i=Tt,i!==null&&(s=pv(i,e),s!==0&&s!==a.retryLane))throw a.retryLane=s,kr(n,s),ze(i,n,s),If;ic(),t=b0(n,t,e)}else n=a.treeContext,Bt=Rn(s.nextSibling),ve=t,pt=!0,Vi=null,_n=!1,n!==null&&Yv(t,n),t=Ll(t,i),t.flags|=4096;return t}return n=pi(n.child,{mode:i.mode,children:i.children}),n.ref=t.ref,t.child=n,n.return=t,n}function Ol(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(k(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function Id(n,t,e,i,r){return Cr(t),e=Tf(n,t,e,i,void 0,r),i=Rf(),n!==null&&!te?(Cf(n,t,r),wi(n,t,r)):(pt&&i&&vf(t),t.flags|=1,ge(n,t,e,r),t.child)}function w0(n,t,e,i,r,a){return Cr(t),t.updateQueue=null,e=tb(t,i,e,r),Jv(n),i=Rf(),n!==null&&!te?(Cf(n,t,a),wi(n,t,a)):(pt&&i&&vf(t),t.flags|=1,ge(n,t,e,a),t.child)}function S0(n,t,e,i,r){if(Cr(t),t.stateNode===null){var a=va,s=e.contextType;typeof s=="object"&&s!==null&&(a=be(s)),a=new e(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Pd,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},Af(t),s=e.contextType,a.context=typeof s=="object"&&s!==null?be(s):va,a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yh(t,e,s,i),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Pd.enqueueReplaceState(a,a.state,null),Ls(t,i,a,r),Ms(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(n===null){a=t.stateNode;var o=t.memoizedProps,l=Lr(e,o);a.props=l;var c=a.context,u=e.contextType;s=va,typeof u=="object"&&u!==null&&(s=be(u));var h=e.getDerivedStateFromProps;u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o||c!==s)&&p0(t,a,i,s),Bi=!1;var d=t.memoizedState;a.state=d,Ls(t,i,a,r),Ms(),c=t.memoizedState,o||d!==c||Bi?(typeof h=="function"&&(Yh(t,e,h,i),c=t.memoizedState),(l=Bi||f0(t,e,l,i,d,c,s))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=s,i=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Dd(n,t),s=t.memoizedProps,u=Lr(e,s),a.props=u,h=t.pendingProps,d=a.context,c=e.contextType,l=va,typeof c=="object"&&c!==null&&(l=be(c)),o=e.getDerivedStateFromProps,(c=typeof o=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==h||d!==l)&&p0(t,a,i,l),Bi=!1,d=t.memoizedState,a.state=d,Ls(t,i,a,r),Ms();var f=t.memoizedState;s!==h||d!==f||Bi||n!==null&&n.dependencies!==null&&$l(n.dependencies)?(typeof o=="function"&&(Yh(t,e,o,i),f=t.memoizedState),(u=Bi||f0(t,e,u,i,d,f,l)||n!==null&&n.dependencies!==null&&$l(n.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,f,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),i=!1)}return a=i,Ol(n,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,e=i&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,n!==null&&i?(t.child=Dr(t,n.child,null,r),t.child=Dr(t,null,e,r)):ge(n,t,e,r),t.memoizedState=a.state,n=t.child):n=wi(n,t,r),n}function E0(n,t,e,i){return Rr(),t.flags|=256,ge(n,t,e,i),t.child}var Vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $h(n){return{baseLanes:n,cachePool:$v()}}function Xh(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=tn),n}function Ib(n,t,e){var i=t.pendingProps,r=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),s&&(r=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,n===null){if(pt){if(r?Pi(t):Fi(t),(n=Bt)?(n=Dw(n,_n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(t.memoizedState={dehydrated:n,treeContext:Ji!==null?{id:Gn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},e=jv(n),e.return=t,t.child=e,ve=t,Bt=null)):n=null,n===null)throw tr(t);return Qd(n)?t.lanes=32:t.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(Fi(t),r=t.mode,o=Jl({mode:"hidden",children:o},r),i=Ar(i,r,e,null),o.return=t,i.return=t,o.sibling=i,t.child=o,i=t.child,i.memoizedState=$h(e),i.childLanes=Xh(n,s,e),t.memoizedState=Vh,As(null,i)):(Pi(t),Ud(t,o))}var l=n.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(a)t.flags&256?(Pi(t),t.flags&=-257,t=qh(n,t,e)):t.memoizedState!==null?(Fi(t),t.child=n.child,t.flags|=128,t=null):(Fi(t),o=i.fallback,r=t.mode,i=Jl({mode:"visible",children:i.children},r),o=Ar(o,r,e,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,Dr(t,n.child,null,e),i=t.child,i.memoizedState=$h(e),i.childLanes=Xh(n,s,e),t.memoizedState=Vh,t=As(null,i));else if(Pi(t),Qd(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(k(419)),i.stack="",i.digest=s,Gs({value:i,source:null,stack:null}),t=qh(n,t,e)}else if(te||ja(n,t,e,!1),s=(e&n.childLanes)!==0,te||s){if(s=Tt,s!==null&&(i=pv(s,e),i!==0&&i!==l.retryLane))throw l.retryLane=i,kr(n,i),ze(s,n,i),If;Zd(o)||ic(),t=qh(n,t,e)}else Zd(o)?(t.flags|=192,t.child=n.child,t=null):(n=l.treeContext,Bt=Rn(o.nextSibling),ve=t,pt=!0,Vi=null,_n=!1,n!==null&&Yv(t,n),t=Ud(t,i.children),t.flags|=4096);return t}return r?(Fi(t),o=i.fallback,r=t.mode,l=n.child,c=l.sibling,i=pi(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=pi(c,o):(o=Ar(o,r,e,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,As(null,i),i=t.child,o=n.child.memoizedState,o===null?o=$h(e):(r=o.cachePool,r!==null?(l=Jt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=$v(),o={baseLanes:o.baseLanes|e,cachePool:r}),i.memoizedState=o,i.childLanes=Xh(n,s,e),t.memoizedState=Vh,As(n.child,i)):(Pi(t),e=n.child,n=e.sibling,e=pi(e,{mode:"visible",children:i.children}),e.return=t,e.sibling=null,n!==null&&(s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)),t.child=e,t.memoizedState=null,e)}function Ud(n,t){return t=Jl({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function Jl(n,t){return n=Je(22,n,null,t),n.lanes=0,n}function qh(n,t,e){return Dr(t,n.child,null,e),n=Ud(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function A0(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Td(n.return,t,e)}function Kh(n,t,e,i,r,a){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:r,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=r,s.treeForkCount=a)}function Ub(n,t,e){var i=t.pendingProps,r=i.revealOrder,a=i.tail;i=i.children;var s=qt.current,o=(s&2)!==0;if(o?(s=s&1|2,t.flags|=128):s&=1,Dt(qt,s),ge(n,t,i,e),i=pt?js:0,!o&&n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&A0(n,e,t);else if(n.tag===19)A0(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(r){case"forwards":for(e=t.child,r=null;e!==null;)n=e.alternate,n!==null&&Kl(n)===null&&(r=e),e=e.sibling;e=r,e===null?(r=t.child,t.child=null):(r=e.sibling,e.sibling=null),Kh(t,!1,r,e,a,i);break;case"backwards":case"unstable_legacy-backwards":for(e=null,r=t.child,t.child=null;r!==null;){if(n=r.alternate,n!==null&&Kl(n)===null){t.child=r;break}n=r.sibling,r.sibling=e,e=r,r=n}Kh(t,!0,e,null,a,i);break;case"together":Kh(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function wi(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),nr|=t.lanes,!(e&t.childLanes))if(n!==null){if(ja(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(k(153));if(t.child!==null){for(n=t.child,e=pi(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=pi(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function Uf(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&$l(n)))}function Ix(n,t,e){switch(t.tag){case 3:Ul(t,t.stateNode.containerInfo),ki(t,Jt,n.memoizedState.cache),Rr();break;case 27:case 5:fd(t);break;case 4:Ul(t,t.stateNode.containerInfo);break;case 10:ki(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Od(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Pi(t),t.flags|=128,null):e&t.child.childLanes?Ib(n,t,e):(Pi(t),n=wi(n,t,e),n!==null?n.sibling:null);Pi(t);break;case 19:var r=(n.flags&128)!==0;if(i=(e&t.childLanes)!==0,i||(ja(n,t,e,!1),i=(e&t.childLanes)!==0),r){if(i)return Ub(n,t,e);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Dt(qt,qt.current),i)break;return null;case 22:return t.lanes=0,Fb(n,t,e,t.pendingProps);case 24:ki(t,Jt,n.memoizedState.cache)}return wi(n,t,e)}function zb(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)te=!0;else{if(!Uf(n,e)&&!(t.flags&128))return te=!1,Ix(n,t,e);te=!!(n.flags&131072)}else te=!1,pt&&t.flags&1048576&&Gv(t,js,t.index);switch(t.lanes=0,t.tag){case 16:t:{var i=t.pendingProps;if(n=wr(t.elementType),t.type=n,typeof n=="function")yf(n)?(i=Lr(n,i),t.tag=1,t=S0(null,t,n,i,e)):(t.tag=0,t=Id(null,t,n,i,e));else{if(n!=null){var r=n.$$typeof;if(r===nf){t.tag=11,t=g0(null,t,n,i,e);break t}else if(r===rf){t.tag=14,t=y0(null,t,n,i,e);break t}}throw t=hd(n)||n,Error(k(306,t,""))}}return t;case 0:return Id(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,r=Lr(i,t.pendingProps),S0(n,t,i,r,e);case 3:t:{if(Ul(t,t.stateNode.containerInfo),n===null)throw Error(k(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,Dd(n,t),Ls(t,i,null,e);var s=t.memoizedState;if(i=s.cache,ki(t,Jt,i),i!==a.cache&&Rd(t,[Jt],e,!0),Ms(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=E0(n,t,i,e);break t}else if(i!==r){r=xn(Error(k(424)),t),Gs(r),t=E0(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Bt=Rn(n.firstChild),ve=t,pt=!0,Vi=null,_n=!0,e=Kv(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(Rr(),i===r){t=wi(n,t,e);break t}ge(n,t,i,e)}t=t.child}return t;case 26:return Ol(n,t),n===null?(e=V0(t.type,null,t.pendingProps,null))?t.memoizedState=e:pt||(e=t.type,n=t.pendingProps,i=oc(Yi.current).createElement(e),i[ye]=t,i[He]=n,we(i,e,n),pe(i),t.stateNode=i):t.memoizedState=V0(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return fd(t),n===null&&pt&&(i=t.stateNode=Mw(t.type,t.pendingProps,Yi.current),ve=t,_n=!0,r=Bt,rr(t.type)?(Jd=r,Bt=Rn(i.firstChild)):Bt=r),ge(n,t,t.pendingProps.children,e),Ol(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&pt&&((r=i=Bt)&&(i=d_(i,t.type,t.pendingProps,_n),i!==null?(t.stateNode=i,ve=t,Bt=Rn(i.firstChild),_n=!1,r=!0):r=!1),r||tr(t)),fd(t),r=t.type,a=t.pendingProps,s=n!==null?n.memoizedProps:null,i=a.children,Kd(r,a)?i=null:s!==null&&Kd(r,s)&&(t.flags|=32),t.memoizedState!==null&&(r=Tf(n,t,Dx,null,null,e),Ks._currentValue=r),Ol(n,t),ge(n,t,i,e),t.child;case 6:return n===null&&pt&&((n=e=Bt)&&(e=f_(e,t.pendingProps,_n),e!==null?(t.stateNode=e,ve=t,Bt=null,n=!0):n=!1),n||tr(t)),null;case 13:return Ib(n,t,e);case 4:return Ul(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=Dr(t,null,i,e):ge(n,t,i,e),t.child;case 11:return g0(n,t,t.type,t.pendingProps,e);case 7:return ge(n,t,t.pendingProps,e),t.child;case 8:return ge(n,t,t.pendingProps.children,e),t.child;case 12:return ge(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,ki(t,t.type,i.value),ge(n,t,i.children,e),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Cr(t),r=be(r),i=i(r),t.flags|=1,ge(n,t,i,e),t.child;case 14:return y0(n,t,t.type,t.pendingProps,e);case 15:return Pb(n,t,t.type,t.pendingProps,e);case 19:return Ub(n,t,e);case 31:return Fx(n,t,e);case 22:return Fb(n,t,e,t.pendingProps);case 24:return Cr(t),i=be(Jt),n===null?(r=Sf(),r===null&&(r=Tt,a=wf(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=e),r=a),t.memoizedState={parent:i,cache:r},Af(t),ki(t,Jt,r)):(n.lanes&e&&(Dd(n,t),Ls(t,null,null,e),Ms()),r=n.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),ki(t,Jt,i)):(i=a.cache,ki(t,Jt,i),i!==r.cache&&Rd(t,[Jt],e,!0))),ge(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(k(156,t.tag))}function ai(n){n.flags|=4}function Wh(n,t,e,i,r){if((t=(n.mode&32)!==0)&&(t=!1),t){if(n.flags|=16777216,(r&335544128)===r)if(n.stateNode.complete)n.flags|=8192;else if(uw())n.flags|=8192;else throw _r=Xl,Ef}else n.flags&=-16777217}function x0(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!Nw(t))if(uw())n.flags|=8192;else throw _r=Xl,Ef}function gl(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?hv():536870912,n.lanes|=t,ka|=t)}function gs(n,t){if(!pt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Nt(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)e|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function Ux(n,t,e){var i=t.pendingProps;switch(bf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Nt(t),null;case 3:return e=t.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),mi(Jt),Da(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(sa(t)?ai(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hh())),Nt(t),null;case 26:var r=t.type,a=t.memoizedState;return n===null?(ai(t),a!==null?(Nt(t),x0(t,a)):(Nt(t),Wh(t,r,null,i,e))):a?a!==n.memoizedState?(ai(t),Nt(t),x0(t,a)):(Nt(t),t.flags&=-16777217):(n=n.memoizedProps,n!==i&&ai(t),Nt(t),Wh(t,r,n,i,e)),null;case 27:if(zl(t),e=Yi.current,r=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&ai(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Nt(t),null}n=$n.current,sa(t)?Jy(t,n):(n=Mw(r,i,e),t.stateNode=n,ai(t))}return Nt(t),null;case 5:if(zl(t),r=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&ai(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Nt(t),null}if(a=$n.current,sa(t))Jy(t,a);else{var s=oc(Yi.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":a=s.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a=typeof i.is=="string"?s.createElement(r,{is:i.is}):s.createElement(r)}}a[ye]=t,a[He]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;t:switch(we(a,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&ai(t)}}return Nt(t),Wh(t,t.type,n===null?null:n.memoizedProps,t.pendingProps,e),null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==i&&ai(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(k(166));if(n=Yi.current,sa(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,r=ve,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}n[ye]=t,n=!!(n.nodeValue===e||i!==null&&i.suppressHydrationWarning===!0||Tw(n.nodeValue,e)),n||tr(t,!0)}else n=oc(n).createTextNode(i),n[ye]=t,t.stateNode=n}return Nt(t),null;case 31:if(e=t.memoizedState,n===null||n.memoizedState!==null){if(i=sa(t),e!==null){if(n===null){if(!i)throw Error(k(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(k(557));n[ye]=t}else Rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),n=!1}else e=Hh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=e),n=!0;if(!n)return t.flags&256?(Qe(t),t):(Qe(t),null);if(t.flags&128)throw Error(k(558))}return Nt(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(r=sa(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(k(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(k(317));r[ye]=t}else Rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nt(t),r=!1}else r=Hh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Qe(t),t):(Qe(t),null)}return Qe(t),t.flags&128?(t.lanes=e,t):(e=i!==null,n=n!==null&&n.memoizedState!==null,e&&(i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)),e!==n&&e&&(t.child.flags|=8192),gl(t,t.updateQueue),Nt(t),null);case 4:return Da(),n===null&&$f(t.stateNode.containerInfo),Nt(t),null;case 10:return mi(t.type),Nt(t),null;case 19:if(me(qt),i=t.memoizedState,i===null)return Nt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)gs(i,!1);else{if($t!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(a=Kl(n),a!==null){for(t.flags|=128,gs(i,!1),n=a.updateQueue,t.updateQueue=n,gl(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)Hv(e,n),e=e.sibling;return Dt(qt,qt.current&1|2),pt&&ci(t,i.treeForkCount),t.child}n=n.sibling}i.tail!==null&&en()>ec&&(t.flags|=128,r=!0,gs(i,!1),t.lanes=4194304)}else{if(!r)if(n=Kl(a),n!==null){if(t.flags|=128,r=!0,n=n.updateQueue,t.updateQueue=n,gl(t,n),gs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!pt)return Nt(t),null}else 2*en()-i.renderingStartTime>ec&&e!==536870912&&(t.flags|=128,r=!0,gs(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=en(),n.sibling=null,e=qt.current,Dt(qt,r?e&1|2:e&1),pt&&ci(t,i.treeForkCount),n):(Nt(t),null);case 22:case 23:return Qe(t),xf(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?e&536870912&&!(t.flags&128)&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),e=t.updateQueue,e!==null&&gl(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(t.flags|=2048),n!==null&&me(xr),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),mi(Jt),Nt(t),null;case 25:return null;case 30:return null}throw Error(k(156,t.tag))}function zx(n,t){switch(bf(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return mi(Jt),Da(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return zl(t),null;case 31:if(t.memoizedState!==null){if(Qe(t),t.alternate===null)throw Error(k(340));Rr()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 13:if(Qe(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(k(340));Rr()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return me(qt),null;case 4:return Da(),null;case 10:return mi(t.type),null;case 22:case 23:return Qe(t),xf(),n!==null&&me(xr),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return mi(Jt),null;case 25:return null;default:return null}}function Hb(n,t){switch(bf(t),t.tag){case 3:mi(Jt),Da();break;case 26:case 27:case 5:zl(t);break;case 4:Da();break;case 31:t.memoizedState!==null&&Qe(t);break;case 13:Qe(t);break;case 19:me(qt);break;case 10:mi(t.type);break;case 22:case 23:Qe(t),xf(),n!==null&&me(xr);break;case 24:mi(Jt)}}function so(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var r=i.next;e=r;do{if((e.tag&n)===n){i=void 0;var a=e.create,s=e.inst;i=a(),s.destroy=i}e=e.next}while(e!==r)}}catch(o){At(t,t.return,o)}}function er(n,t,e){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&n)===n){var s=i.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,r=t;var l=e,c=o;try{c()}catch(u){At(r,l,u)}}}i=i.next}while(i!==a)}}catch(u){At(t,t.return,u)}}function jb(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{Zv(t,e)}catch(i){At(n,n.return,i)}}}function Gb(n,t,e){e.props=Lr(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){At(n,t,i)}}function Ns(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e=="function"?n.refCleanup=e(i):e.current=i}}catch(r){At(n,t,r)}}function Vn(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i=="function")try{i()}catch(r){At(n,t,r)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(r){At(n,t,r)}else e.current=null}function Yb(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&i.focus();break t;case"img":e.src?i.src=e.src:e.srcSet&&(i.srcset=e.srcSet)}}catch(r){At(n,n.return,r)}}function Zh(n,t,e){try{var i=n.stateNode;s_(i,n.type,e,t),i[He]=t}catch(r){At(n,n.return,r)}}function Vb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&rr(n.type)||n.tag===4}function Qh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Vb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&rr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zd(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=di));else if(i!==4&&(i===27&&rr(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(zd(n,t,e),n=n.sibling;n!==null;)zd(n,t,e),n=n.sibling}function tc(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(i===27&&rr(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(tc(n,t,e),n=n.sibling;n!==null;)tc(n,t,e),n=n.sibling}function $b(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);we(t,i,e),t[ye]=n,t[He]=e}catch(a){At(n,n.return,a)}}var ui=!1,Qt=!1,Jh=!1,_0=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Hx(n,t){if(n=n.containerInfo,Xd=hc,n=Nv(n),pf(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var s=0,o=-1,l=-1,c=0,u=0,h=n,d=null;e:for(;;){for(var f;h!==e||r!==0&&h.nodeType!==3||(o=s+r),h!==a||i!==0&&h.nodeType!==3||(l=s+i),h.nodeType===3&&(s+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break e;if(d===e&&++c===r&&(o=s),d===a&&++u===i&&(l=s),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}e=o===-1||l===-1?null:{start:o,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(qd={focusedElem:n,selectionRange:e},hc=!1,fe=t;fe!==null;)if(t=fe,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,fe=n;else for(;fe!==null;){switch(t=fe,a=t.alternate,n=t.flags,t.tag){case 0:if(n&4&&(n=t.updateQueue,n=n!==null?n.events:null,n!==null))for(e=0;e<n.length;e++)r=n[e],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(n&1024&&a!==null){n=void 0,e=t,r=a.memoizedProps,a=a.memoizedState,i=e.stateNode;try{var y=Lr(e.type,r);n=i.getSnapshotBeforeUpdate(y,a),i.__reactInternalSnapshotBeforeUpdate=n}catch(g){At(e,e.return,g)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)Wd(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(k(163))}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Xb(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:oi(n,e),i&4&&so(5,e);break;case 1:if(oi(n,e),i&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(s){At(e,e.return,s)}else{var r=Lr(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(r,t,n.__reactInternalSnapshotBeforeUpdate)}catch(s){At(e,e.return,s)}}i&64&&jb(e),i&512&&Ns(e,e.return);break;case 3:if(oi(n,e),i&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{Zv(n,t)}catch(s){At(e,e.return,s)}}break;case 27:t===null&&i&4&&$b(e);case 26:case 5:oi(n,e),t===null&&i&4&&Yb(e),i&512&&Ns(e,e.return);break;case 12:oi(n,e);break;case 31:oi(n,e),i&4&&Wb(n,e);break;case 13:oi(n,e),i&4&&Zb(n,e),i&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=Wx.bind(null,e),p_(n,e))));break;case 22:if(i=e.memoizedState!==null||ui,!i){t=t!==null&&t.memoizedState!==null||Qt,r=ui;var a=Qt;ui=i,(Qt=t)&&!a?li(n,e,(e.subtreeFlags&8772)!==0):oi(n,e),ui=r,Qt=a}break;case 30:break;default:oi(n,e)}}function qb(n){var t=n.alternate;t!==null&&(n.alternate=null,qb(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&lf(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ut=null,Ie=!1;function si(n,t,e){for(e=e.child;e!==null;)Kb(n,t,e),e=e.sibling}function Kb(n,t,e){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Js,e)}catch{}switch(e.tag){case 26:Qt||Vn(e,t),si(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:Qt||Vn(e,t);var i=Ut,r=Ie;rr(e.type)&&(Ut=e.stateNode,Ie=!1),si(n,t,e),Fs(e.stateNode),Ut=i,Ie=r;break;case 5:Qt||Vn(e,t);case 6:if(i=Ut,r=Ie,Ut=null,si(n,t,e),Ut=i,Ie=r,Ut!==null)if(Ie)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(e.stateNode)}catch(a){At(e,t,a)}else try{Ut.removeChild(e.stateNode)}catch(a){At(e,t,a)}break;case 18:Ut!==null&&(Ie?(n=Ut,z0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Ua(n)):z0(Ut,e.stateNode));break;case 4:i=Ut,r=Ie,Ut=e.stateNode.containerInfo,Ie=!0,si(n,t,e),Ut=i,Ie=r;break;case 0:case 11:case 14:case 15:er(2,e,t),Qt||er(4,e,t),si(n,t,e);break;case 1:Qt||(Vn(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"&&Gb(e,t,i)),si(n,t,e);break;case 21:si(n,t,e);break;case 22:Qt=(i=Qt)||e.memoizedState!==null,si(n,t,e),Qt=i;break;default:si(n,t,e)}}function Wb(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ua(n)}catch(e){At(t,t.return,e)}}}function Zb(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ua(n)}catch(e){At(t,t.return,e)}}function jx(n){switch(n.tag){case 31:case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new _0),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new _0),t;default:throw Error(k(435,n.tag))}}function yl(n,t){var e=jx(n);t.forEach(function(i){if(!e.has(i)){e.add(i);var r=Zx.bind(null,n,i);i.then(r,r)}})}function Pe(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var r=e[i],a=n,s=t,o=s;t:for(;o!==null;){switch(o.tag){case 27:if(rr(o.type)){Ut=o.stateNode,Ie=!1;break t}break;case 5:Ut=o.stateNode,Ie=!1;break t;case 3:case 4:Ut=o.stateNode.containerInfo,Ie=!0;break t}o=o.return}if(Ut===null)throw Error(k(160));Kb(a,s,r),Ut=null,Ie=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Qb(t,n),t=t.sibling}var Pn=null;function Qb(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pe(t,n),Fe(n),i&4&&(er(3,n,n.return),so(3,n),er(5,n,n.return));break;case 1:Pe(t,n),Fe(n),i&512&&(Qt||e===null||Vn(e,e.return)),i&64&&ui&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var r=Pn;if(Pe(t,n),Fe(n),i&512&&(Qt||e===null||Vn(e,e.return)),i&4){var a=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,r=r.ownerDocument||r;e:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[no]||a[ye]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),we(a,i,e),a[ye]=n,pe(a),i=a;break t;case"link":var s=X0("link","href",r).get(i+(e.href||""));if(s){for(var o=0;o<s.length;o++)if(a=s[o],a.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){s.splice(o,1);break e}}a=r.createElement(i),we(a,i,e),r.head.appendChild(a);break;case"meta":if(s=X0("meta","content",r).get(i+(e.content||""))){for(o=0;o<s.length;o++)if(a=s[o],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){s.splice(o,1);break e}}a=r.createElement(i),we(a,i,e),r.head.appendChild(a);break;default:throw Error(k(468,i))}a[ye]=n,pe(a),i=a}n.stateNode=i}else q0(r,n.type,n.stateNode);else n.stateNode=$0(r,i,n.memoizedProps);else a!==i?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,i===null?q0(r,n.type,n.stateNode):$0(r,i,n.memoizedProps)):i===null&&n.stateNode!==null&&Zh(n,n.memoizedProps,e.memoizedProps)}break;case 27:Pe(t,n),Fe(n),i&512&&(Qt||e===null||Vn(e,e.return)),e!==null&&i&4&&Zh(n,n.memoizedProps,e.memoizedProps);break;case 5:if(Pe(t,n),Fe(n),i&512&&(Qt||e===null||Vn(e,e.return)),n.flags&32){r=n.stateNode;try{La(r,"")}catch(y){At(n,n.return,y)}}i&4&&n.stateNode!=null&&(r=n.memoizedProps,Zh(n,r,e!==null?e.memoizedProps:r)),i&1024&&(Jh=!0);break;case 6:if(Pe(t,n),Fe(n),i&4){if(n.stateNode===null)throw Error(k(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(y){At(n,n.return,y)}}break;case 3:if(kl=null,r=Pn,Pn=lc(t.containerInfo),Pe(t,n),Pn=r,Fe(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Ua(t.containerInfo)}catch(y){At(n,n.return,y)}Jh&&(Jh=!1,Jb(n));break;case 4:i=Pn,Pn=lc(n.stateNode.containerInfo),Pe(t,n),Fe(n),Pn=i;break;case 12:Pe(t,n),Fe(n);break;case 31:Pe(t,n),Fe(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,yl(n,i)));break;case 13:Pe(t,n),Fe(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(xc=en()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,yl(n,i)));break;case 22:r=n.memoizedState!==null;var l=e!==null&&e.memoizedState!==null,c=ui,u=Qt;if(ui=c||r,Qt=u||l,Pe(t,n),Qt=u,ui=c,Fe(n),i&8192)t:for(t=n.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(e===null||l||ui||Qt||Sr(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){l=e=t;try{if(a=l.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var h=l.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(y){At(l,l.return,y)}}}else if(t.tag===6){if(e===null){l=t;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(y){At(l,l.return,y)}}}else if(t.tag===18){if(e===null){l=t;try{var f=l.stateNode;r?H0(f,!0):H0(l.stateNode,!1)}catch(y){At(l,l.return,y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=n.updateQueue,i!==null&&(e=i.retryQueue,e!==null&&(i.retryQueue=null,yl(n,e))));break;case 19:Pe(t,n),Fe(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,yl(n,i)));break;case 30:break;case 21:break;default:Pe(t,n),Fe(n)}}function Fe(n){var t=n.flags;if(t&2){try{for(var e,i=n.return;i!==null;){if(Vb(i)){e=i;break}i=i.return}if(e==null)throw Error(k(160));switch(e.tag){case 27:var r=e.stateNode,a=Qh(n);tc(n,a,r);break;case 5:var s=e.stateNode;e.flags&32&&(La(s,""),e.flags&=-33);var o=Qh(n);tc(n,o,s);break;case 3:case 4:var l=e.stateNode.containerInfo,c=Qh(n);zd(n,c,l);break;default:throw Error(k(161))}}catch(u){At(n,n.return,u)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function Jb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;Jb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function oi(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xb(n,t.alternate,t),t=t.sibling}function Sr(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:er(4,t,t.return),Sr(t);break;case 1:Vn(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&Gb(t,t.return,e),Sr(t);break;case 27:Fs(t.stateNode);case 26:case 5:Vn(t,t.return),Sr(t);break;case 22:t.memoizedState===null&&Sr(t);break;case 30:Sr(t);break;default:Sr(t)}n=n.sibling}}function li(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=n,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:li(r,a,e),so(4,a);break;case 1:if(li(r,a,e),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){At(i,i.return,c)}if(i=a,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)Wv(l[r],o)}catch(c){At(i,i.return,c)}}e&&s&64&&jb(a),Ns(a,a.return);break;case 27:$b(a);case 26:case 5:li(r,a,e),e&&i===null&&s&4&&Yb(a),Ns(a,a.return);break;case 12:li(r,a,e);break;case 31:li(r,a,e),e&&s&4&&Wb(r,a);break;case 13:li(r,a,e),e&&s&4&&Zb(r,a);break;case 22:a.memoizedState===null&&li(r,a,e),Ns(a,a.return);break;case 30:break;default:li(r,a,e)}t=t.sibling}}function zf(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&ro(e))}function Hf(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&ro(n))}function kn(n,t,e,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tw(n,t,e,i),t=t.sibling}function tw(n,t,e,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:kn(n,t,e,i),r&2048&&so(9,t);break;case 1:kn(n,t,e,i);break;case 3:kn(n,t,e,i),r&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&ro(n)));break;case 12:if(r&2048){kn(n,t,e,i),n=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;typeof o=="function"&&o(s,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(l){At(t,t.return,l)}}else kn(n,t,e,i);break;case 31:kn(n,t,e,i);break;case 13:kn(n,t,e,i);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,t.memoizedState!==null?a._visibility&2?kn(n,t,e,i):Bs(n,t):a._visibility&2?kn(n,t,e,i):(a._visibility|=2,la(n,t,e,i,(t.subtreeFlags&10256)!==0||!1)),r&2048&&zf(s,t);break;case 24:kn(n,t,e,i),r&2048&&Hf(t.alternate,t);break;default:kn(n,t,e,i)}}function la(n,t,e,i,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=n,s=t,o=e,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:la(a,s,o,l,r),so(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?la(a,s,o,l,r):Bs(a,s):(u._visibility|=2,la(a,s,o,l,r)),r&&c&2048&&zf(s.alternate,s);break;case 24:la(a,s,o,l,r),r&&c&2048&&Hf(s.alternate,s);break;default:la(a,s,o,l,r)}t=t.sibling}}function Bs(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,i=t,r=i.flags;switch(i.tag){case 22:Bs(e,i),r&2048&&zf(i.alternate,i);break;case 24:Bs(e,i),r&2048&&Hf(i.alternate,i);break;default:Bs(e,i)}t=t.sibling}}var xs=8192;function oa(n,t,e){if(n.subtreeFlags&xs)for(n=n.child;n!==null;)ew(n,t,e),n=n.sibling}function ew(n,t,e){switch(n.tag){case 26:oa(n,t,e),n.flags&xs&&n.memoizedState!==null&&T_(e,Pn,n.memoizedState,n.memoizedProps);break;case 5:oa(n,t,e);break;case 3:case 4:var i=Pn;Pn=lc(n.stateNode.containerInfo),oa(n,t,e),Pn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=xs,xs=16777216,oa(n,t,e),xs=i):oa(n,t,e));break;default:oa(n,t,e)}}function nw(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function ys(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];fe=i,rw(i,n)}nw(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)iw(n),n=n.sibling}function iw(n){switch(n.tag){case 0:case 11:case 15:ys(n),n.flags&2048&&er(9,n,n.return);break;case 3:ys(n);break;case 12:ys(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,Nl(n)):ys(n);break;default:ys(n)}}function Nl(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];fe=i,rw(i,n)}nw(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:er(8,t,t.return),Nl(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,Nl(t));break;default:Nl(t)}n=n.sibling}}function rw(n,t){for(;fe!==null;){var e=fe;switch(e.tag){case 0:case 11:case 15:er(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ro(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,fe=i;else t:for(e=n;fe!==null;){i=fe;var r=i.sibling,a=i.return;if(qb(i),i===e){fe=null;break t}if(r!==null){r.return=a,fe=r;break t}fe=a}}}var Gx={getCacheForType:function(n){var t=be(Jt),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e},cacheSignal:function(){return be(Jt).controller.signal}},Yx=typeof WeakMap=="function"?WeakMap:Map,vt=0,Tt=null,ht=null,dt=0,Et=0,Ze=null,Hi=!1,Ya=!1,jf=!1,Si=0,$t=0,nr=0,Tr=0,Gf=0,tn=0,ka=0,ks=null,Ue=null,Hd=!1,xc=0,aw=0,ec=1/0,nc=null,qi=null,ae=0,Ki=null,Pa=null,gi=0,jd=0,Gd=null,sw=null,Ps=0,Yd=null;function an(){return vt&2&&dt!==0?dt&-dt:K.T!==null?Vf():mv()}function ow(){if(tn===0)if(!(dt&536870912)||pt){var n=ol;ol<<=1,!(ol&3932160)&&(ol=262144),tn=n}else tn=536870912;return n=on.current,n!==null&&(n.flags|=32),tn}function ze(n,t,e){(n===Tt&&(Et===2||Et===9)||n.cancelPendingCommit!==null)&&(Fa(n,0),ji(n,dt,tn,!1)),eo(n,e),(!(vt&2)||n!==Tt)&&(n===Tt&&(!(vt&2)&&(Tr|=e),$t===4&&ji(n,dt,tn,!1)),qn(n))}function lw(n,t,e){if(vt&6)throw Error(k(327));var i=!e&&(t&127)===0&&(t&n.expiredLanes)===0||to(n,t),r=i?Xx(n,t):td(n,t,!0),a=i;do{if(r===0){Ya&&!i&&ji(n,t,0,!1);break}else{if(e=n.current.alternate,a&&!Vx(e)){r=td(n,t,!1),a=!1;continue}if(r===2){if(a=t,n.errorRecoveryDisabledLanes&a)var s=0;else s=n.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;t:{var o=n;r=ks;var l=o.current.memoizedState.isDehydrated;if(l&&(Fa(o,s).flags|=256),s=td(o,s,!1),s!==2){if(jf&&!l){o.errorRecoveryDisabledLanes|=a,Tr|=a,r=4;break t}a=Ue,Ue=r,a!==null&&(Ue===null?Ue=a:Ue.push.apply(Ue,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){Fa(n,0),ji(n,t,0,!0);break}t:{switch(i=n,a=r,a){case 0:case 1:throw Error(k(345));case 4:if((t&4194048)!==t)break;case 6:ji(i,t,tn,!Hi);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(k(329))}if((t&62914560)===t&&(r=xc+300-en(),10<r)){if(ji(i,t,tn,!Hi),fc(i,0,!0)!==0)break t;gi=t,i.timeoutHandle=Cw(T0.bind(null,i,e,Ue,nc,Hd,t,tn,Tr,ka,Hi,a,"Throttled",-0,0),r);break t}T0(i,e,Ue,nc,Hd,t,tn,Tr,ka,Hi,a,null,-0,0)}}break}while(!0);qn(n)}function T0(n,t,e,i,r,a,s,o,l,c,u,h,d,f){if(n.timeoutHandle=-1,h=t.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},ew(t,a,h);var y=(a&62914560)===a?xc-en():(a&4194048)===a?aw-en():0;if(y=R_(h,y),y!==null){gi=a,n.cancelPendingCommit=y(C0.bind(null,n,t,a,e,i,r,s,o,l,u,h,null,d,f)),ji(n,a,s,!c);return}}C0(n,t,a,e,i,r,s,o,l)}function Vx(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var i=0;i<e.length;i++){var r=e[i],a=r.getSnapshot;r=r.value;try{if(!sn(a(),r))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ji(n,t,e,i){t&=~Gf,t&=~Tr,n.suspendedLanes|=t,n.pingedLanes&=~t,i&&(n.warmLanes|=t),i=n.expirationTimes;for(var r=t;0<r;){var a=31-rn(r),s=1<<a;i[a]=-1,r&=~s}e!==0&&dv(n,e,t)}function _c(){return vt&6?!0:(oo(0,!1),!1)}function Yf(){if(ht!==null){if(Et===0)var n=ht.return;else n=ht,fi=Pr=null,Df(n),Ta=null,Ys=0,n=ht;for(;n!==null;)Hb(n.alternate,n),n=n.return;ht=null}}function Fa(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,c_(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),gi=0,Yf(),Tt=n,ht=e=pi(n.current,null),dt=t,Et=0,Ze=null,Hi=!1,Ya=to(n,t),jf=!1,ka=tn=Gf=Tr=nr=$t=0,Ue=ks=null,Hd=!1,t&8&&(t|=t&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=t;0<i;){var r=31-rn(i),a=1<<r;t|=n[r],i&=~a}return Si=t,yc(),e}function cw(n,t){st=null,K.H=$s,t===Ga||t===bc?(t=r0(),Et=3):t===Ef?(t=r0(),Et=4):Et=t===If?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ze=t,ht===null&&($t=1,Ql(n,xn(t,n.current)))}function uw(){var n=on.current;return n===null?!0:(dt&4194048)===dt?Tn===null:(dt&62914560)===dt||dt&536870912?n===Tn:!1}function hw(){var n=K.H;return K.H=$s,n===null?$s:n}function dw(){var n=K.A;return K.A=Gx,n}function ic(){$t=4,Hi||(dt&4194048)!==dt&&on.current!==null||(Ya=!0),!(nr&134217727)&&!(Tr&134217727)||Tt===null||ji(Tt,dt,tn,!1)}function td(n,t,e){var i=vt;vt|=2;var r=hw(),a=dw();(Tt!==n||dt!==t)&&(nc=null,Fa(n,t)),t=!1;var s=$t;t:do try{if(Et!==0&&ht!==null){var o=ht,l=Ze;switch(Et){case 8:Yf(),s=6;break t;case 3:case 2:case 9:case 6:on.current===null&&(t=!0);var c=Et;if(Et=0,Ze=null,Sa(n,o,l,c),e&&Ya){s=0;break t}break;default:c=Et,Et=0,Ze=null,Sa(n,o,l,c)}}$x(),s=$t;break}catch(u){cw(n,u)}while(!0);return t&&n.shellSuspendCounter++,fi=Pr=null,vt=i,K.H=r,K.A=a,ht===null&&(Tt=null,dt=0,yc()),s}function $x(){for(;ht!==null;)fw(ht)}function Xx(n,t){var e=vt;vt|=2;var i=hw(),r=dw();Tt!==n||dt!==t?(nc=null,ec=en()+500,Fa(n,t)):Ya=to(n,t);t:do try{if(Et!==0&&ht!==null){t=ht;var a=Ze;e:switch(Et){case 1:Et=0,Ze=null,Sa(n,t,a,1);break;case 2:case 9:if(i0(a)){Et=0,Ze=null,R0(t);break}t=function(){Et!==2&&Et!==9||Tt!==n||(Et=7),qn(n)},a.then(t,t);break t;case 3:Et=7;break t;case 4:Et=5;break t;case 7:i0(a)?(Et=0,Ze=null,R0(t)):(Et=0,Ze=null,Sa(n,t,a,7));break;case 5:var s=null;switch(ht.tag){case 26:s=ht.memoizedState;case 5:case 27:var o=ht;if(s?Nw(s):o.stateNode.complete){Et=0,Ze=null;var l=o.sibling;if(l!==null)ht=l;else{var c=o.return;c!==null?(ht=c,Tc(c)):ht=null}break e}}Et=0,Ze=null,Sa(n,t,a,5);break;case 6:Et=0,Ze=null,Sa(n,t,a,6);break;case 8:Yf(),$t=6;break t;default:throw Error(k(462))}}qx();break}catch(u){cw(n,u)}while(!0);return fi=Pr=null,K.H=i,K.A=r,vt=e,ht!==null?0:(Tt=null,dt=0,yc(),$t)}function qx(){for(;ht!==null&&!yA();)fw(ht)}function fw(n){var t=zb(n.alternate,n,Si);n.memoizedProps=n.pendingProps,t===null?Tc(n):ht=t}function R0(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=w0(e,t,t.pendingProps,t.type,void 0,dt);break;case 11:t=w0(e,t,t.pendingProps,t.type.render,t.ref,dt);break;case 5:Df(t);default:Hb(e,t),t=ht=Hv(t,Si),t=zb(e,t,Si)}n.memoizedProps=n.pendingProps,t===null?Tc(n):ht=t}function Sa(n,t,e,i){fi=Pr=null,Df(t),Ta=null,Ys=0;var r=t.return;try{if(Px(n,r,t,e,dt)){$t=1,Ql(n,xn(e,n.current)),ht=null;return}}catch(a){if(r!==null)throw ht=r,a;$t=1,Ql(n,xn(e,n.current)),ht=null;return}t.flags&32768?(pt||i===1?n=!0:Ya||dt&536870912?n=!1:(Hi=n=!0,(i===2||i===9||i===3||i===6)&&(i=on.current,i!==null&&i.tag===13&&(i.flags|=16384))),pw(t,n)):Tc(t)}function Tc(n){var t=n;do{if(t.flags&32768){pw(t,Hi);return}n=t.return;var e=Ux(t.alternate,t,Si);if(e!==null){ht=e;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=n}while(t!==null);$t===0&&($t=5)}function pw(n,t){do{var e=zx(n.alternate,n);if(e!==null){e.flags&=32767,ht=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){ht=n;return}ht=n=e}while(n!==null);$t=6,ht=null}function C0(n,t,e,i,r,a,s,o,l){n.cancelPendingCommit=null;do Rc();while(ae!==0);if(vt&6)throw Error(k(327));if(t!==null){if(t===n.current)throw Error(k(177));if(a=t.lanes|t.childLanes,a|=mf,RA(n,e,a,s,o,l),n===Tt&&(ht=Tt=null,dt=0),Pa=t,Ki=n,gi=e,jd=a,Gd=r,sw=i,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,Qx(Hl,function(){return bw(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=K.T,K.T=null,r=bt.p,bt.p=2,s=vt,vt|=4;try{Hx(n,t,e)}finally{vt=s,bt.p=r,K.T=i}}ae=1,mw(),gw(),yw()}}function mw(){if(ae===1){ae=0;var n=Ki,t=Pa,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=K.T,K.T=null;var i=bt.p;bt.p=2;var r=vt;vt|=4;try{Qb(t,n);var a=qd,s=Nv(n.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Ov(o.ownerDocument.documentElement,o)){if(l!==null&&pf(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),y=o.textContent.length,g=Math.min(l.start,y),w=l.end===void 0?g:Math.min(l.end,y);!f.extend&&g>w&&(s=w,w=g,g=s);var p=Wy(o,g),m=Wy(o,w);if(p&&m&&(f.rangeCount!==1||f.anchorNode!==p.node||f.anchorOffset!==p.offset||f.focusNode!==m.node||f.focusOffset!==m.offset)){var b=h.createRange();b.setStart(p.node,p.offset),f.removeAllRanges(),g>w?(f.addRange(b),f.extend(m.node,m.offset)):(b.setEnd(m.node,m.offset),f.addRange(b))}}}}for(h=[],f=o;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var E=h[o];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}hc=!!Xd,qd=Xd=null}finally{vt=r,bt.p=i,K.T=e}}n.current=t,ae=2}}function gw(){if(ae===2){ae=0;var n=Ki,t=Pa,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=K.T,K.T=null;var i=bt.p;bt.p=2;var r=vt;vt|=4;try{Xb(n,t.alternate,t)}finally{vt=r,bt.p=i,K.T=e}}ae=3}}function yw(){if(ae===4||ae===3){ae=0,vA();var n=Ki,t=Pa,e=gi,i=sw;t.subtreeFlags&10256||t.flags&10256?ae=5:(ae=0,Pa=Ki=null,vw(n,n.pendingLanes));var r=n.pendingLanes;if(r===0&&(qi=null),of(e),t=t.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Js,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=K.T,r=bt.p,bt.p=2,K.T=null;try{for(var a=n.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{K.T=t,bt.p=r}}gi&3&&Rc(),qn(n),r=n.pendingLanes,e&261930&&r&42?n===Yd?Ps++:(Ps=0,Yd=n):Ps=0,oo(0,!1)}}function vw(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,ro(t)))}function Rc(){return mw(),gw(),yw(),bw()}function bw(){if(ae!==5)return!1;var n=Ki,t=jd;jd=0;var e=of(gi),i=K.T,r=bt.p;try{bt.p=32>e?32:e,K.T=null,e=Gd,Gd=null;var a=Ki,s=gi;if(ae=0,Pa=Ki=null,gi=0,vt&6)throw Error(k(331));var o=vt;if(vt|=4,iw(a.current),tw(a,a.current,s,e),vt=o,oo(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Js,a)}catch{}return!0}finally{bt.p=r,K.T=i,vw(n,t)}}function D0(n,t,e){t=xn(e,t),t=Fd(n.stateNode,t,2),n=Xi(n,t,2),n!==null&&(eo(n,2),qn(n))}function At(n,t,e){if(n.tag===3)D0(n,n,e);else for(;t!==null;){if(t.tag===3){D0(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qi===null||!qi.has(i))){n=xn(e,n),e=Bb(2),i=Xi(t,e,2),i!==null&&(kb(e,i,t,n),eo(i,2),qn(i));break}}t=t.return}}function ed(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new Yx;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(e)||(jf=!0,r.add(e),n=Kx.bind(null,n,t,e),t.then(n,n))}function Kx(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,Tt===n&&(dt&e)===e&&($t===4||$t===3&&(dt&62914560)===dt&&300>en()-xc?!(vt&2)&&Fa(n,0):Gf|=e,ka===dt&&(ka=0)),qn(n)}function ww(n,t){t===0&&(t=hv()),n=kr(n,t),n!==null&&(eo(n,t),qn(n))}function Wx(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),ww(n,e)}function Zx(n,t){var e=0;switch(n.tag){case 31:case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(e=r.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(k(314))}i!==null&&i.delete(t),ww(n,e)}function Qx(n,t){return af(n,t)}var rc=null,ca=null,Vd=!1,ac=!1,nd=!1,Gi=0;function qn(n){n!==ca&&n.next===null&&(ca===null?rc=ca=n:ca=ca.next=n),ac=!0,Vd||(Vd=!0,t_())}function oo(n,t){if(!nd&&ac){nd=!0;do for(var e=!1,i=rc;i!==null;){if(!t)if(n!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=(1<<31-rn(42|n)+1)-1,a&=r&~(s&~o),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(e=!0,M0(i,a))}else a=dt,a=fc(i,i===Tt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||to(i,a)||(e=!0,M0(i,a));i=i.next}while(e);nd=!1}}function Jx(){Sw()}function Sw(){ac=Vd=!1;var n=0;Gi!==0&&l_()&&(n=Gi);for(var t=en(),e=null,i=rc;i!==null;){var r=i.next,a=Ew(i,t);a===0?(i.next=null,e===null?rc=r:e.next=r,r===null&&(ca=e)):(e=i,(n!==0||a&3)&&(ac=!0)),i=r}ae!==0&&ae!==5||oo(n,!1),Gi!==0&&(Gi=0)}function Ew(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,a=n.pendingLanes&-62914561;0<a;){var s=31-rn(a),o=1<<s,l=r[s];l===-1?(!(o&e)||o&i)&&(r[s]=TA(o,t)):l<=t&&(n.expiredLanes|=o),a&=~o}if(t=Tt,e=dt,e=fc(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&&(Et===2||Et===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&Lh(i),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||to(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(i!==null&&Lh(i),of(e)){case 2:case 8:e=cv;break;case 32:e=Hl;break;case 268435456:e=uv;break;default:e=Hl}return i=Aw.bind(null,n),e=af(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&&i!==null&&Lh(i),n.callbackPriority=2,n.callbackNode=null,2}function Aw(n,t){if(ae!==0&&ae!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(Rc()&&n.callbackNode!==e)return null;var i=dt;return i=fc(n,n===Tt?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(lw(n,i,t),Ew(n,en()),n.callbackNode!=null&&n.callbackNode===e?Aw.bind(null,n):null)}function M0(n,t){if(Rc())return null;lw(n,t,!0)}function t_(){u_(function(){vt&6?af(lv,Jx):Sw()})}function Vf(){if(Gi===0){var n=Oa;n===0&&(n=sl,sl<<=1,!(sl&261888)&&(sl=256)),Gi=n}return Gi}function L0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xl(""+n)}function O0(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function e_(n,t,e,i,r){if(t==="submit"&&e&&e.stateNode===r){var a=L0((r[He]||null).action),s=i.submitter;s&&(t=(t=s[He]||null)?L0(t.formAction):s.getAttribute("formAction"),t!==null&&(a=t,s=null));var o=new pc("action","action",null,i,r);n.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Gi!==0){var l=s?O0(r,s):new FormData(r);kd(e,{pending:!0,data:l,method:r.method,action:a},null,l)}}else typeof a=="function"&&(o.preventDefault(),l=s?O0(r,s):new FormData(r),kd(e,{pending:!0,data:l,method:r.method,action:a},a,l))},currentTarget:r}]})}}for(vl=0;vl<Ad.length;vl++)bl=Ad[vl],N0=bl.toLowerCase(),B0=bl[0].toUpperCase()+bl.slice(1),Fn(N0,"on"+B0);var bl,N0,B0,vl;Fn(kv,"onAnimationEnd");Fn(Pv,"onAnimationIteration");Fn(Fv,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(bx,"onTransitionRun");Fn(wx,"onTransitionStart");Fn(Sx,"onTransitionCancel");Fn(Iv,"onTransitionEnd");Ma("onMouseEnter",["mouseout","mouseover"]);Ma("onMouseLeave",["mouseout","mouseover"]);Ma("onPointerEnter",["pointerout","pointerover"]);Ma("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xs));function xw(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],r=i.event;i=i.listeners;t:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break t;a=o,r.currentTarget=c;try{a(r)}catch(u){Gl(u)}r.currentTarget=null,a=l}else for(s=0;s<i.length;s++){if(o=i[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break t;a=o,r.currentTarget=c;try{a(r)}catch(u){Gl(u)}r.currentTarget=null,a=l}}}}function ut(n,t){var e=t[md];e===void 0&&(e=t[md]=new Set);var i=n+"__bubble";e.has(i)||(_w(t,n,2,!1),e.add(i))}function id(n,t,e){var i=0;t&&(i|=4),_w(e,n,i,t)}var wl="_reactListening"+Math.random().toString(36).slice(2);function $f(n){if(!n[wl]){n[wl]=!0,gv.forEach(function(e){e!=="selectionchange"&&(n_.has(e)||id(e,!1,n),id(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[wl]||(t[wl]=!0,id("selectionchange",!1,t))}}function _w(n,t,e,i){switch(Iw(t)){case 2:var r=M_;break;case 8:r=L_;break;default:r=Wf}e=r.bind(null,t,e,n),r=void 0,!wd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(t,e,{capture:!0,passive:r}):n.addEventListener(t,e,!0):r!==void 0?n.addEventListener(t,e,{passive:r}):n.addEventListener(t,e,!1)}function rd(n,t,e,i,r){var a=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;o!==null;){if(s=da(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=a=s;continue t}o=o.parentNode}}i=i.return}xv(function(){var c=a,u=uf(e),h=[];t:{var d=Uv.get(n);if(d!==void 0){var f=pc,y=n;switch(n){case"keypress":if(Tl(e)===0)break t;case"keydown":case"keyup":f=ZA;break;case"focusin":y="focus",f=Ph;break;case"focusout":y="blur",f=Ph;break;case"beforeblur":case"afterblur":f=Ph;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=tx;break;case kv:case Pv:case Fv:f=jA;break;case Iv:f=nx;break;case"scroll":case"scrollend":f=FA;break;case"wheel":f=rx;break;case"copy":case"cut":case"paste":f=YA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Gy;break;case"toggle":case"beforetoggle":f=sx}var g=(t&4)!==0,w=!g&&(n==="scroll"||n==="scrollend"),p=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,b;m!==null;){var E=m;if(b=E.stateNode,E=E.tag,E!==5&&E!==26&&E!==27||b===null||p===null||(E=Us(m,p),E!=null&&g.push(qs(m,E,b))),w)break;m=m.return}0<g.length&&(d=new f(d,y,null,e,u),h.push({event:d,listeners:g}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&e!==bd&&(y=e.relatedTarget||e.fromElement)&&(da(y)||y[za]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(y=e.relatedTarget||e.toElement,f=c,y=y?da(y):null,y!==null&&(w=Qs(y),g=y.tag,y!==w||g!==5&&g!==27&&g!==6)&&(y=null)):(f=null,y=c),f!==y)){if(g=Hy,E="onMouseLeave",p="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(g=Gy,E="onPointerLeave",p="onPointerEnter",m="pointer"),w=f==null?d:Es(f),b=y==null?d:Es(y),d=new g(E,m+"leave",f,e,u),d.target=w,d.relatedTarget=b,E=null,da(u)===c&&(g=new g(p,m+"enter",y,e,u),g.target=b,g.relatedTarget=w,E=g),w=E,f&&y)e:{for(g=i_,p=f,m=y,b=0,E=p;E;E=g(E))b++;E=0;for(var A=m;A;A=g(A))E++;for(;0<b-E;)p=g(p),b--;for(;0<E-b;)m=g(m),E--;for(;b--;){if(p===m||m!==null&&p===m.alternate){g=p;break e}p=g(p),m=g(m)}g=null}else g=null;f!==null&&k0(h,d,f,g,!1),y!==null&&w!==null&&k0(h,w,y,g,!0)}}t:{if(d=c?Es(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=Xy;else if($y(d))if(Mv)T=gx;else{T=px;var x=fx}else f=d.nodeName,!f||f.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&cf(c.elementType)&&(T=Xy):T=mx;if(T&&(T=T(n,c))){Dv(h,T,e,u);break t}x&&x(n,d,c),n==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&vd(d,"number",d.value)}switch(x=c?Es(c):window,n){case"focusin":($y(x)||x.contentEditable==="true")&&(ma=x,Sd=c,Rs=null);break;case"focusout":Rs=Sd=ma=null;break;case"mousedown":Ed=!0;break;case"contextmenu":case"mouseup":case"dragend":Ed=!1,Zy(h,e,u);break;case"selectionchange":if(vx)break;case"keydown":case"keyup":Zy(h,e,u)}var D;if(ff)t:{switch(n){case"compositionstart":var R="onCompositionStart";break t;case"compositionend":R="onCompositionEnd";break t;case"compositionupdate":R="onCompositionUpdate";break t}R=void 0}else pa?Rv(n,e)&&(R="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(R="onCompositionStart");R&&(Tv&&e.locale!=="ko"&&(pa||R!=="onCompositionStart"?R==="onCompositionEnd"&&pa&&(D=_v()):(zi=u,hf="value"in zi?zi.value:zi.textContent,pa=!0)),x=sc(c,R),0<x.length&&(R=new jy(R,n,null,e,u),h.push({event:R,listeners:x}),D?R.data=D:(D=Cv(e),D!==null&&(R.data=D)))),(D=lx?cx(n,e):ux(n,e))&&(R=sc(c,"onBeforeInput"),0<R.length&&(x=new jy("onBeforeInput","beforeinput",null,e,u),h.push({event:x,listeners:R}),x.data=D)),e_(h,n,c,e,u)}xw(h,t)})}function qs(n,t,e){return{instance:n,listener:t,currentTarget:e}}function sc(n,t){for(var e=t+"Capture",i=[];n!==null;){var r=n,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=Us(n,e),r!=null&&i.unshift(qs(n,r,a)),r=Us(n,t),r!=null&&i.push(qs(n,r,a))),n.tag===3)return i;n=n.return}return[]}function i_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function k0(n,t,e,i,r){for(var a=t._reactName,s=[];e!==null&&e!==i;){var o=e,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=Us(e,a),c!=null&&s.unshift(qs(e,c,l))):r||(c=Us(e,a),c!=null&&s.push(qs(e,c,l)))),e=e.return}s.length!==0&&n.push({event:t,listeners:s})}var r_=/\r\n?/g,a_=/\u0000|\uFFFD/g;function P0(n){return(typeof n=="string"?n:""+n).replace(r_,`
`).replace(a_,"")}function Tw(n,t){return t=P0(t),P0(n)===t}function xt(n,t,e,i,r,a){switch(e){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||La(n,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&La(n,""+i);break;case"className":cl(n,"class",i);break;case"tabIndex":cl(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":cl(n,e,i);break;case"style":Av(n,i,a);break;case"data":if(t!=="object"){cl(n,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=xl(""+i),n.setAttribute(e,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&xt(n,t,"name",r.name,r,null),xt(n,t,"formEncType",r.formEncType,r,null),xt(n,t,"formMethod",r.formMethod,r,null),xt(n,t,"formTarget",r.formTarget,r,null)):(xt(n,t,"encType",r.encType,r,null),xt(n,t,"method",r.method,r,null),xt(n,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=xl(""+i),n.setAttribute(e,i);break;case"onClick":i!=null&&(n.onclick=di);break;case"onScroll":i!=null&&ut("scroll",n);break;case"onScrollEnd":i!=null&&ut("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(e=i.__html,e!=null){if(r.children!=null)throw Error(k(60));n.innerHTML=e}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}e=xl(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""+i):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":i===!0?n.setAttribute(e,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,i):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(e,i):n.removeAttribute(e);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case"popover":ut("beforetoggle",n),ut("toggle",n),Al(n,"popover",i);break;case"xlinkActuate":ri(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ri(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ri(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ri(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ri(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ri(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ri(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ri(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ri(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Al(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=kA.get(e)||e,Al(n,e,i))}}function $d(n,t,e,i,r,a){switch(e){case"style":Av(n,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(e=i.__html,e!=null){if(r.children!=null)throw Error(k(60));n.innerHTML=e}}break;case"children":typeof i=="string"?La(n,i):(typeof i=="number"||typeof i=="bigint")&&La(n,""+i);break;case"onScroll":i!=null&&ut("scroll",n);break;case"onScrollEnd":i!=null&&ut("scrollend",n);break;case"onClick":i!=null&&(n.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yv.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(r=e.endsWith("Capture"),t=e.slice(2,r?e.length-7:void 0),a=n[He]||null,a=a!=null?a[e]:null,typeof a=="function"&&n.removeEventListener(t,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,i,r);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,""):Al(n,e,i)}}}function we(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",n),ut("load",n);var i=!1,r=!1,a;for(a in e)if(e.hasOwnProperty(a)){var s=e[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:xt(n,t,a,s,e,null)}}r&&xt(n,t,"srcSet",e.srcSet,e,null),i&&xt(n,t,"src",e.src,e,null);return;case"input":ut("invalid",n);var o=a=s=r=null,l=null,c=null;for(i in e)if(e.hasOwnProperty(i)){var u=e[i];if(u!=null)switch(i){case"name":r=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(k(137,t));break;default:xt(n,t,i,u,e,null)}}wv(n,a,o,l,c,s,r,!1);return;case"select":ut("invalid",n),i=s=a=null;for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],o!=null))switch(r){case"value":a=o;break;case"defaultValue":s=o;break;case"multiple":i=o;default:xt(n,t,r,o,e,null)}t=a,e=s,n.multiple=!!i,t!=null?Aa(n,!!i,t,!1):e!=null&&Aa(n,!!i,e,!0);return;case"textarea":ut("invalid",n),a=r=i=null;for(s in e)if(e.hasOwnProperty(s)&&(o=e[s],o!=null))switch(s){case"value":i=o;break;case"defaultValue":r=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(k(91));break;default:xt(n,t,s,o,e,null)}Ev(n,i,r,a);return;case"option":for(l in e)if(e.hasOwnProperty(l)&&(i=e[l],i!=null))switch(l){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:xt(n,t,l,i,e,null)}return;case"dialog":ut("beforetoggle",n),ut("toggle",n),ut("cancel",n),ut("close",n);break;case"iframe":case"object":ut("load",n);break;case"video":case"audio":for(i=0;i<Xs.length;i++)ut(Xs[i],n);break;case"image":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"embed":case"source":case"link":ut("error",n),ut("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in e)if(e.hasOwnProperty(c)&&(i=e[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:xt(n,t,c,i,e,null)}return;default:if(cf(t)){for(u in e)e.hasOwnProperty(u)&&(i=e[u],i!==void 0&&$d(n,t,u,i,e,void 0));return}}for(o in e)e.hasOwnProperty(o)&&(i=e[o],i!=null&&xt(n,t,o,i,e,null))}function s_(n,t,e,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,o=null,l=null,c=null,u=null;for(f in e){var h=e[f];if(e.hasOwnProperty(f)&&h!=null)switch(f){case"checked":break;case"value":break;case"defaultValue":l=h;default:i.hasOwnProperty(f)||xt(n,t,f,null,i,h)}}for(var d in i){var f=i[d];if(h=e[d],i.hasOwnProperty(d)&&(f!=null||h!=null))switch(d){case"type":a=f;break;case"name":r=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":s=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(k(137,t));break;default:f!==h&&xt(n,t,d,f,i,h)}}yd(n,s,o,l,c,u,a,r);return;case"select":f=s=o=d=null;for(a in e)if(l=e[a],e.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":f=l;default:i.hasOwnProperty(a)||xt(n,t,a,null,i,l)}for(r in i)if(a=i[r],l=e[r],i.hasOwnProperty(r)&&(a!=null||l!=null))switch(r){case"value":d=a;break;case"defaultValue":o=a;break;case"multiple":s=a;default:a!==l&&xt(n,t,r,a,i,l)}t=o,e=s,i=f,d!=null?Aa(n,!!e,d,!1):!!i!=!!e&&(t!=null?Aa(n,!!e,t,!0):Aa(n,!!e,e?[]:"",!1));return;case"textarea":f=d=null;for(o in e)if(r=e[o],e.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:xt(n,t,o,null,i,r)}for(s in i)if(r=i[s],a=e[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":d=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(k(91));break;default:r!==a&&xt(n,t,s,r,i,a)}Sv(n,d,f);return;case"option":for(var y in e)if(d=e[y],e.hasOwnProperty(y)&&d!=null&&!i.hasOwnProperty(y))switch(y){case"selected":n.selected=!1;break;default:xt(n,t,y,null,i,d)}for(l in i)if(d=i[l],f=e[l],i.hasOwnProperty(l)&&d!==f&&(d!=null||f!=null))switch(l){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:xt(n,t,l,d,i,f)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in e)d=e[g],e.hasOwnProperty(g)&&d!=null&&!i.hasOwnProperty(g)&&xt(n,t,g,null,i,d);for(c in i)if(d=i[c],f=e[c],i.hasOwnProperty(c)&&d!==f&&(d!=null||f!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(k(137,t));break;default:xt(n,t,c,d,i,f)}return;default:if(cf(t)){for(var w in e)d=e[w],e.hasOwnProperty(w)&&d!==void 0&&!i.hasOwnProperty(w)&&$d(n,t,w,void 0,i,d);for(u in i)d=i[u],f=e[u],!i.hasOwnProperty(u)||d===f||d===void 0&&f===void 0||$d(n,t,u,d,i,f);return}}for(var p in e)d=e[p],e.hasOwnProperty(p)&&d!=null&&!i.hasOwnProperty(p)&&xt(n,t,p,null,i,d);for(h in i)d=i[h],f=e[h],!i.hasOwnProperty(h)||d===f||d==null&&f==null||xt(n,t,h,d,i,f)}function F0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,t=0,e=performance.getEntriesByType("resource"),i=0;i<e.length;i++){var r=e[i],a=r.transferSize,s=r.initiatorType,o=r.duration;if(a&&o&&F0(s)){for(s=0,o=r.responseEnd,i+=1;i<e.length;i++){var l=e[i],c=l.startTime;if(c>o)break;var u=l.transferSize,h=l.initiatorType;u&&F0(h)&&(l=l.responseEnd,s+=u*(l<o?1:(o-c)/(l-c)))}if(--i,t+=8*(a+s)/(r.duration/1e3),n++,10<n)break}}if(0<n)return t/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xd=null,qd=null;function oc(n){return n.nodeType===9?n:n.ownerDocument}function I0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rw(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function Kd(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=null;function l_(){var n=window.event;return n&&n.type==="popstate"?n===ad?!1:(ad=n,!0):(ad=null,!1)}var Cw=typeof setTimeout=="function"?setTimeout:void 0,c_=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,u_=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(n){return U0.resolve(null).then(n).catch(h_)}:Cw;function h_(n){setTimeout(function(){throw n})}function rr(n){return n==="head"}function z0(n,t){var e=t,i=0;do{var r=e.nextSibling;if(n.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"||e==="/&"){if(i===0){n.removeChild(r),Ua(t);return}i--}else if(e==="$"||e==="$?"||e==="$~"||e==="$!"||e==="&")i++;else if(e==="html")Fs(n.ownerDocument.documentElement);else if(e==="head"){e=n.ownerDocument.head,Fs(e);for(var a=e.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[no]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&a.rel.toLowerCase()==="stylesheet"||e.removeChild(a),a=s}}else e==="body"&&Fs(n.ownerDocument.body);e=r}while(e);Ua(t)}function H0(n,t){var e=n;n=0;do{var i=e.nextSibling;if(e.nodeType===1?t?(e._stashedDisplay=e.style.display,e.style.display="none"):(e.style.display=e._stashedDisplay||"",e.getAttribute("style")===""&&e.removeAttribute("style")):e.nodeType===3&&(t?(e._stashedText=e.nodeValue,e.nodeValue=""):e.nodeValue=e._stashedText||""),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0)break;n--}else e!=="$"&&e!=="$?"&&e!=="$~"&&e!=="$!"||n++;e=i}while(e)}function Wd(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":Wd(e),lf(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function d_(n,t,e,i){for(;n.nodeType===1;){var r=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[no])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(a=n.getAttribute("rel"),a==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(a!==r.rel||n.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||n.getAttribute("title")!==(r.title==null?null:r.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(a=n.getAttribute("src"),(a!==(r.src==null?null:r.src)||n.getAttribute("type")!==(r.type==null?null:r.type)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&n.getAttribute("name")===a)return n}else return n;if(n=Rn(n.nextSibling),n===null)break}return null}function f_(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=Rn(n.nextSibling),n===null))return null;return n}function Dw(n,t){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!t||(n=Rn(n.nextSibling),n===null))return null;return n}function Zd(n){return n.data==="$?"||n.data==="$~"}function Qd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function p_(n,t){var e=n.ownerDocument;if(n.data==="$~")n._reactRetry=t;else if(n.data!=="$?"||e.readyState!=="loading")t();else{var i=function(){t(),e.removeEventListener("DOMContentLoaded",i)};e.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function Rn(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return n}var Jd=null;function j0(n){n=n.nextSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"||e==="/&"){if(t===0)return Rn(n.nextSibling);t--}else e!=="$"&&e!=="$!"&&e!=="$?"&&e!=="$~"&&e!=="&"||t++}n=n.nextSibling}return null}function G0(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"){if(t===0)return n;t--}else e!=="/$"&&e!=="/&"||t++}n=n.previousSibling}return null}function Mw(n,t,e){switch(t=oc(e),n){case"html":if(n=t.documentElement,!n)throw Error(k(452));return n;case"head":if(n=t.head,!n)throw Error(k(453));return n;case"body":if(n=t.body,!n)throw Error(k(454));return n;default:throw Error(k(451))}}function Fs(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);lf(n)}var Cn=new Map,Y0=new Set;function lc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ei=bt.d;bt.d={f:m_,r:g_,D:y_,C:v_,L:b_,m:w_,X:E_,S:S_,M:A_};function m_(){var n=Ei.f(),t=_c();return n||t}function g_(n){var t=Ha(n);t!==null&&t.tag===5&&t.type==="form"?Ab(t):Ei.r(n)}var Va=typeof document>"u"?null:document;function Lw(n,t,e){var i=Va;if(i&&typeof t=="string"&&t){var r=An(t);r='link[rel="'+n+'"][href="'+r+'"]',typeof e=="string"&&(r+='[crossorigin="'+e+'"]'),Y0.has(r)||(Y0.add(r),n={rel:n,crossOrigin:e,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),we(t,"link",n),pe(t),i.head.appendChild(t)))}}function y_(n){Ei.D(n),Lw("dns-prefetch",n,null)}function v_(n,t){Ei.C(n,t),Lw("preconnect",n,t)}function b_(n,t,e){Ei.L(n,t,e);var i=Va;if(i&&n&&t){var r='link[rel="preload"][as="'+An(t)+'"]';t==="image"&&e&&e.imageSrcSet?(r+='[imagesrcset="'+An(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(r+='[imagesizes="'+An(e.imageSizes)+'"]')):r+='[href="'+An(n)+'"]';var a=r;switch(t){case"style":a=Ia(n);break;case"script":a=$a(n)}Cn.has(a)||(n=kt({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),Cn.set(a,n),i.querySelector(r)!==null||t==="style"&&i.querySelector(lo(a))||t==="script"&&i.querySelector(co(a))||(t=i.createElement("link"),we(t,"link",n),pe(t),i.head.appendChild(t)))}}function w_(n,t){Ei.m(n,t);var e=Va;if(e&&n){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+An(i)+'"][href="'+An(n)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=$a(n)}if(!Cn.has(a)&&(n=kt({rel:"modulepreload",href:n},t),Cn.set(a,n),e.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(co(a)))return}i=e.createElement("link"),we(i,"link",n),pe(i),e.head.appendChild(i)}}}function S_(n,t,e){Ei.S(n,t,e);var i=Va;if(i&&n){var r=Ea(i).hoistableStyles,a=Ia(n);t=t||"default";var s=r.get(a);if(!s){var o={loading:0,preload:null};if(s=i.querySelector(lo(a)))o.loading=5;else{n=kt({rel:"stylesheet",href:n,"data-precedence":t},e),(e=Cn.get(a))&&Xf(n,e);var l=s=i.createElement("link");pe(l),we(l,"link",n),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Bl(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:o},r.set(a,s)}}}function E_(n,t){Ei.X(n,t);var e=Va;if(e&&n){var i=Ea(e).hoistableScripts,r=$a(n),a=i.get(r);a||(a=e.querySelector(co(r)),a||(n=kt({src:n,async:!0},t),(t=Cn.get(r))&&qf(n,t),a=e.createElement("script"),pe(a),we(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function A_(n,t){Ei.M(n,t);var e=Va;if(e&&n){var i=Ea(e).hoistableScripts,r=$a(n),a=i.get(r);a||(a=e.querySelector(co(r)),a||(n=kt({src:n,async:!0,type:"module"},t),(t=Cn.get(r))&&qf(n,t),a=e.createElement("script"),pe(a),we(a,"link",n),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function V0(n,t,e,i){var r=(r=Yi.current)?lc(r):null;if(!r)throw Error(k(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=Ia(e.href),e=Ea(r).hoistableStyles,i=e.get(t),i||(i={type:"style",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=Ia(e.href);var a=Ea(r).hoistableStyles,s=a.get(n);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(n,s),(a=r.querySelector(lo(n)))&&!a._p&&(s.instance=a,s.state.loading=5),Cn.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},Cn.set(n,e),a||x_(r,n,e,s.state))),t&&i===null)throw Error(k(528,""));return s}if(t&&i!==null)throw Error(k(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$a(e),e=Ea(r).hoistableScripts,i=e.get(t),i||(i={type:"script",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,n))}}function Ia(n){return'href="'+An(n)+'"'}function lo(n){return'link[rel="stylesheet"]['+n+"]"}function Ow(n){return kt({},n,{"data-precedence":n.precedence,precedence:null})}function x_(n,t,e,i){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=n.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),we(t,"link",e),pe(t),n.head.appendChild(t))}function $a(n){return'[src="'+An(n)+'"]'}function co(n){return"script[async]"+n}function $0(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var i=n.querySelector('style[data-href~="'+An(e.href)+'"]');if(i)return t.instance=i,pe(i),i;var r=kt({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),pe(i),we(i,"style",r),Bl(i,e.precedence,n),t.instance=i;case"stylesheet":r=Ia(e.href);var a=n.querySelector(lo(r));if(a)return t.state.loading|=4,t.instance=a,pe(a),a;i=Ow(e),(r=Cn.get(r))&&Xf(i,r),a=(n.ownerDocument||n).createElement("link"),pe(a);var s=a;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),we(a,"link",i),t.state.loading|=4,Bl(a,e.precedence,n),t.instance=a;case"script":return a=$a(e.src),(r=n.querySelector(co(a)))?(t.instance=r,pe(r),r):(i=e,(r=Cn.get(a))&&(i=kt({},e),qf(i,r)),n=n.ownerDocument||n,r=n.createElement("script"),pe(r),we(r,"link",i),n.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(k(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Bl(i,e.precedence,n));return t.instance}function Bl(n,t,e){for(var i=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var o=i[s];if(o.dataset.precedence===t)a=o;else if(a!==r)break}a?a.parentNode.insertBefore(n,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function Xf(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function qf(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var kl=null;function X0(n,t,e){if(kl===null){var i=new Map,r=kl=new Map;r.set(e,i)}else r=kl,i=r.get(e),i||(i=new Map,r.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),r=0;r<e.length;r++){var a=e[r];if(!(a[no]||a[ye]||n==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(t)||"";s=n+s;var o=i.get(s);o?o.push(a):i.set(s,[a])}}return i}function q0(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function __(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Nw(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}function T_(n,t,e,i){if(e.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Ia(i.href),a=t.querySelector(lo(r));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(n.count++,n=cc.bind(n),t.then(n,n)),e.state.loading|=4,e.instance=a,pe(a);return}a=t.ownerDocument||t,i=Ow(i),(r=Cn.get(r))&&Xf(i,r),a=a.createElement("link"),pe(a);var s=a;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),we(a,"link",i),e.instance=a}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(n.count++,e=cc.bind(n),t.addEventListener("load",e),t.addEventListener("error",e))}}var sd=0;function R_(n,t){return n.stylesheets&&n.count===0&&Pl(n,n.stylesheets),0<n.count||0<n.imgCount?function(e){var i=setTimeout(function(){if(n.stylesheets&&Pl(n,n.stylesheets),n.unsuspend){var a=n.unsuspend;n.unsuspend=null,a()}},6e4+t);0<n.imgBytes&&sd===0&&(sd=62500*o_());var r=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Pl(n,n.stylesheets),n.unsuspend)){var a=n.unsuspend;n.unsuspend=null,a()}},(n.imgBytes>sd?50:800)+t);return n.unsuspend=e,function(){n.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var uc=null;function Pl(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,uc=new Map,t.forEach(C_,n),uc=null,cc.call(n))}function C_(n,t){if(!(t.state.loading&4)){var e=uc.get(n);if(e)var i=e.get(null);else{e=new Map,uc.set(n,e);for(var r=n.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(e.set(s.dataset.precedence,s),i=s)}i&&e.set(null,i)}r=t.instance,s=r.getAttribute("data-precedence"),a=e.get(s)||i,a===i&&e.set(null,r),e.set(s,r),this.count++,i=cc.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(r,n.firstChild)),t.state.loading|=4}}var Ks={$$typeof:hi,Provider:null,Consumer:null,_currentValue:Er,_currentValue2:Er,_threadCount:0};function D_(n,t,e,i,r,a,s,o,l){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.hiddenUpdates=Oh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Bw(n,t,e,i,r,a,s,o,l,c,u,h){return n=new D_(n,t,e,s,l,c,u,h,o),t=1,a===!0&&(t|=24),a=Je(3,null,null,t),n.current=a,a.stateNode=n,t=wf(),t.refCount++,n.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:e,cache:t},Af(a),n}function kw(n){return n?(n=va,n):va}function Pw(n,t,e,i,r,a){r=kw(r),i.context===null?i.context=r:i.pendingContext=r,i=$i(t),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=Xi(n,i,t),e!==null&&(ze(e,n,t),Ds(e,n,t))}function K0(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function Kf(n,t){K0(n,t),(n=n.alternate)&&K0(n,t)}function Fw(n){if(n.tag===13||n.tag===31){var t=kr(n,67108864);t!==null&&ze(t,n,67108864),Kf(n,67108864)}}function W0(n){if(n.tag===13||n.tag===31){var t=an();t=sf(t);var e=kr(n,t);e!==null&&ze(e,n,t),Kf(n,t)}}var hc=!0;function M_(n,t,e,i){var r=K.T;K.T=null;var a=bt.p;try{bt.p=2,Wf(n,t,e,i)}finally{bt.p=a,K.T=r}}function L_(n,t,e,i){var r=K.T;K.T=null;var a=bt.p;try{bt.p=8,Wf(n,t,e,i)}finally{bt.p=a,K.T=r}}function Wf(n,t,e,i){if(hc){var r=tf(i);if(r===null)rd(n,t,i,dc,e),Z0(n,i);else if(N_(r,n,t,e,i))i.stopPropagation();else if(Z0(n,i),t&4&&-1<O_.indexOf(n)){for(;r!==null;){var a=Ha(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=br(a.pendingLanes);if(s!==0){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-rn(s);o.entanglements[1]|=l,s&=~l}qn(a),!(vt&6)&&(ec=en()+500,oo(0,!1))}}break;case 31:case 13:o=kr(a,2),o!==null&&ze(o,a,2),_c(),Kf(a,2)}if(a=tf(i),a===null&&rd(n,t,i,dc,e),a===r)break;r=a}r!==null&&i.stopPropagation()}else rd(n,t,i,null,e)}}function tf(n){return n=uf(n),Zf(n)}var dc=null;function Zf(n){if(dc=null,n=da(n),n!==null){var t=Qs(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=iv(t),n!==null)return n;n=null}else if(e===31){if(n=rv(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return dc=n,null}function Iw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bA()){case lv:return 2;case cv:return 8;case Hl:case wA:return 32;case uv:return 268435456;default:return 32}default:return 32}}var ef=!1,Wi=null,Zi=null,Qi=null,Ws=new Map,Zs=new Map,Ii=[],O_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z0(n,t){switch(n){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Ws.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function vs(n,t,e,i,r,a){return n===null||n.nativeEvent!==a?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},t!==null&&(t=Ha(t),t!==null&&Fw(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),n)}function N_(n,t,e,i,r){switch(t){case"focusin":return Wi=vs(Wi,n,t,e,i,r),!0;case"dragenter":return Zi=vs(Zi,n,t,e,i,r),!0;case"mouseover":return Qi=vs(Qi,n,t,e,i,r),!0;case"pointerover":var a=r.pointerId;return Ws.set(a,vs(Ws.get(a)||null,n,t,e,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Zs.set(a,vs(Zs.get(a)||null,n,t,e,i,r)),!0}return!1}function Uw(n){var t=da(n.target);if(t!==null){var e=Qs(t);if(e!==null){if(t=e.tag,t===13){if(t=iv(e),t!==null){n.blockedOn=t,By(n.priority,function(){W0(e)});return}}else if(t===31){if(t=rv(e),t!==null){n.blockedOn=t,By(n.priority,function(){W0(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fl(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=tf(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);bd=i,e.target.dispatchEvent(i),bd=null}else return t=Ha(e),t!==null&&Fw(t),n.blockedOn=e,!1;t.shift()}return!0}function Q0(n,t,e){Fl(n)&&e.delete(t)}function B_(){ef=!1,Wi!==null&&Fl(Wi)&&(Wi=null),Zi!==null&&Fl(Zi)&&(Zi=null),Qi!==null&&Fl(Qi)&&(Qi=null),Ws.forEach(Q0),Zs.forEach(Q0)}function Sl(n,t){n.blockedOn===t&&(n.blockedOn=null,ef||(ef=!0,se.unstable_scheduleCallback(se.unstable_NormalPriority,B_)))}var El=null;function J0(n){El!==n&&(El=n,se.unstable_scheduleCallback(se.unstable_NormalPriority,function(){El===n&&(El=null);for(var t=0;t<n.length;t+=3){var e=n[t],i=n[t+1],r=n[t+2];if(typeof i!="function"){if(Zf(i||e)===null)continue;break}var a=Ha(e);a!==null&&(n.splice(t,3),t-=3,kd(a,{pending:!0,data:r,method:e.method,action:i},i,r))}}))}function Ua(n){function t(l){return Sl(l,n)}Wi!==null&&Sl(Wi,n),Zi!==null&&Sl(Zi,n),Qi!==null&&Sl(Qi,n),Ws.forEach(t),Zs.forEach(t);for(var e=0;e<Ii.length;e++){var i=Ii[e];i.blockedOn===n&&(i.blockedOn=null)}for(;0<Ii.length&&(e=Ii[0],e.blockedOn===null);)Uw(e),e.blockedOn===null&&Ii.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i<e.length;i+=3){var r=e[i],a=e[i+1],s=r[He]||null;if(typeof a=="function")s||J0(e);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[He]||null)o=s.formAction;else if(Zf(r)!==null)continue}else o=s.action;typeof o=="function"?e[i+1]=o:(e.splice(i,3),i-=3),J0(e)}}}function zw(){function n(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),i||setTimeout(e,20)}function e(){if(!i&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(e,100),function(){i=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Qf(n){this._internalRoot=n}Cc.prototype.render=Qf.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(k(409));var e=t.current,i=an();Pw(e,i,n,t,null,null)};Cc.prototype.unmount=Qf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;Pw(n.current,2,null,n,null,null),_c(),t[za]=null}};function Cc(n){this._internalRoot=n}Cc.prototype.unstable_scheduleHydration=function(n){if(n){var t=mv();n={blockedOn:null,target:n,priority:t};for(var e=0;e<Ii.length&&t!==0&&t<Ii[e].priority;e++);Ii.splice(e,0,n),e===0&&Uw(n)}};var tv=ev.version;if(tv!=="19.2.0")throw Error(k(527,tv,"19.2.0"));bt.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(k(188)):(n=Object.keys(n).join(","),Error(k(268,n)));return n=dA(t),n=n!==null?av(n):null,n=n===null?null:n.stateNode,n};var k_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(bs=__REACT_DEVTOOLS_GLOBAL_HOOK__,!bs.isDisabled&&bs.supportsFiber))try{Js=bs.inject(k_),nn=bs}catch{}var bs;Dc.createRoot=function(n,t){if(!nv(n))throw Error(k(299));var e=!1,i="",r=Lb,a=Ob,s=Nb;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bw(n,1,!1,null,null,e,i,null,r,a,s,zw),n[za]=t.current,$f(n),new Qf(t)};Dc.hydrateRoot=function(n,t,e){if(!nv(n))throw Error(k(299));var i=!1,r="",a=Lb,s=Ob,o=Nb,l=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError),e.formState!==void 0&&(l=e.formState)),t=Bw(n,1,!0,t,e??null,i,r,l,a,s,o,zw),t.context=kw(null),e=t.current,i=an(),i=sf(i),r=$i(i),r.callback=null,Xi(e,r,i),e=i,t.current.lanes=e,eo(t,e),qn(t),n[za]=t.current,$f(n),new Cc(t)};Dc.version="19.2.0"});var Yw=xe((n2,Gw)=>{"use strict";B();function jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jw)}catch(n){console.error(n)}}jw(),Gw.exports=Hw()});var F1={};hE(F1,{readFile:()=>RR,readFileSync:()=>CR});function RR(){throw new Error("fs.readFile is not supported in browser")}function CR(){throw new Error("fs.readFileSync is not supported in browser")}var I1=Og(()=>{"use strict";B()});var U1=xe((kM,Gc)=>{B();var oe=function(n){"use strict";var t=1e7,e=7,i=9007199254740992,r=d(i),a="0123456789abcdefghijklmnopqrstuvwxyz",s=typeof BigInt=="function";function o(v,S,_,C){return typeof v>"u"?o[0]:typeof S<"u"?+S==10&&!_?Z(v):iE(v,S,_,C):Z(v)}function l(v,S){this.value=v,this.sign=S,this.isSmall=!1}l.prototype=Object.create(o.prototype);function c(v){this.value=v,this.sign=v<0,this.isSmall=!0}c.prototype=Object.create(o.prototype);function u(v){this.value=v}u.prototype=Object.create(o.prototype);function h(v){return-i<v&&v<i}function d(v){return v<1e7?[v]:v<1e14?[v%1e7,Math.floor(v/1e7)]:[v%1e7,Math.floor(v/1e7)%1e7,Math.floor(v/1e14)]}function f(v){y(v);var S=v.length;if(S<4&&ct(v,r)<0)switch(S){case 0:return 0;case 1:return v[0];case 2:return v[0]+v[1]*t;default:return v[0]+(v[1]+v[2]*t)*t}return v}function y(v){for(var S=v.length;v[--S]===0;);v.length=S+1}function g(v){for(var S=new Array(v),_=-1;++_<v;)S[_]=0;return S}function w(v){return v>0?Math.floor(v):Math.ceil(v)}function p(v,S){var _=v.length,C=S.length,O=new Array(_),M=0,I=t,P,U;for(U=0;U<C;U++)P=v[U]+S[U]+M,M=P>=I?1:0,O[U]=P-M*I;for(;U<_;)P=v[U]+M,M=P===I?1:0,O[U++]=P-M*I;return M>0&&O.push(M),O}function m(v,S){return v.length>=S.length?p(v,S):p(S,v)}function b(v,S){var _=v.length,C=new Array(_),O=t,M,I;for(I=0;I<_;I++)M=v[I]-O+S,S=Math.floor(M/O),C[I]=M-S*O,S+=1;for(;S>0;)C[I++]=S%O,S=Math.floor(S/O);return C}l.prototype.add=function(v){var S=Z(v);if(this.sign!==S.sign)return this.subtract(S.negate());var _=this.value,C=S.value;return S.isSmall?new l(b(_,Math.abs(C)),this.sign):new l(m(_,C),this.sign)},l.prototype.plus=l.prototype.add,c.prototype.add=function(v){var S=Z(v),_=this.value;if(_<0!==S.sign)return this.subtract(S.negate());var C=S.value;if(S.isSmall){if(h(_+C))return new c(_+C);C=d(Math.abs(C))}return new l(b(C,Math.abs(_)),_<0)},c.prototype.plus=c.prototype.add,u.prototype.add=function(v){return new u(this.value+Z(v).value)},u.prototype.plus=u.prototype.add;function E(v,S){var _=v.length,C=S.length,O=new Array(_),M=0,I=t,P,U;for(P=0;P<C;P++)U=v[P]-M-S[P],U<0?(U+=I,M=1):M=0,O[P]=U;for(P=C;P<_;P++){if(U=v[P]-M,U<0)U+=I;else{O[P++]=U;break}O[P]=U}for(;P<_;P++)O[P]=v[P];return y(O),O}function A(v,S,_){var C;return ct(v,S)>=0?C=E(v,S):(C=E(S,v),_=!_),C=f(C),typeof C=="number"?(_&&(C=-C),new c(C)):new l(C,_)}function T(v,S,_){var C=v.length,O=new Array(C),M=-S,I=t,P,U;for(P=0;P<C;P++)U=v[P]+M,M=Math.floor(U/I),U%=I,O[P]=U<0?U+I:U;return O=f(O),typeof O=="number"?(_&&(O=-O),new c(O)):new l(O,_)}l.prototype.subtract=function(v){var S=Z(v);if(this.sign!==S.sign)return this.add(S.negate());var _=this.value,C=S.value;return S.isSmall?T(_,Math.abs(C),this.sign):A(_,C,this.sign)},l.prototype.minus=l.prototype.subtract,c.prototype.subtract=function(v){var S=Z(v),_=this.value;if(_<0!==S.sign)return this.add(S.negate());var C=S.value;return S.isSmall?new c(_-C):T(C,Math.abs(_),_>=0)},c.prototype.minus=c.prototype.subtract,u.prototype.subtract=function(v){return new u(this.value-Z(v).value)},u.prototype.minus=u.prototype.subtract,l.prototype.negate=function(){return new l(this.value,!this.sign)},c.prototype.negate=function(){var v=this.sign,S=new c(-this.value);return S.sign=!v,S},u.prototype.negate=function(){return new u(-this.value)},l.prototype.abs=function(){return new l(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)};function x(v,S){var _=v.length,C=S.length,O=_+C,M=g(O),I=t,P,U,J,ft,at;for(J=0;J<_;++J){ft=v[J];for(var St=0;St<C;++St)at=S[St],P=ft*at+M[J+St],U=Math.floor(P/I),M[J+St]=P-U*I,M[J+St+1]+=U}return y(M),M}function D(v,S){var _=v.length,C=new Array(_),O=t,M=0,I,P;for(P=0;P<_;P++)I=v[P]*S+M,M=Math.floor(I/O),C[P]=I-M*O;for(;M>0;)C[P++]=M%O,M=Math.floor(M/O);return C}function R(v,S){for(var _=[];S-- >0;)_.push(0);return _.concat(v)}function L(v,S){var _=Math.max(v.length,S.length);if(_<=30)return x(v,S);_=Math.ceil(_/2);var C=v.slice(_),O=v.slice(0,_),M=S.slice(_),I=S.slice(0,_),P=L(O,I),U=L(C,M),J=L(m(O,C),m(I,M)),ft=m(m(P,R(E(E(J,P),U),_)),R(U,2*_));return y(ft),ft}function F(v,S){return-.012*v-.012*S+15e-6*v*S>0}l.prototype.multiply=function(v){var S=Z(v),_=this.value,C=S.value,O=this.sign!==S.sign,M;if(S.isSmall){if(C===0)return o[0];if(C===1)return this;if(C===-1)return this.negate();if(M=Math.abs(C),M<t)return new l(D(_,M),O);C=d(M)}return F(_.length,C.length)?new l(L(_,C),O):new l(x(_,C),O)},l.prototype.times=l.prototype.multiply;function G(v,S,_){return v<t?new l(D(S,v),_):new l(x(S,d(v)),_)}c.prototype._multiplyBySmall=function(v){return h(v.value*this.value)?new c(v.value*this.value):G(Math.abs(v.value),d(Math.abs(this.value)),this.sign!==v.sign)},l.prototype._multiplyBySmall=function(v){return v.value===0?o[0]:v.value===1?this:v.value===-1?this.negate():G(Math.abs(v.value),this.value,this.sign!==v.sign)},c.prototype.multiply=function(v){return Z(v)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,u.prototype.multiply=function(v){return new u(this.value*Z(v).value)},u.prototype.times=u.prototype.multiply;function q(v){var S=v.length,_=g(S+S),C=t,O,M,I,P,U;for(I=0;I<S;I++){P=v[I],M=0-P*P;for(var J=I;J<S;J++)U=v[J],O=2*(P*U)+_[I+J]+M,M=Math.floor(O/C),_[I+J]=O-M*C;_[I+S]=M}return y(_),_}l.prototype.square=function(){return new l(q(this.value),!1)},c.prototype.square=function(){var v=this.value*this.value;return h(v)?new c(v):new l(q(d(Math.abs(this.value))),!1)},u.prototype.square=function(v){return new u(this.value*this.value)};function Q(v,S){var _=v.length,C=S.length,O=t,M=g(S.length),I=S[C-1],P=Math.ceil(O/(2*I)),U=D(v,P),J=D(S,P),ft,at,St,We,Be,eh,nh;for(U.length<=_&&U.push(0),J.push(0),I=J[C-1],at=_-C;at>=0;at--){for(ft=O-1,U[at+C]!==I&&(ft=Math.floor((U[at+C]*O+U[at+C-1])/I)),St=0,We=0,eh=J.length,Be=0;Be<eh;Be++)St+=ft*J[Be],nh=Math.floor(St/O),We+=U[at+Be]-(St-nh*O),St=nh,We<0?(U[at+Be]=We+O,We=-1):(U[at+Be]=We,We=0);for(;We!==0;){for(ft-=1,St=0,Be=0;Be<eh;Be++)St+=U[at+Be]-O+J[Be],St<0?(U[at+Be]=St+O,St=0):(U[at+Be]=St,St=1);We+=St}M[at]=ft}return U=Y(U,P)[0],[f(M),f(U)]}function rt(v,S){for(var _=v.length,C=S.length,O=[],M=[],I=t,P,U,J,ft,at;_;){if(M.unshift(v[--_]),y(M),ct(M,S)<0){O.push(0);continue}U=M.length,J=M[U-1]*I+M[U-2],ft=S[C-1]*I+S[C-2],U>C&&(J=(J+1)*I),P=Math.ceil(J/ft);do{if(at=D(S,P),ct(at,M)<=0)break;P--}while(P);O.push(P),M=E(M,at)}return O.reverse(),[f(O),f(M)]}function Y(v,S){var _=v.length,C=g(_),O=t,M,I,P,U;for(P=0,M=_-1;M>=0;--M)U=P*O+v[M],I=w(U/S),P=U-I*S,C[M]=I|0;return[C,P|0]}function V(v,S){var _,C=Z(S);if(s)return[new u(v.value/C.value),new u(v.value%C.value)];var O=v.value,M=C.value,I;if(M===0)throw new Error("Cannot divide by zero");if(v.isSmall)return C.isSmall?[new c(w(O/M)),new c(O%M)]:[o[0],v];if(C.isSmall){if(M===1)return[v,o[0]];if(M==-1)return[v.negate(),o[0]];var P=Math.abs(M);if(P<t){_=Y(O,P),I=f(_[0]);var U=_[1];return v.sign&&(U=-U),typeof I=="number"?(v.sign!==C.sign&&(I=-I),[new c(I),new c(U)]):[new l(I,v.sign!==C.sign),new c(U)]}M=d(P)}var J=ct(O,M);if(J===-1)return[o[0],v];if(J===0)return[o[v.sign===C.sign?1:-1],o[0]];O.length+M.length<=200?_=Q(O,M):_=rt(O,M),I=_[0];var ft=v.sign!==C.sign,at=_[1],St=v.sign;return typeof I=="number"?(ft&&(I=-I),I=new c(I)):I=new l(I,ft),typeof at=="number"?(St&&(at=-at),at=new c(at)):at=new l(at,St),[I,at]}l.prototype.divmod=function(v){var S=V(this,v);return{quotient:S[0],remainder:S[1]}},u.prototype.divmod=c.prototype.divmod=l.prototype.divmod,l.prototype.divide=function(v){return V(this,v)[0]},u.prototype.over=u.prototype.divide=function(v){return new u(this.value/Z(v).value)},c.prototype.over=c.prototype.divide=l.prototype.over=l.prototype.divide,l.prototype.mod=function(v){return V(this,v)[1]},u.prototype.mod=u.prototype.remainder=function(v){return new u(this.value%Z(v).value)},c.prototype.remainder=c.prototype.mod=l.prototype.remainder=l.prototype.mod,l.prototype.pow=function(v){var S=Z(v),_=this.value,C=S.value,O,M,I;if(C===0)return o[1];if(_===0)return o[0];if(_===1)return o[1];if(_===-1)return S.isEven()?o[1]:o[-1];if(S.sign)return o[0];if(!S.isSmall)throw new Error("The exponent "+S.toString()+" is too large.");if(this.isSmall&&h(O=Math.pow(_,C)))return new c(w(O));for(M=this,I=o[1];C&!0&&(I=I.times(M),--C),C!==0;)C/=2,M=M.square();return I},c.prototype.pow=l.prototype.pow,u.prototype.pow=function(v){var S=Z(v),_=this.value,C=S.value,O=BigInt(0),M=BigInt(1),I=BigInt(2);if(C===O)return o[1];if(_===O)return o[0];if(_===M)return o[1];if(_===BigInt(-1))return S.isEven()?o[1]:o[-1];if(S.isNegative())return new u(O);for(var P=this,U=o[1];(C&M)===M&&(U=U.times(P),--C),C!==O;)C/=I,P=P.square();return U},l.prototype.modPow=function(v,S){if(v=Z(v),S=Z(S),S.isZero())throw new Error("Cannot take modPow with modulus 0");var _=o[1],C=this.mod(S);for(v.isNegative()&&(v=v.multiply(o[-1]),C=C.modInv(S));v.isPositive();){if(C.isZero())return o[0];v.isOdd()&&(_=_.multiply(C).mod(S)),v=v.divide(2),C=C.square().mod(S)}return _},u.prototype.modPow=c.prototype.modPow=l.prototype.modPow;function ct(v,S){if(v.length!==S.length)return v.length>S.length?1:-1;for(var _=v.length-1;_>=0;_--)if(v[_]!==S[_])return v[_]>S[_]?1:-1;return 0}l.prototype.compareAbs=function(v){var S=Z(v),_=this.value,C=S.value;return S.isSmall?1:ct(_,C)},c.prototype.compareAbs=function(v){var S=Z(v),_=Math.abs(this.value),C=S.value;return S.isSmall?(C=Math.abs(C),_===C?0:_>C?1:-1):-1},u.prototype.compareAbs=function(v){var S=this.value,_=Z(v).value;return S=S>=0?S:-S,_=_>=0?_:-_,S===_?0:S>_?1:-1},l.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var S=Z(v),_=this.value,C=S.value;return this.sign!==S.sign?S.sign?1:-1:S.isSmall?this.sign?-1:1:ct(_,C)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare,c.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var S=Z(v),_=this.value,C=S.value;return S.isSmall?_==C?0:_>C?1:-1:_<0!==S.sign?_<0?-1:1:_<0?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var S=this.value,_=Z(v).value;return S===_?0:S>_?1:-1},u.prototype.compareTo=u.prototype.compare,l.prototype.equals=function(v){return this.compare(v)===0},u.prototype.eq=u.prototype.equals=c.prototype.eq=c.prototype.equals=l.prototype.eq=l.prototype.equals,l.prototype.notEquals=function(v){return this.compare(v)!==0},u.prototype.neq=u.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=l.prototype.neq=l.prototype.notEquals,l.prototype.greater=function(v){return this.compare(v)>0},u.prototype.gt=u.prototype.greater=c.prototype.gt=c.prototype.greater=l.prototype.gt=l.prototype.greater,l.prototype.lesser=function(v){return this.compare(v)<0},u.prototype.lt=u.prototype.lesser=c.prototype.lt=c.prototype.lesser=l.prototype.lt=l.prototype.lesser,l.prototype.greaterOrEquals=function(v){return this.compare(v)>=0},u.prototype.geq=u.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals,l.prototype.lesserOrEquals=function(v){return this.compare(v)<=0},u.prototype.leq=u.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals,l.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},l.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},l.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=c.prototype.isPositive,l.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=c.prototype.isNegative,l.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},l.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},u.prototype.isZero=function(){return this.value===BigInt(0)},l.prototype.isDivisibleBy=function(v){var S=Z(v);return S.isZero()?!1:S.isUnit()?!0:S.compareAbs(2)===0?this.isEven():this.mod(S).isZero()},u.prototype.isDivisibleBy=c.prototype.isDivisibleBy=l.prototype.isDivisibleBy;function ue(v){var S=v.abs();if(S.isUnit())return!1;if(S.equals(2)||S.equals(3)||S.equals(5))return!0;if(S.isEven()||S.isDivisibleBy(3)||S.isDivisibleBy(5))return!1;if(S.lesser(49))return!0}function Ke(v,S){for(var _=v.prev(),C=_,O=0,M,I,P,U;C.isEven();)C=C.divide(2),O++;t:for(P=0;P<S.length;P++)if(!v.lesser(S[P])&&(U=oe(S[P]).modPow(C,v),!(U.isUnit()||U.equals(_)))){for(M=O-1;M!=0;M--){if(U=U.square().mod(v),U.isUnit())return!1;if(U.equals(_))continue t}return!1}return!0}l.prototype.isPrime=function(v){var S=ue(this);if(S!==n)return S;var _=this.abs(),C=_.bitLength();if(C<=64)return Ke(_,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var O=Math.log(2)*C.toJSNumber(),M=Math.ceil(v===!0?2*Math.pow(O,2):O),I=[],P=0;P<M;P++)I.push(oe(P+2));return Ke(_,I)},u.prototype.isPrime=c.prototype.isPrime=l.prototype.isPrime,l.prototype.isProbablePrime=function(v,S){var _=ue(this);if(_!==n)return _;for(var C=this.abs(),O=v===n?5:v,M=[],I=0;I<O;I++)M.push(oe.randBetween(2,C.minus(2),S));return Ke(C,M)},u.prototype.isProbablePrime=c.prototype.isProbablePrime=l.prototype.isProbablePrime,l.prototype.modInv=function(v){for(var S=oe.zero,_=oe.one,C=Z(v),O=this.abs(),M,I,P;!O.isZero();)M=C.divide(O),I=S,P=C,S=_,C=O,_=I.subtract(M.multiply(_)),O=P.subtract(M.multiply(O));if(!C.isUnit())throw new Error(this.toString()+" and "+v.toString()+" are not co-prime");return S.compare(0)===-1&&(S=S.add(v)),this.isNegative()?S.negate():S},u.prototype.modInv=c.prototype.modInv=l.prototype.modInv,l.prototype.next=function(){var v=this.value;return this.sign?T(v,1,this.sign):new l(b(v,1),this.sign)},c.prototype.next=function(){var v=this.value;return v+1<i?new c(v+1):new l(r,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},l.prototype.prev=function(){var v=this.value;return this.sign?new l(b(v,1),!0):T(v,1,this.sign)},c.prototype.prev=function(){var v=this.value;return v-1>-i?new c(v-1):new l(r,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var he=[1];2*he[he.length-1]<=t;)he.push(2*he[he.length-1]);var Pt=he.length,yt=he[Pt-1];function In(v){return Math.abs(v)<=t}l.prototype.shiftLeft=function(v){var S=Z(v).toJSNumber();if(!In(S))throw new Error(String(S)+" is too large for shifting.");if(S<0)return this.shiftRight(-S);var _=this;if(_.isZero())return _;for(;S>=Pt;)_=_.multiply(yt),S-=Pt-1;return _.multiply(he[S])},u.prototype.shiftLeft=c.prototype.shiftLeft=l.prototype.shiftLeft,l.prototype.shiftRight=function(v){var S,_=Z(v).toJSNumber();if(!In(_))throw new Error(String(_)+" is too large for shifting.");if(_<0)return this.shiftLeft(-_);for(var C=this;_>=Pt;){if(C.isZero()||C.isNegative()&&C.isUnit())return C;S=V(C,yt),C=S[1].isNegative()?S[0].prev():S[0],_-=Pt-1}return S=V(C,he[_]),S[1].isNegative()?S[0].prev():S[0]},u.prototype.shiftRight=c.prototype.shiftRight=l.prototype.shiftRight;function mn(v,S,_){S=Z(S);for(var C=v.isNegative(),O=S.isNegative(),M=C?v.not():v,I=O?S.not():S,P=0,U=0,J=null,ft=null,at=[];!M.isZero()||!I.isZero();)J=V(M,yt),P=J[1].toJSNumber(),C&&(P=yt-1-P),ft=V(I,yt),U=ft[1].toJSNumber(),O&&(U=yt-1-U),M=J[0],I=ft[0],at.push(_(P,U));for(var St=_(C?1:0,O?1:0)!==0?oe(-1):oe(0),We=at.length-1;We>=0;We-=1)St=St.multiply(yt).add(oe(at[We]));return St}l.prototype.not=function(){return this.negate().prev()},u.prototype.not=c.prototype.not=l.prototype.not,l.prototype.and=function(v){return mn(this,v,function(S,_){return S&_})},u.prototype.and=c.prototype.and=l.prototype.and,l.prototype.or=function(v){return mn(this,v,function(S,_){return S|_})},u.prototype.or=c.prototype.or=l.prototype.or,l.prototype.xor=function(v){return mn(this,v,function(S,_){return S^_})},u.prototype.xor=c.prototype.xor=l.prototype.xor;var gn=1<<30,Yt=(t&-t)*(t&-t)|gn;function Un(v){var S=v.value,_=typeof S=="number"?S|gn:typeof S=="bigint"?S|BigInt(gn):S[0]+S[1]*t|Yt;return _&-_}function Di(v,S){if(S.compareTo(v)<=0){var _=Di(v,S.square(S)),C=_.p,O=_.e,M=C.multiply(S);return M.compareTo(v)<=0?{p:M,e:O*2+1}:{p:C,e:O*2}}return{p:oe(1),e:0}}l.prototype.bitLength=function(){var v=this;return v.compareTo(oe(0))<0&&(v=v.negate().subtract(oe(1))),v.compareTo(oe(0))===0?oe(0):oe(Di(v,oe(2)).e).add(oe(1))},u.prototype.bitLength=c.prototype.bitLength=l.prototype.bitLength;function qo(v,S){return v=Z(v),S=Z(S),v.greater(S)?v:S}function fr(v,S){return v=Z(v),S=Z(S),v.lesser(S)?v:S}function Wr(v,S){if(v=Z(v).abs(),S=Z(S).abs(),v.equals(S))return v;if(v.isZero())return S;if(S.isZero())return v;for(var _=o[1],C,O;v.isEven()&&S.isEven();)C=fr(Un(v),Un(S)),v=v.divide(C),S=S.divide(C),_=_.multiply(C);for(;v.isEven();)v=v.divide(Un(v));do{for(;S.isEven();)S=S.divide(Un(S));v.greater(S)&&(O=S,S=v,v=O),S=S.subtract(v)}while(!S.isZero());return _.isUnit()?v:v.multiply(_)}function Ko(v,S){return v=Z(v).abs(),S=Z(S).abs(),v.divide(Wr(v,S)).multiply(S)}function th(v,S,_){v=Z(v),S=Z(S);var C=_||Math.random,O=fr(v,S),M=qo(v,S),I=M.subtract(O).add(1);if(I.isSmall)return O.add(Math.floor(C()*I));for(var P=os(I,t).value,U=[],J=!0,ft=0;ft<P.length;ft++){var at=J?P[ft]+(ft+1<P.length?P[ft+1]/t:0):t,St=w(C()*at);U.push(St),St<P[ft]&&(J=!1)}return O.add(o.fromArray(U,t,!1))}var iE=function(v,S,_,C){_=_||a,v=String(v),C||(v=v.toLowerCase(),_=_.toLowerCase());var O=v.length,M,I=Math.abs(S),P={};for(M=0;M<_.length;M++)P[_[M]]=M;for(M=0;M<O;M++){var U=v[M];if(U!=="-"&&U in P&&P[U]>=I){if(U==="1"&&I===1)continue;throw new Error(U+" is not a valid digit in base "+S+".")}}S=Z(S);var J=[],ft=v[0]==="-";for(M=ft?1:0;M<v.length;M++){var U=v[M];if(U in P)J.push(Z(P[U]));else if(U==="<"){var at=M;do M++;while(v[M]!==">"&&M<v.length);J.push(Z(v.slice(at+1,M)))}else throw new Error(U+" is not a valid character")}return Dg(J,S,ft)};function Dg(v,S,_){var C=o[0],O=o[1],M;for(M=v.length-1;M>=0;M--)C=C.add(v[M].times(O)),O=O.times(S);return _?C.negate():C}function rE(v,S){return S=S||a,v<S.length?S[v]:"<"+v+">"}function os(v,S){if(S=oe(S),S.isZero()){if(v.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(S.equals(-1)){if(v.isZero())return{value:[0],isNegative:!1};if(v.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-v.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var _=Array.apply(null,Array(v.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return _.unshift([1]),{value:[].concat.apply([],_),isNegative:!1}}var C=!1;if(v.isNegative()&&S.isPositive()&&(C=!0,v=v.abs()),S.isUnit())return v.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(v.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:C};for(var O=[],M=v,I;M.isNegative()||M.compareAbs(S)>=0;){I=M.divmod(S),M=I.quotient;var P=I.remainder;P.isNegative()&&(P=S.minus(P).abs(),M=M.next()),O.push(P.toJSNumber())}return O.push(M.toJSNumber()),{value:O.reverse(),isNegative:C}}function Mg(v,S,_){var C=os(v,S);return(C.isNegative?"-":"")+C.value.map(function(O){return rE(O,_)}).join("")}l.prototype.toArray=function(v){return os(this,v)},c.prototype.toArray=function(v){return os(this,v)},u.prototype.toArray=function(v){return os(this,v)},l.prototype.toString=function(v,S){if(v===n&&(v=10),v!==10||S)return Mg(this,v,S);for(var _=this.value,C=_.length,O=String(_[--C]),M="0000000",I;--C>=0;)I=String(_[C]),O+=M.slice(I.length)+I;var P=this.sign?"-":"";return P+O},c.prototype.toString=function(v,S){return v===n&&(v=10),v!=10||S?Mg(this,v,S):String(this.value)},u.prototype.toString=c.prototype.toString,u.prototype.toJSON=l.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},l.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function Lg(v){if(h(+v)){var S=+v;if(S===w(S))return s?new u(BigInt(S)):new c(S);throw new Error("Invalid integer: "+v)}var _=v[0]==="-";_&&(v=v.slice(1));var C=v.split(/e/i);if(C.length>2)throw new Error("Invalid integer: "+C.join("e"));if(C.length===2){var O=C[1];if(O[0]==="+"&&(O=O.slice(1)),O=+O,O!==w(O)||!h(O))throw new Error("Invalid integer: "+O+" is not a valid exponent.");var M=C[0],I=M.indexOf(".");if(I>=0&&(O-=M.length-I-1,M=M.slice(0,I)+M.slice(I+1)),O<0)throw new Error("Cannot include negative exponent part for integers");M+=new Array(O+1).join("0"),v=M}var P=/^([0-9][0-9]*)$/.test(v);if(!P)throw new Error("Invalid integer: "+v);if(s)return new u(BigInt(_?"-"+v:v));for(var U=[],J=v.length,ft=e,at=J-ft;J>0;)U.push(+v.slice(at,J)),at-=ft,at<0&&(at=0),J-=ft;return y(U),new l(U,_)}function aE(v){if(s)return new u(BigInt(v));if(h(v)){if(v!==w(v))throw new Error(v+" is not an integer.");return new c(v)}return Lg(v.toString())}function Z(v){return typeof v=="number"?aE(v):typeof v=="string"?Lg(v):typeof v=="bigint"?new u(v):v}for(var pr=0;pr<1e3;pr++)o[pr]=Z(pr),pr>0&&(o[-pr]=Z(-pr));return o.one=o[1],o.zero=o[0],o.minusOne=o[-1],o.max=qo,o.min=fr,o.gcd=Wr,o.lcm=Ko,o.isInstance=function(v){return v instanceof l||v instanceof c||v instanceof u},o.randBetween=th,o.fromArray=function(v,S,_){return Dg(v.map(Z),Z(S||10),_)},o}();typeof Gc<"u"&&Gc.hasOwnProperty("exports")&&(Gc.exports=oe);typeof define=="function"&&define.amd&&define(function(){return oe})});var j1=xe(ee=>{"use strict";B();var z1=(I1(),dE(F1)),DR=U1(),sr=!1;ee.maxObjectSize=100*1e3*1e3;ee.maxObjectCount=32768;var MR=9783072e5,LR=ee.UID=function(n){this.UID=n};ee.parseFile=function(n,t){return new Promise(function(e,i){function r(a){let s=null,o;try{o=H1(a),e(o)}catch(l){s=l,i(s)}finally{t&&t(s,o)}}if(z.Buffer.isBuffer(n))return r(n);z1.readFile(n,function(a,s){if(a)return i(a),t(a);r(s)})})};ee.parseFileSync=function(n){return z.Buffer.isBuffer(n)||(n=z1.readFileSync(n)),H1(n)};var H1=ee.parseBuffer=function(n){if(n.slice(0,6).toString("utf8")!=="bplist")throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");let e=n.slice(n.length-32,n.length),i=e.readUInt8(6);sr&&console.log("offsetSize: "+i);let r=e.readUInt8(7);sr&&console.log("objectRefSize: "+r);let a=Lp(e,8);sr&&console.log("numObjects: "+a);let s=Lp(e,16);sr&&console.log("topObject: "+s);let o=Lp(e,24);if(sr&&console.log("offsetTableOffset: "+o),a>ee.maxObjectCount)throw new Error("maxObjectCount exceeded");let l=[];for(let u=0;u<a;u++){let h=n.slice(o+u*i,o+(u+1)*i);l[u]=dn(h,0),sr&&console.log("Offset for Object #"+u+" is "+l[u]+" ["+l[u].toString(16)+"]")}function c(u){let h=l[u],d=n[h],f=(d&240)>>4,y=d&15;switch(f){case 0:return g();case 1:return p();case 8:return m();case 2:return b();case 3:return E();case 4:return A();case 5:return T();case 6:return T(!0);case 10:return x();case 13:return D();default:throw new Error("Unhandled type 0x"+f.toString(16))}function g(){switch(y){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+f.toString(16))}}function w(R){let L="",F;for(F=0;F<R.length&&R[F]==0;F++);for(;F<R.length;F++){let G="00"+R[F].toString(16);L+=G.substr(G.length-2)}return L}function p(){let R=Math.pow(2,y);if(R<ee.maxObjectSize){let L=n.slice(h+1,h+1+R);if(R===16){let F=w(L);return DR(F,16)}return L.reduce((F,G)=>(F<<=8,F|=G&255,F))}throw new Error("Too little heap space available! Wanted to read "+R+" bytes, but only "+ee.maxObjectSize+" are available.")}function m(){let R=y+1;if(R<ee.maxObjectSize)return new LR(dn(n.slice(h+1,h+1+R)));throw new Error("Too little heap space available! Wanted to read "+R+" bytes, but only "+ee.maxObjectSize+" are available.")}function b(){let R=Math.pow(2,y);if(R<ee.maxObjectSize){let L=n.slice(h+1,h+1+R);if(R===4)return L.readFloatBE(0);if(R===8)return L.readDoubleBE(0)}else throw new Error("Too little heap space available! Wanted to read "+R+" bytes, but only "+ee.maxObjectSize+" are available.")}function E(){y!=3&&console.error("Unknown date type :"+y+". Parsing anyway...");let R=n.slice(h+1,h+9);return new Date(MR+1e3*R.readDoubleBE(0))}function A(){let R=1,L=y;if(y==15){let F=n[h+1],G=(F&240)/16;G!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+G);let q=F&15,Q=Math.pow(2,q);R=2+Q,Q<3,L=dn(n.slice(h+2,h+2+Q))}if(L<ee.maxObjectSize)return n.slice(h+R,h+R+L);throw new Error("Too little heap space available! Wanted to read "+L+" bytes, but only "+ee.maxObjectSize+" are available.")}function T(R){R=R||0;let L="utf8",F=y,G=1;if(y==15){let q=n[h+1],Q=(q&240)/16;Q!=1&&console.error("UNEXPECTED LENGTH-INT TYPE! "+Q);let rt=q&15,Y=Math.pow(2,rt);G=2+Y,Y<3,F=dn(n.slice(h+2,h+2+Y))}if(F*=R+1,F<ee.maxObjectSize){let q=z.Buffer.from(n.slice(h+G,h+G+F));return R&&(q=OR(q),L="ucs2"),q.toString(L)}throw new Error("Too little heap space available! Wanted to read "+F+" bytes, but only "+ee.maxObjectSize+" are available.")}function x(){let R=y,L=1;if(y==15){let G=n[h+1],q=(G&240)/16;q!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+q);let Q=G&15,rt=Math.pow(2,Q);L=2+rt,rt<3,R=dn(n.slice(h+2,h+2+rt))}if(R*r>ee.maxObjectSize)throw new Error("Too little heap space available!");let F=[];for(let G=0;G<R;G++){let q=dn(n.slice(h+L+G*r,h+L+(G+1)*r));F[G]=c(q)}return F}function D(){let R=y,L=1;if(y==15){let G=n[h+1],q=(G&240)/16;q!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+q);let Q=G&15,rt=Math.pow(2,Q);L=2+rt,rt<3,R=dn(n.slice(h+2,h+2+rt))}if(R*2*r>ee.maxObjectSize)throw new Error("Too little heap space available!");sr&&console.log("Parsing dictionary #"+u);let F={};for(let G=0;G<R;G++){let q=dn(n.slice(h+L+G*r,h+L+(G+1)*r)),Q=dn(n.slice(h+L+R*r+G*r,h+L+R*r+(G+1)*r)),rt=c(q),Y=c(Q);sr&&console.log("  DICT #"+u+": Mapped "+rt+" to "+Y),F[rt]=Y}return F}}return[c(s)]};function dn(n,t){t=t||0;let e=0;for(let i=t;i<n.length;i++)e<<=8,e|=n[i]&255;return e}function Lp(n,t){return n.slice(t,t+8).readUInt32BE(4,8)}function OR(n){let t=n.length;for(let e=0;e<t;e+=2){let i=n[e];n[e]=n[e+1],n[e+1]=i}return n}});var Z1=xe(Kc=>{"use strict";B();var FR=Symbol.for("react.transitional.element"),IR=Symbol.for("react.fragment");function W1(n,t,e){var i=null;if(e!==void 0&&(i=""+e),t.key!==void 0&&(i=""+t.key),"key"in t){e={};for(var r in t)r!=="key"&&(e[r]=t[r])}else e=t;return t=e.ref,{$$typeof:FR,type:n,key:i,ref:t!==void 0?t:null,props:e}}Kc.Fragment=IR;Kc.jsx=W1;Kc.jsxs=W1});var zt=xe((nL,Q1)=>{"use strict";B();Q1.exports=Z1()});B();var tE=tt(Yw());B();B();var ln=tt(It(),1),$=tt(It(),1),Rt=tt(It(),1),vp=tt(It(),1),u1=tt(It(),1),wt=tt(It(),1),FT=tt(It(),1),IT=tt(It(),1),UT=tt(It(),1),X=tt(It(),1),T1=tt(It(),1);var Vw="popstate";function P_(n={}){function t(r,a){let{pathname:s="/",search:o="",hash:l=""}=ar(r.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),ep("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(r,a){let s=r.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof a=="string"?a:Xa(a))}function i(r,a){Ge(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return I_(t,e,i,n)}function Mt(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Ge(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F_(){return Math.random().toString(36).substring(2,10)}function $w(n,t){return{usr:n.state,key:n.key,idx:t}}function ep(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?ar(t):t,state:e,key:t&&t.key||i||F_()}}function Xa({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function ar(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function I_(n,t,e,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,o="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=u(),p=w==null?null:w-c;c=w,l&&l({action:o,location:g.location,delta:p})}function d(w,p){o="PUSH";let m=ep(g.location,w,p);e&&e(m,w),c=u()+1;let b=$w(m,c),E=g.createHref(m);try{s.pushState(b,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(E)}a&&l&&l({action:o,location:g.location,delta:1})}function f(w,p){o="REPLACE";let m=ep(g.location,w,p);e&&e(m,w),c=u();let b=$w(m,c),E=g.createHref(m);s.replaceState(b,"",E),a&&l&&l({action:o,location:g.location,delta:0})}function y(w){return U_(w)}let g={get action(){return o},get location(){return n(r,s)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Vw,h),l=w,()=>{r.removeEventListener(Vw,h),l=null}},createHref(w){return t(r,w)},createURL:y,encodeLocation(w){let p=y(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(w){return s.go(w)}};return g}function U_(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Xa(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}var z_;z_=new WeakMap;function ap(n,t,e="/"){return H_(n,t,e,!1)}function H_(n,t,e,i){let r=typeof t=="string"?ar(t):t,a=Kn(r.pathname||"/",e);if(a==null)return null;let s=Ww(n);G_(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=tT(a);o=Q_(s[l],c,i)}return o}function j_(n,t){let{route:e,pathname:i,params:r}=n;return{id:e.id,pathname:i,params:r,data:t[e.id],loaderData:t[e.id],handle:e.handle}}function Ww(n,t=[],e=[],i="",r=!1){let a=(s,o,l=r,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&l)return;Mt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let h=Ai([i,u.relativePath]),d=e.concat(u);s.children&&s.children.length>0&&(Mt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Ww(s.children,t,d,h,l)),!(s.path==null&&!s.index)&&t.push({path:h,score:W_(h,s.index),routesMeta:d})};return n.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let l of Zw(s.path))a(s,o,!0,l)}),t}function Zw(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),a=e.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let s=Zw(i.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),r&&o.push(...s),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function G_(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:Z_(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var Y_=/^:[\w-]+$/,V_=3,$_=2,X_=1,q_=10,K_=-2,Xw=n=>n==="*";function W_(n,t){let e=n.split("/"),i=e.length;return e.some(Xw)&&(i+=K_),t&&(i+=$_),e.filter(r=>!Xw(r)).reduce((r,a)=>r+(Y_.test(a)?V_:a===""?X_:q_),i)}function Z_(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function Q_(n,t,e=!1){let{routesMeta:i}=n,r={},a="/",s=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=ho({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&e&&!i[i.length-1].route.index&&(h=ho({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),s.push({params:r,pathname:Ai([a,h.pathname]),pathnameBase:iT(Ai([a,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(a=Ai([a,h.pathnameBase]))}return s}function ho(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=J_(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let a=r[0],s=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:h},d)=>{if(u==="*"){let y=o[d]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}let f=o[d];return h&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:n}}function J_(n,t=!1,e=!0){Ge(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function tT(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ge(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Kn(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function Qw(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?ar(n):n;return{pathname:e?e.startsWith("/")?e:eT(e,t):t,search:rT(i),hash:aT(r)}}function eT(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function Jf(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nT(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function sp(n){let t=nT(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function op(n,t,e,i=!1){let r;typeof n=="string"?r=ar(n):(r={...n},Mt(!r.pathname||!r.pathname.includes("?"),Jf("?","pathname","search",r)),Mt(!r.pathname||!r.pathname.includes("#"),Jf("#","pathname","hash",r)),Mt(!r.search||!r.search.includes("#"),Jf("#","search","hash",r)));let a=n===""||r.pathname==="",s=a?"/":r.pathname,o;if(s==null)o=e;else{let h=t.length-1;if(!i&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}o=h>=0?t[h]:"/"}let l=Qw(r,o),c=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Ai=n=>n.join("/").replace(/\/\/+/g,"/"),iT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Jw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var t1=["POST","PUT","PATCH","DELETE"],r2=new Set(t1),sT=["GET",...t1],a2=new Set(sT);var s2=Symbol("ResetLoaderData");var Fr=ln.createContext(null);Fr.displayName="DataRouter";var qa=ln.createContext(null);qa.displayName="DataRouterState";var o2=ln.createContext(!1);var lp=ln.createContext({isTransitioning:!1});lp.displayName="ViewTransition";var e1=ln.createContext(new Map);e1.displayName="Fetchers";var oT=ln.createContext(null);oT.displayName="Await";var Ye=ln.createContext(null);Ye.displayName="Navigation";var Ka=ln.createContext(null);Ka.displayName="Location";var Dn=ln.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var cp=ln.createContext(null);cp.displayName="RouteError";var np=!0;function n1(n,{relative:t}={}){Mt(Ir(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=$.useContext(Ye),{hash:r,pathname:a,search:s}=Wa(n,{relative:t}),o=a;return e!=="/"&&(o=a==="/"?e:Ai([e,a])),i.createHref({pathname:o,search:s,hash:r})}function Ir(){return $.useContext(Ka)!=null}function cn(){return Mt(Ir(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Ka).location}var i1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r1(n){$.useContext(Ye).static||$.useLayoutEffect(n)}function Ce(){let{isDataRoute:n}=$.useContext(Dn);return n?yT():lT()}function lT(){Mt(Ir(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(Fr),{basename:t,navigator:e}=$.useContext(Ye),{matches:i}=$.useContext(Dn),{pathname:r}=cn(),a=JSON.stringify(sp(i)),s=$.useRef(!1);return r1(()=>{s.current=!0}),$.useCallback((l,c={})=>{if(Ge(s.current,i1),!s.current)return;if(typeof l=="number"){e.go(l);return}let u=op(l,JSON.parse(a),r,c.relative==="path");n==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Ai([t,u.pathname])),(c.replace?e.replace:e.push)(u,c.state,c)},[t,e,a,r,n])}var l2=$.createContext(null);function up(){let{matches:n}=$.useContext(Dn),t=n[n.length-1];return t?t.params:{}}function Wa(n,{relative:t}={}){let{matches:e}=$.useContext(Dn),{pathname:i}=cn(),r=JSON.stringify(sp(e));return $.useMemo(()=>op(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function a1(n,t){return s1(n,t)}function s1(n,t,e,i,r){Mt(Ir(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=$.useContext(Ye),{matches:s}=$.useContext(Dn),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;if(np){let m=h&&h.path||"";c1(c,!h||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let d=cn(),f;if(t){let m=typeof t=="string"?ar(t):t;Mt(u==="/"||m.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),f=m}else f=d;let y=f.pathname||"/",g=y;if(u!=="/"){let m=u.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=ap(n,{pathname:g});np&&(Ge(h||w!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ge(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`));let p=fT(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:Ai([u,a.encodeLocation?a.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:Ai([u,a.encodeLocation?a.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),s,e,i,r);return t&&p?$.createElement(Ka.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},p):p}function cT(){let n=l1(),t=Jw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},s=null;return np&&(console.error("Error handled by React Router default ErrorBoundary:",n),s=$.createElement($.Fragment,null,$.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:a},"ErrorBoundary")," or"," ",$.createElement("code",{style:a},"errorElement")," prop on your route."))),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),e?$.createElement("pre",{style:r},e):null,s)}var uT=$.createElement(cT,null),hT=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.unstable_onError?this.props.unstable_onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?$.createElement(Dn.Provider,{value:this.props.routeContext},$.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dT({routeContext:n,match:t,children:e}){let i=$.useContext(Fr);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(Dn.Provider,{value:n},e)}function fT(n,t=[],e=null,i=null,r=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let a=n,s=e?.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&s?.[u.route.id]!==void 0);Mt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(e)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:d}=e,f=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,h)=>{let d,f=!1,y=null,g=null;e&&(d=s&&u.route.id?s[u.route.id]:void 0,y=u.route.errorElement||uT,o&&(l<0&&h===0?(c1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):l===h&&(f=!0,g=u.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,h+1)),p=()=>{let m;return d?m=y:f?m=g:u.route.Component?m=$.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=c,$.createElement(dT,{match:u,routeContext:{outlet:c,matches:w,isDataRoute:e!=null},children:m})};return e&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?$.createElement(hT,{location:e.location,revalidation:e.revalidation,component:y,error:d,children:p(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:i}):p()},null)}function hp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pT(n){let t=$.useContext(Fr);return Mt(t,hp(n)),t}function dp(n){let t=$.useContext(qa);return Mt(t,hp(n)),t}function mT(n){let t=$.useContext(Dn);return Mt(t,hp(n)),t}function fp(n){let t=mT(n),e=t.matches[t.matches.length-1];return Mt(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function gT(){return fp("useRouteId")}function o1(){return dp("useNavigation").navigation}function pp(){let{matches:n,loaderData:t}=dp("useMatches");return $.useMemo(()=>n.map(e=>j_(e,t)),[n,t])}function l1(){let n=$.useContext(cp),t=dp("useRouteError"),e=fp("useRouteError");return n!==void 0?n:t.errors?.[e]}function yT(){let{router:n}=pT("useNavigate"),t=fp("useNavigate"),e=$.useRef(!1);return r1(()=>{e.current=!0}),$.useCallback(async(r,a={})=>{Ge(e.current,i1),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...a}))},[n,t])}var qw={};function c1(n,t,e){!t&&!qw[n]&&(qw[n]=!0,Ge(!1,e))}var c2=Rt.memo(vT);function vT({routes:n,future:t,state:e,unstable_onError:i}){return s1(n,void 0,e,i,t)}function mp({to:n,replace:t,state:e,relative:i}){Mt(Ir(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=Rt.useContext(Ye);Ge(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Rt.useContext(Dn),{pathname:s}=cn(),o=Ce(),l=op(n,sp(a),s,i==="path"),c=JSON.stringify(l);return Rt.useEffect(()=>{o(JSON.parse(c),{replace:t,state:e,relative:i})},[o,c,i,t,e]),null}function Ur(n){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gp({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:r,static:a=!1}){Mt(!Ir(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),o=Rt.useMemo(()=>({basename:s,navigator:r,static:a,future:{}}),[s,r,a]);typeof e=="string"&&(e=ar(e));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:d="default"}=e,f=Rt.useMemo(()=>{let y=Kn(l,s);return y==null?null:{location:{pathname:y,search:c,hash:u,state:h,key:d},navigationType:i}},[s,l,c,u,h,d,i]);return Ge(f!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:Rt.createElement(Ye.Provider,{value:o},Rt.createElement(Ka.Provider,{children:t,value:f}))}function yp({children:n,location:t}){return a1(Bc(n),t)}function Bc(n,t=[]){let e=[];return Rt.Children.forEach(n,(i,r)=>{if(!Rt.isValidElement(i))return;let a=[...t,r];if(i.type===Rt.Fragment){e.push.apply(e,Bc(i.props.children,a));return}Mt(i.type===Ur,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let s={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=Bc(i.props.children,a)),e.push(s)}),e}var Oc="get",Nc="application/x-www-form-urlencoded";function kc(n){return n!=null&&typeof n.tagName=="string"}function bT(n){return kc(n)&&n.tagName.toLowerCase()==="button"}function wT(n){return kc(n)&&n.tagName.toLowerCase()==="form"}function ST(n){return kc(n)&&n.tagName.toLowerCase()==="input"}function ET(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function AT(n,t){return n.button===0&&(!t||t==="_self")&&!ET(n)}var Mc=null;function xT(){if(Mc===null)try{new FormData(document.createElement("form"),0),Mc=!1}catch{Mc=!0}return Mc}var _T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tp(n){return n!=null&&!_T.has(n)?(Ge(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nc}"`),null):n}function TT(n,t){let e,i,r,a,s;if(wT(n)){let o=n.getAttribute("action");i=o?Kn(o,t):null,e=n.getAttribute("method")||Oc,r=tp(n.getAttribute("enctype"))||Nc,a=new FormData(n)}else if(bT(n)||ST(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(i=l?Kn(l,t):null,e=n.getAttribute("formmethod")||o.getAttribute("method")||Oc,r=tp(n.getAttribute("formenctype"))||tp(o.getAttribute("enctype"))||Nc,a=new FormData(o,n),!xT()){let{name:c,type:u,value:h}=n;if(u==="image"){let d=c?`${c}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else c&&a.append(c,h)}}else{if(kc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Oc,i=null,r=Nc,s=n}return a&&r==="text/plain"&&(s=a,a=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:a,body:s}}var u2=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bp(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}var RT=Symbol("SingleFetchRedirect");function CT(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&Kn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function DT(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){if(console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode&&import.meta.hot)throw e;return window.location.reload(),new Promise(()=>{})}}function MT(n){return n!=null&&typeof n.page=="string"}function LT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function OT(n,t,e){let i=await Promise.all(n.map(async r=>{let a=t.routes[r.route.id];if(a){let s=await DT(a,e);return s.links?s.links():[]}return[]}));return PT(i.flat(1).filter(LT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Kw(n,t,e,i,r,a){let s=(l,c)=>e[c]?l.route.id!==e[c].route.id:!0,o=(l,c)=>e[c].pathname!==l.pathname||e[c].route.path?.endsWith("*")&&e[c].params["*"]!==l.params["*"];return a==="assets"?t.filter((l,c)=>s(l,c)||o(l,c)):a==="data"?t.filter((l,c)=>{let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function NT(n,t,{includeHydrateFallback:e}={}){return BT(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function BT(n){return[...new Set(n)]}function kT(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function PT(n,t){let e=new Set,i=new Set(t);return n.reduce((r,a)=>{if(t&&!MT(a)&&a.as==="script"&&a.href&&i.has(a.href))return r;let o=JSON.stringify(kT(a));return e.has(o)||(e.add(o),r.push({key:o,link:a})),r},[])}function h1(){let n=wt.useContext(Fr);return bp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zT(){let n=wt.useContext(qa);return bp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var fo=wt.createContext(void 0);fo.displayName="FrameworkContext";function d1(){let n=wt.useContext(fo);return bp(n,"You must render this element inside a <HydratedRouter> element"),n}function HT(n,t){let e=wt.useContext(fo),[i,r]=wt.useState(!1),[a,s]=wt.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=t,d=wt.useRef(null);wt.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let g=p=>{p.forEach(m=>{s(m.isIntersecting)})},w=new IntersectionObserver(g,{threshold:.5});return d.current&&w.observe(d.current),()=>{w.disconnect()}}},[n]),wt.useEffect(()=>{if(i){let g=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(g)}}},[i]);let f=()=>{r(!0)},y=()=>{r(!1),s(!1)};return e?n!=="intent"?[a,d,{}]:[a,d,{onFocus:uo(o,f),onBlur:uo(l,y),onMouseEnter:uo(c,f),onMouseLeave:uo(u,y),onTouchStart:uo(h,f)}]:[!1,d,{}]}function uo(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function f1({page:n,...t}){let{router:e}=h1(),i=wt.useMemo(()=>ap(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?wt.createElement(GT,{page:n,matches:i,...t}):null}function jT(n){let{manifest:t,routeModules:e}=d1(),[i,r]=wt.useState([]);return wt.useEffect(()=>{let a=!1;return OT(n,t,e).then(s=>{a||r(s)}),()=>{a=!0}},[n,t,e]),i}function GT({page:n,matches:t,...e}){let i=cn(),{manifest:r,routeModules:a}=d1(),{basename:s}=h1(),{loaderData:o,matches:l}=zT(),c=wt.useMemo(()=>Kw(n,t,l,r,i,"data"),[n,t,l,r,i]),u=wt.useMemo(()=>Kw(n,t,l,r,i,"assets"),[n,t,l,r,i]),h=wt.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let y=new Set,g=!1;if(t.forEach(p=>{let m=r.routes[p.route.id];!m||!m.hasLoader||(!c.some(b=>b.route.id===p.route.id)&&p.route.id in o&&a[p.route.id]?.shouldRevalidate||m.hasClientLoader?g=!0:y.add(p.route.id))}),y.size===0)return[];let w=CT(n,s,"data");return g&&y.size>0&&w.searchParams.set("_routes",t.filter(p=>y.has(p.route.id)).map(p=>p.route.id).join(",")),[w.pathname+w.search]},[s,o,i,r,c,t,n,a]),d=wt.useMemo(()=>NT(u,r),[u,r]),f=jT(u);return wt.createElement(wt.Fragment,null,h.map(y=>wt.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...e})),d.map(y=>wt.createElement("link",{key:y,rel:"modulepreload",href:y,...e})),f.map(({key:y,link:g})=>wt.createElement("link",{key:y,nonce:e.nonce,...g})))}function YT(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var p1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p1&&(window.__reactRouterVersion="7.9.3")}catch{}function wp({basename:n,children:t,window:e}){let i=X.useRef();i.current==null&&(i.current=P_({window:e,v5Compat:!0}));let r=i.current,[a,s]=X.useState({action:r.action,location:r.location}),o=X.useCallback(l=>{X.startTransition(()=>s(l))},[s]);return X.useLayoutEffect(()=>r.listen(o),[r,o]),X.createElement(gp,{basename:n,children:t,location:a.location,navigationType:a.action,navigator:r})}function m1({basename:n,children:t,history:e}){let[i,r]=X.useState({action:e.action,location:e.location}),a=X.useCallback(s=>{X.startTransition(()=>r(s))},[r]);return X.useLayoutEffect(()=>e.listen(a),[e,a]),X.createElement(gp,{basename:n,children:t,location:i.location,navigationType:i.action,navigator:e})}m1.displayName="unstable_HistoryRouter";var g1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=X.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},f){let{basename:y}=X.useContext(Ye),g=typeof c=="string"&&g1.test(c),w,p=!1;if(typeof c=="string"&&g&&(w=c,p1))try{let R=new URL(window.location.href),L=c.startsWith("//")?new URL(R.protocol+c):new URL(c),F=Kn(L.pathname,y);L.origin===R.origin&&F!=null?c=F+L.search+L.hash:p=!0}catch{Ge(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=n1(c,{relative:r}),[b,E,A]=HT(i,d),T=S1(c,{replace:s,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:h});function x(R){t&&t(R),R.defaultPrevented||T(R)}let D=X.createElement("a",{...d,...A,href:w||m,onClick:p||a?t:x,ref:YT(f,E),target:l,"data-discover":!g&&e==="render"?"true":void 0});return b&&!g?X.createElement(X.Fragment,null,D,X.createElement(f1,{page:m})):D});Wn.displayName="Link";var y1=X.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:a,to:s,viewTransition:o,children:l,...c},u){let h=Wa(s,{relative:c.relative}),d=cn(),f=X.useContext(qa),{navigator:y,basename:g}=X.useContext(Ye),w=f!=null&&_1(h)&&o===!0,p=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,m=d.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;e||(m=m.toLowerCase(),b=b?b.toLowerCase():null,p=p.toLowerCase()),b&&g&&(b=Kn(b,g)||b);let E=p!=="/"&&p.endsWith("/")?p.length-1:p.length,A=m===p||!r&&m.startsWith(p)&&m.charAt(E)==="/",T=b!=null&&(b===p||!r&&b.startsWith(p)&&b.charAt(p.length)==="/"),x={isActive:A,isPending:T,isTransitioning:w},D=A?t:void 0,R;typeof i=="function"?R=i(x):R=[i,A?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(x):a;return X.createElement(Wn,{...c,"aria-current":D,className:R,ref:u,style:L,to:s,viewTransition:o},typeof l=="function"?l(x):l)});y1.displayName="NavLink";var v1=X.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:a,method:s=Oc,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...d},f)=>{let y=E1(),g=A1(o,{relative:c}),w=s.toLowerCase()==="get"?"get":"post",p=typeof o=="string"&&g1.test(o);return X.createElement("form",{ref:f,method:w,action:g,onSubmit:i?l:b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let E=b.nativeEvent.submitter,A=E?.getAttribute("formmethod")||s;y(E||b.currentTarget,{fetcherKey:t,method:A,navigate:e,replace:r,state:a,relative:c,preventScrollReset:u,viewTransition:h})},...d,"data-discover":!p&&n==="render"?"true":void 0})});v1.displayName="Form";function b1({getKey:n,storageKey:t,...e}){let i=X.useContext(fo),{basename:r}=X.useContext(Ye),a=cn(),s=pp();x1({getKey:n,storageKey:t});let o=X.useMemo(()=>{if(!i||!n)return null;let c=rp(a,s,r,n);return c!==a.key?c:null},[]);if(!i||i.isSpaMode)return null;let l=((c,u)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let d=JSON.parse(sessionStorage.getItem(c)||"{}")[u||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(h){console.error(h),sessionStorage.removeItem(c)}}).toString();return X.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${l})(${JSON.stringify(t||ip)}, ${JSON.stringify(o)})`}})}b1.displayName="ScrollRestoration";function w1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sp(n){let t=X.useContext(Fr);return Mt(t,w1(n)),t}function VT(n){let t=X.useContext(qa);return Mt(t,w1(n)),t}function S1(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:a,viewTransition:s}={}){let o=Ce(),l=cn(),c=Wa(n,{relative:a});return X.useCallback(u=>{if(AT(u,t)){u.preventDefault();let h=e!==void 0?e:Xa(l)===Xa(c);o(n,{replace:h,state:i,preventScrollReset:r,relative:a,viewTransition:s})}},[l,o,c,e,i,t,n,r,a,s])}var $T=0,XT=()=>`__${String(++$T)}__`;function E1(){let{router:n}=Sp("useSubmit"),{basename:t}=X.useContext(Ye),e=gT();return X.useCallback(async(i,r={})=>{let{action:a,method:s,encType:o,formData:l,body:c}=TT(i,t);if(r.navigate===!1){let u=r.fetcherKey||XT();await n.fetch(u,e,r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||s,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function A1(n,{relative:t}={}){let{basename:e}=X.useContext(Ye),i=X.useContext(Dn);Mt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Wa(n||".",{relative:t})},s=cn();if(n==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();a.search=u?`?${u}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:Ai([e,a.pathname])),Xa(a)}var ip="react-router-scroll-positions",Lc={};function rp(n,t,e,i){let r=null;return i&&(e!=="/"?r=i({...n,pathname:Kn(n.pathname,e)||n.pathname},t):r=i(n,t)),r==null&&(r=n.key),r}function x1({getKey:n,storageKey:t}={}){let{router:e}=Sp("useScrollRestoration"),{restoreScrollPosition:i,preventScrollReset:r}=VT("useScrollRestoration"),{basename:a}=X.useContext(Ye),s=cn(),o=pp(),l=o1();X.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),qT(X.useCallback(()=>{if(l.state==="idle"){let c=rp(s,o,a,n);Lc[c]=window.scrollY}try{sessionStorage.setItem(t||ip,JSON.stringify(Lc))}catch(c){Ge(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${c}).`)}window.history.scrollRestoration="auto"},[l.state,n,a,s,o,t])),typeof document<"u"&&(X.useLayoutEffect(()=>{try{let c=sessionStorage.getItem(t||ip);c&&(Lc=JSON.parse(c))}catch{}},[t]),X.useLayoutEffect(()=>{let c=e?.enableScrollRestoration(Lc,()=>window.scrollY,n?(u,h)=>rp(u,h,a,n):void 0);return()=>c&&c()},[e,a,n]),X.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}try{if(s.hash){let c=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(c){c.scrollIntoView();return}}}catch{Ge(!1,`"${s.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}r!==!0&&window.scrollTo(0,0)}},[s,i,r]))}function qT(n,t){let{capture:e}=t||{};X.useEffect(()=>{let i=e!=null?{capture:e}:void 0;return window.addEventListener("pagehide",n,i),()=>{window.removeEventListener("pagehide",n,i)}},[n,e])}function _1(n,{relative:t}={}){let e=X.useContext(lp);Mt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Sp("useViewTransitionState"),r=Wa(n,{relative:t});if(!e.isTransitioning)return!1;let a=Kn(e.currentLocation.pathname,i)||e.currentLocation.pathname,s=Kn(e.nextLocation.pathname,i)||e.nextLocation.pathname;return ho(r.pathname,s)!=null||ho(r.pathname,a)!=null}B();B();var Ip=tt(It());B();var Zn=tt(It());B();var Yc=tt(It());B();import G1 from"jszip";B();B();var CD=new TextEncoder;var KT=4096;function Ep(n,t,e){let i=t,r=i+e,a=[],s="";for(;i<r;){let o=n[i++];if(!(o&128))a.push(o);else if((o&224)===192){let l=n[i++]&63;a.push((o&31)<<6|l)}else if((o&240)===224){let l=n[i++]&63,c=n[i++]&63;a.push((o&31)<<12|l<<6|c)}else if((o&248)===240){let l=n[i++]&63,c=n[i++]&63,u=n[i++]&63,h=(o&7)<<18|l<<12|c<<6|u;h>65535&&(h-=65536,a.push(h>>>10&1023|55296),h=56320|h&1023),a.push(h)}else a.push(o);a.length>=KT&&(s+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(s+=String.fromCharCode(...a)),s}var WT=new TextDecoder,ZT=200;function QT(n,t,e){let i=n.subarray(t,t+e);return WT.decode(i)}function R1(n,t,e){return e>ZT?QT(n,t,e):Ep(n,t,e)}B();B();var zr=class{type;data;constructor(t,e){this.type=t,this.data=e}};B();B();var Ve=class n extends Error{constructor(t){super(t);let e=Object.create(n.prototype);Object.setPrototypeOf(this,e),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:n.name})}};B();function C1(n,t,e){let i=Math.floor(e/4294967296),r=e;n.setUint32(t,i),n.setUint32(t+4,r)}function Pc(n,t){let e=n.getInt32(t),i=n.getUint32(t+4);return e*4294967296+i}function D1(n,t){let e=n.getUint32(t),i=n.getUint32(t+4);return e*4294967296+i}var JT=-1,tR=4294967296-1,eR=17179869184-1;function nR({sec:n,nsec:t}){if(n>=0&&t>=0&&n<=eR)if(t===0&&n<=tR){let e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,n),e}else{let e=n/4294967296,i=n&4294967295,r=new Uint8Array(8),a=new DataView(r.buffer);return a.setUint32(0,t<<2|e&3),a.setUint32(4,i),r}else{let e=new Uint8Array(12),i=new DataView(e.buffer);return i.setUint32(0,t),C1(i,4,n),e}}function iR(n){let t=n.getTime(),e=Math.floor(t/1e3),i=(t-e*1e3)*1e6,r=Math.floor(i/1e9);return{sec:e+r,nsec:i-r*1e9}}function rR(n){if(n instanceof Date){let t=iR(n);return nR(t)}else return null}function aR(n){let t=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{let e=t.getUint32(0),i=t.getUint32(4),r=(e&3)*4294967296+i,a=e>>>2;return{sec:r,nsec:a}}case 12:{let e=Pc(t,4),i=t.getUint32(0);return{sec:e,nsec:i}}default:throw new Ve(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${n.length}`)}}function sR(n){let t=aR(n);return new Date(t.sec*1e3+t.nsec/1e6)}var M1={type:JT,encode:rR,decode:sR};var Fc=class n{static defaultCodec=new n;__brand;builtInEncoders=[];builtInDecoders=[];encoders=[];decoders=[];constructor(){this.register(M1)}register({type:t,encode:e,decode:i}){if(t>=0)this.encoders[t]=e,this.decoders[t]=i;else{let r=-1-t;this.builtInEncoders[r]=e,this.builtInDecoders[r]=i}}tryToEncode(t,e){for(let i=0;i<this.builtInEncoders.length;i++){let r=this.builtInEncoders[i];if(r!=null){let a=r(t,e);if(a!=null){let s=-1-i;return new zr(s,a)}}}for(let i=0;i<this.encoders.length;i++){let r=this.encoders[i];if(r!=null){let a=r(t,e);if(a!=null){let s=i;return new zr(s,a)}}}return t instanceof zr?t:null}decode(t,e,i){let r=e<0?this.builtInDecoders[-1-e]:this.decoders[e];return r?r(t,e,i):new zr(e,t)}};B();function oR(n){return n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer}function Ap(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):oR(n)?new Uint8Array(n):Uint8Array.from(n)}B();B();B();function Ic(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}B();var lR=16,cR=16,Uc=class{hit=0;miss=0;caches;maxKeyLength;maxLengthPerKey;constructor(t=lR,e=cR){this.maxKeyLength=t,this.maxLengthPerKey=e,this.caches=[];for(let i=0;i<this.maxKeyLength;i++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,e,i){let r=this.caches[i-1];t:for(let a of r){let s=a.bytes;for(let o=0;o<i;o++)if(s[o]!==t[e+o])continue t;return a.str}return null}store(t,e){let i=this.caches[t.length-1],r={bytes:t,str:e};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=r:i.push(r)}decode(t,e,i){let r=this.find(t,e,i);if(r!=null)return this.hit++,r;this.miss++;let a=Ep(t,e,i),s=Uint8Array.prototype.slice.call(t,e,e+i);return this.store(s,a),a}};var xp="array",go="map_key",O1="map_value",uR=n=>{if(typeof n=="string"||typeof n=="number")return n;throw new Ve("The type of key must be string or number but "+typeof n)},_p=class{stack=[];stackHeadPosition=-1;get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){let e=this.getUninitializedStateFromPool();e.type=xp,e.position=0,e.size=t,e.array=new Array(t)}pushMapState(t){let e=this.getUninitializedStateFromPool();e.type=go,e.readCount=0,e.size=t,e.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){let t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===xp){let i=t;i.size=0,i.array=void 0,i.position=0,i.type=void 0}if(t.type===go||t.type===O1){let i=t;i.size=0,i.map=void 0,i.readCount=0,i.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}},mo=-1,Tp=new DataView(new ArrayBuffer(0)),hR=new Uint8Array(Tp.buffer);try{Tp.getInt8(0)}catch(n){if(!(n instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var L1=new RangeError("Insufficient data"),dR=new Uc,zc=class n{extensionCodec;context;useBigInt64;rawStrings;maxStrLength;maxBinLength;maxArrayLength;maxMapLength;maxExtLength;keyDecoder;mapKeyConverter;totalPos=0;pos=0;view=Tp;bytes=hR;headByte=mo;stack=new _p;entered=!1;constructor(t){this.extensionCodec=t?.extensionCodec??Fc.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??4294967295,this.maxBinLength=t?.maxBinLength??4294967295,this.maxArrayLength=t?.maxArrayLength??4294967295,this.maxMapLength=t?.maxMapLength??4294967295,this.maxExtLength=t?.maxExtLength??4294967295,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:dR,this.mapKeyConverter=t?.mapKeyConverter??uR}clone(){return new n({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=mo,this.stack.reset()}setBuffer(t){let e=Ap(t);this.bytes=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===mo&&!this.hasRemaining(1))this.setBuffer(t);else{let e=this.bytes.subarray(this.pos),i=Ap(t),r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),this.setBuffer(r)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){let{view:e,pos:i}=this;return new RangeError(`Extra ${e.byteLength-i} of ${e.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);let e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return e}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let e=!1,i;for await(let o of t){if(e)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{i=this.doDecodeSync(),e=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(e){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}let{headByte:r,pos:a,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${Ic(r)} at ${s} (${a} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,e){if(this.entered){yield*this.clone().decodeMultiAsync(t,e);return}try{this.entered=!0;let i=e,r=-1;for await(let a of t){if(e&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--r!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){t:for(;;){let t=this.readHeadByte(),e;if(t>=224)e=t-256;else if(t<192)if(t<128)e=t;else if(t<144){let r=t-128;if(r!==0){this.pushMapState(r),this.complete();continue t}else e={}}else if(t<160){let r=t-144;if(r!==0){this.pushArrayState(r),this.complete();continue t}else e=[]}else{let r=t-160;e=this.decodeString(r,0)}else if(t===192)e=null;else if(t===194)e=!1;else if(t===195)e=!0;else if(t===202)e=this.readF32();else if(t===203)e=this.readF64();else if(t===204)e=this.readU8();else if(t===205)e=this.readU16();else if(t===206)e=this.readU32();else if(t===207)this.useBigInt64?e=this.readU64AsBigInt():e=this.readU64();else if(t===208)e=this.readI8();else if(t===209)e=this.readI16();else if(t===210)e=this.readI32();else if(t===211)this.useBigInt64?e=this.readI64AsBigInt():e=this.readI64();else if(t===217){let r=this.lookU8();e=this.decodeString(r,1)}else if(t===218){let r=this.lookU16();e=this.decodeString(r,2)}else if(t===219){let r=this.lookU32();e=this.decodeString(r,4)}else if(t===220){let r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue t}else e=[]}else if(t===221){let r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue t}else e=[]}else if(t===222){let r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue t}else e={}}else if(t===223){let r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue t}else e={}}else if(t===196){let r=this.lookU8();e=this.decodeBinary(r,1)}else if(t===197){let r=this.lookU16();e=this.decodeBinary(r,2)}else if(t===198){let r=this.lookU32();e=this.decodeBinary(r,4)}else if(t===212)e=this.decodeExtension(1,0);else if(t===213)e=this.decodeExtension(2,0);else if(t===214)e=this.decodeExtension(4,0);else if(t===215)e=this.decodeExtension(8,0);else if(t===216)e=this.decodeExtension(16,0);else if(t===199){let r=this.lookU8();e=this.decodeExtension(r,1)}else if(t===200){let r=this.lookU16();e=this.decodeExtension(r,2)}else if(t===201){let r=this.lookU32();e=this.decodeExtension(r,4)}else throw new Ve(`Unrecognized type byte: ${Ic(t)}`);this.complete();let i=this.stack;for(;i.length>0;){let r=i.top();if(r.type===xp)if(r.array[r.position]=e,r.position++,r.position===r.size)e=r.array,i.release(r);else continue t;else if(r.type===go){if(e==="__proto__")throw new Ve("The key __proto__ is not allowed");r.key=this.mapKeyConverter(e),r.type=O1;continue t}else if(r.map[r.key]=e,r.readCount++,r.readCount===r.size)e=r.map,i.release(r);else{r.key=null,r.type=go;continue t}}return e}}readHeadByte(){return this.headByte===mo&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=mo}readArraySize(){let t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ve(`Unrecognized array type byte: ${Ic(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ve(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ve(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,e){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,e):this.decodeBinary(t,e)}decodeUtf8String(t,e){if(t>this.maxStrLength)throw new Ve(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+e+t)throw L1;let i=this.pos+e,r;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?r=this.keyDecoder.decode(this.bytes,i,t):r=R1(this.bytes,i,t),this.pos+=e+t,r}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===go:!1}decodeBinary(t,e){if(t>this.maxBinLength)throw new Ve(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+e))throw L1;let i=this.pos+e,r=this.bytes.subarray(i,i+t);return this.pos+=e+t,r}decodeExtension(t,e){if(t>this.maxExtLength)throw new Ve(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);let i=this.view.getInt8(this.pos+e),r=this.decodeBinary(t,e+1);return this.extensionCodec.decode(r,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){let t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){let t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){let t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){let t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){let t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){let t=D1(this.view,this.pos);return this.pos+=8,t}readI64(){let t=Pc(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){let t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){let t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){let t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){let t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function Rp(n,t){return new zc(t).decode(n)}B();B();var Cp={STROKE_POINTS_45:"strokePoints45",STROKE_POINTS_NON_OPTIONAL_ANGLES:"strokePointsNonOptionalAngles"},yo={KEY_POINTS:"keyPoints",GL_POSITION:"glPosition"},De={OBJECTS:"$objects",TOP:"$top",ROOT:"root",ROOT_GROUP_LAYERS:"rootGroupLayers",NS_OBJECTS:"NS.objects",GROUP_ITEMS:"groupItems"},N1=4;B();B();var $e=Object.freeze({r:0,g:0,b:0,a:1}),un=2,Dp=Object.freeze({x:100,y:100}),Hr=1e-4;function fR(n){return Math.abs(n.a-1)<Hr&&Math.abs(n.b)<Hr&&Math.abs(n.c)<Hr&&Math.abs(n.d-1)<Hr&&Math.abs(n.tx)<Hr&&Math.abs(n.ty)<Hr}function Hc(n){if(n.length!==64)return;let t=new DataView(n.buffer,n.byteOffset,64),e={a:t.getFloat32(0,!0),b:t.getFloat32(4,!0),c:t.getFloat32(16,!0),d:t.getFloat32(20,!0),tx:t.getFloat32(48,!0),ty:t.getFloat32(52,!0)};return fR(e)?void 0:e}B();function jc(n){return n.byteOffset%4!==0?new Uint8Array(n):n}function Me(n){return n&&typeof n=="object"&&("data"in n||"UID"in n)}function Le(n){if(n.UID!==void 0)return n.UID;if(n.data!==void 0)return n.data;throw new Error("Invalid UID object")}function pR(n){let t=jc(n),e=new Float32Array(t.buffer,t.byteOffset,t.byteLength/4),i=[];for(let r=0;r<e.length;r+=N1)i.push({x:e[r],y:e[r+1]});return i}function mR(n){if(n.byteLength!==8)return null;let t=new DataView(n.buffer,n.byteOffset,n.byteLength);return{x:t.getFloat32(0,!0),y:t.getFloat32(4,!0)}}function B1(n){let t=n.match(/\{([^,]+),\s*([^}]+)\}/);return t?{x:parseFloat(t[1]),y:parseFloat(t[2])}:null}function gR(n,t){if(!("brushProperties"in n))return un;let e=n.brushProperties;if(!Me(e))return un;let i=t[Le(e)];if(!i||!("brushWidth"in i))return un;let r=i.brushWidth;return typeof r=="number"?r:un}function Mp(n){if(!("diSavedTransform"in n))return;let t=n.diSavedTransform;if(!(t instanceof Uint8Array)||t.length<64){console.warn("Transform data is not valid Uint8Array or too short");return}return Hc(t)}function yR(n,t){if(!("brushProperties"in n))return{...$e};let e=n.brushProperties;if(!Me(e))return{...$e};let i=t[Le(e)];if(!i||!("brushColor"in i))return{...$e};let r=i.brushColor;if(!Me(r))return{...$e};let a=t[Le(r)];if(!a)return{...$e};let s=typeof a.UIRed=="number"?a.UIRed:0,o=typeof a.UIGreen=="number"?a.UIGreen:0,l=typeof a.UIBlue=="number"?a.UIBlue:0,c=typeof a.UIAlpha=="number"?a.UIAlpha:1;return{r:s,g:o,b:l,a:c}}function vR(n,t){if(!("imageIdentifier"in n))return null;let e=n.imageIdentifier;if(!Me(e))return null;let i=t[Le(e)];if(typeof i!="string")return null;let r={...Dp};if("size"in n){let o=n.size;if(Me(o)){let l=t[Le(o)];if(typeof l=="string"){let c=B1(l);c&&(r=c)}}}let a=Mp(n),s={x:a?.tx??0,y:a?.ty??0};return{uuid:i,position:s,size:r,transform:a}}function bR(n,t){if(!("resourceIdentifier"in n))return null;let e=n.resourceIdentifier;if(!Me(e))return null;let i=t[Le(e)];if(typeof i!="string")return null;let r=0;"page"in n&&typeof n.page=="number"&&(r=n.page-1);let a={...Dp};if("size"in n){let l=n.size;if(Me(l)){let c=t[Le(l)];if(typeof c=="string"){let u=B1(c);u&&(a=u)}}}let s=Mp(n),o={x:s?.tx??0,y:s?.ty??0};return{uuid:i,position:o,size:a,transform:s,pageNumber:r}}function wR(n,t){for(let e of[Cp.STROKE_POINTS_45,Cp.STROKE_POINTS_NON_OPTIONAL_ANGLES])if(e in n){let i=n[e];if(Me(i)){let r=t[Le(i)];if(r instanceof Uint8Array)try{return pR(r)}catch(a){console.warn(`Failed to decode ${e}:`,a)}}}if(yo.KEY_POINTS in n){let e=n[yo.KEY_POINTS];if(Me(e)){let r=t[Le(e)]?.[De.NS_OBJECTS];if(Array.isArray(r)){let a=[];for(let s of r)if(Me(s)){let o=t[Le(s)];if(o&&yo.GL_POSITION in o){let l=o[yo.GL_POSITION];if(l instanceof Uint8Array){let c=mR(l);c&&a.push(c)}}}if(a.length>0)return a}}}return null}function k1(n){if(!n[De.OBJECTS]||!n[De.TOP])if(n[De.ROOT])n={[De.TOP]:{[De.ROOT]:n}};else throw new Error("Invalid plist structure: missing $objects and $top, and no root found");let t=n[De.OBJECTS],e=n[De.TOP]?.[De.ROOT];if(!e)throw new Error("Invalid plist structure: no root in $top");let r=(Me(e)?t[Le(e)]:e)[De.ROOT_GROUP_LAYERS],s=(Me(r)?t[Le(r)]:r)[De.NS_OBJECTS];if(!Array.isArray(s))throw new Error("Invalid plist structure: groupItems is not an array");let o=[],l=[];for(let c of s){let u=Me(c)?t[Le(c)]:c;if(!u||!(De.GROUP_ITEMS in u))continue;let h=u[De.GROUP_ITEMS],f=(Me(h)?t[Le(h)]:h)?.[De.NS_OBJECTS];if(Array.isArray(f))for(let y of f){let g=Me(y)?t[Le(y)]:y;if(!g)continue;let w=vR(g,t);if(w){l.push(w);continue}let p=bR(g,t);if(p){l.push(p);continue}let m=wR(g,t);if(m&&m.length>0){let b=gR(g,t),E=yR(g,t),A=Mp(g),T=g.closed===!0;o.push({points:m,width:b,color:E,transform:A,closed:T})}}}return{strokes:o,images:l}}B();var SR=typeof window<"u"&&(new URLSearchParams(window.location.search).get("debug")==="true"||window.__MSGPACK_DEBUG===!0);function hn(...n){SR&&console.log("[MessagePack]",...n)}function ER(n){if(n.length!==64){hn("Transform buffer is not 64 bytes:",n.length);return}return Hc(n)}function AR(n,t){if(n.length!==16)return hn("Color buffer is not 16 bytes:",n.length),{...$e};let e=new DataView(n.buffer,n.byteOffset,16),i=e.getFloat32(0,!0),r=e.getFloat32(4,!0),a=e.getFloat32(8,!0),s=e.getFloat32(12,!0);return t!==void 0&&(s*=t),{r:i,g:r,b:a,a:s}}function xR(n){let e=Math.floor(n.length/16),i=[],r=jc(n),a=new DataView(r.buffer,r.byteOffset,r.byteLength);for(let s=0;s<e;s++){let o=s*16,l=a.getFloat32(o,!0),c=a.getFloat32(o+4,!0),h=a.getUint16(o+8,!0)/65535;i.push({x:l,y:c,pressure:h})}return i}function _R(n){try{if(!Array.isArray(n))return{color:{...$e},width:un};let t=n[1];if(!Array.isArray(t))return{color:{...$e},width:un};let e=t[1];if(!Array.isArray(e))return{color:{...$e},width:un};let i=e[1];if(!Array.isArray(i))return{color:{...$e},width:un};let r=i[2],a=typeof i[3]=="number"?i[3]:1,s={...$e};r&&r.data instanceof Uint8Array&&r.data.length===16&&(s=AR(r.data,a));let o=typeof e[3]=="number"?e[3]:un,l;if(n.length>7){let c=n[7];c&&c.data instanceof Uint8Array&&c.data.length===64&&(l=ER(c.data))}return{color:s,width:o,transform:l}}catch(t){return hn("Error extracting brush properties:",t),{color:{...$e},width:un}}}function TR(n){try{if(!Array.isArray(n)||n.length<2||n[0]!==4)return null;let t=n[1];if(!Array.isArray(t)||t.length<2)return null;let e=t[1];if(!Array.isArray(e))return null;if(e[0]!==6)return hn("Not a stroke item, type:",e[0]),null;let i=e[1],{color:r,transform:a}=_R(i),s=typeof e[3]=="number"?e[3]:un,o=e[17];if(!(o instanceof Uint8Array))return hn("No points buffer found at index 17"),null;let l=xR(o);if(l.length===0)return hn("No points decoded"),null;let c=e[5]===!0;return{points:l,width:s,color:r,transform:a,closed:c}}catch(t){return hn("Error processing stroke item:",t),null}}function P1(n){if(hn("Parsing MessagePack tree data"),!Array.isArray(n)||n.length<2)throw new Error("Invalid tree.pack structure: expected [version, data]");let t=n[0],e=n[1];hn("Format version:",t),hn("Root data structure length:",Array.isArray(e)?e.length:"N/A");let i=e[4];if(!Array.isArray(i))throw new Error("Invalid tree.pack structure: no layers found at rootData[4]");hn("Number of layers:",i.length);let r=[];for(let s of i){if(!Array.isArray(s)||s.length<3)continue;let o=s[0],l=s[2];if(hn(`Processing layer type ${o}, items:`,Array.isArray(l)?l.length:"N/A"),!!Array.isArray(l))for(let c of l){let u=TR(c);u&&r.push(u)}}return hn(`Found ${r.length} strokes total`),{strokes:r,images:[]}}var Op=j1();Op.maxObjectCount=1e6;var Za=class{detectFormat(t){return t.file("tree.pack")?"messagepack":"plist"}async processConceptFile(t){let e=t.name.toLowerCase();if(!e.endsWith(".concept")&&!e.endsWith(".concepts"))throw new Error("Please select a .concept or .concepts file");let i=await t.arrayBuffer(),r=await G1.loadAsync(i),a=this.detectFormat(r),s;return a==="messagepack"?s=await this.processMessagePackFormat(r):s=await this.processPlistFormat(r),await this.loadImportedImages(r,s),s}async processPlistFormat(t){let e=t.file("Strokes.plist");if(!e)throw new Error("Strokes.plist not found in .concept file");let i=await e.async("uint8array"),r=await Op.parseBuffer(z.Buffer.from(i));if(!r||!Array.isArray(r))throw new Error("Failed to parse Strokes.plist");let a=r[0];return k1(a)}async processMessagePackFormat(t){let e=t.file("tree.pack");if(!e)throw new Error("tree.pack not found in .concepts file");let i=await e.async("uint8array"),r=Rp(i);return P1(r)}async loadImportedImages(t,e){if(!t.folder("ImportedImages"))return;let r=e.images.map(async a=>{let s=["jpeg","jpg","png","gif","webp","pdf"];for(let o of s){let l=t.file(`ImportedImages/${a.uuid}.${o}`);if(l){let c=await l.async("uint8array"),u=btoa(Array.from(c).map(d=>String.fromCharCode(d)).join("")),h=o==="pdf"?"application/pdf":`image/${o}`;a.imageData=`data:${h};base64,${u}`;break}}});await Promise.all(r)}setupDragAndDrop(t,e,i){["dragenter","dragover","dragleave","drop"].forEach(r=>{t.addEventListener(r,a=>{a.preventDefault(),a.stopPropagation()})}),["dragenter","dragover"].forEach(r=>{t.addEventListener(r,()=>{t.classList.add("drag-over")})}),["dragleave","drop"].forEach(r=>{t.addEventListener(r,()=>{t.classList.remove("drag-over")})}),t.addEventListener("drop",async r=>{let a=r.dataTransfer?.files;if(!a||a.length===0)return;let s=a[0];try{let o=await this.processConceptFile(s);e(o)}catch(o){i(o instanceof Error?o:new Error(String(o)))}})}setupFileInput(t,e,i){t.addEventListener("change",async()=>{let r=t.files;if(!r||r.length===0)return;let a=r[0];try{let s=await this.processConceptFile(a);e(s)}catch(s){i(s instanceof Error?s:new Error(String(s)))}})}async processConceptFileWithPlists(t){let e=await this.processConceptFile(t),i=await t.arrayBuffer(),r=await G1.loadAsync(i),a={strokes:null,drawing:null,resources:null,metadata:null},s=async o=>{let l=r.file(o);if(!l)return console.warn(`${o} not found in .concept file`),null;try{let c=await l.async("uint8array");return(await Op.parseBuffer(z.Buffer.from(c)))[0]}catch(c){return console.error(`Failed to parse ${o}:`,c),null}};return[a.strokes,a.drawing,a.resources,a.metadata]=await Promise.all([s("Strokes.plist"),s("Drawing.plist"),s("Resources.plist"),s("metadata.plist")]),{data:e,plists:a}}};var Np=new Za;function Vc(){let n=(0,Yc.useCallback)(async i=>Np.processConceptFile(i),[]),t=(0,Yc.useCallback)((i,r,a)=>{i&&Np.setupDragAndDrop(i,r,a)},[]),e=(0,Yc.useCallback)((i,r,a)=>{i&&Np.setupFileInput(i,r,a)},[]);return{processFile:n,setupDragAndDrop:t,setupFileInput:e}}B();B();function $c(n){return new Promise((t,e)=>{n.oncomplete=n.onsuccess=()=>t(n.result),n.onabort=n.onerror=()=>e(n.error)})}function NR(n,t){let e,i=()=>{if(e)return e;let r=indexedDB.open(n);return r.onupgradeneeded=()=>r.result.createObjectStore(t),e=$c(r),e.then(a=>{a.onclose=()=>e=void 0},()=>{}),e};return(r,a)=>i().then(s=>a(s.transaction(t,r).objectStore(t)))}var Bp;function kp(){return Bp||(Bp=NR("keyval-store","keyval")),Bp}function Qa(n,t=kp()){return t("readonly",e=>$c(e.get(n)))}function or(n,t,e=kp()){return e("readwrite",i=>(i.put(t,n),$c(i.transaction)))}function Pp(n,t=kp()){return t("readwrite",e=>(e.delete(n),$c(e.transaction)))}var Xc="concepts-recent-files",BR=10;function kR(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Y1(n){return{...n,data:Array.from(new Uint8Array(n.data))}}function PR(n){return{...n,data:new Uint8Array(n.data).buffer}}async function qc(){try{let n=await Qa(Xc);return n?n.map(PR).sort((t,e)=>e.lastOpened-t.lastOpened):[]}catch(n){return console.error("Failed to get recent files:",n),[]}}async function V1(n,t){try{let e=await qc(),i=e.findIndex(a=>a.name===n);if(i!==-1)e[i].data=t,e[i].size=t.byteLength,e[i].lastOpened=Date.now();else{let a={id:kR(),name:n,data:t,size:t.byteLength,lastOpened:Date.now()};e.unshift(a)}let r=e.slice(0,BR);await or(Xc,r.map(Y1))}catch(e){throw console.error("Failed to add recent file:",e),e}}async function $1(n){try{let e=(await qc()).filter(i=>i.id!==n);await or(Xc,e.map(Y1))}catch(t){throw console.error("Failed to remove recent file:",t),t}}async function X1(){try{await or(Xc,[])}catch(n){throw console.error("Failed to clear recent files:",n),n}}function q1(n){return n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}function K1(n){let t=new Date(n),i=new Date().getTime()-t.getTime(),r=Math.floor(i/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:t.toLocaleDateString()}B();var vo=tt(It());var le=tt(zt()),UR=new Za;function J1(){let n=Ce(),[t,e]=(0,vo.useState)([]),[i,r]=(0,vo.useState)(!0),a=async()=>{let c=await qc();e(c),r(!1)};(0,vo.useEffect)(()=>{a()},[]);let s=async c=>{try{let u=new Blob([c.data]),h=new File([u],c.name,{type:"application/octet-stream"}),d=await UR.processConceptFile(h);n("/viewer",{state:{data:d}})}catch(u){console.error("Failed to open recent file:",u)}},o=async(c,u)=>{c.stopPropagation(),await $1(u),a()},l=async()=>{await X1(),a()};return i||t.length===0?null:(0,le.jsxs)("div",{className:"recent-files",children:[(0,le.jsxs)("div",{className:"recent-files-header",children:[(0,le.jsx)("h3",{children:"Recent Files"}),(0,le.jsx)("button",{className:"clear-all-button",onClick:l,children:"Clear All"})]}),(0,le.jsx)("div",{className:"recent-files-list",children:t.map(c=>(0,le.jsxs)("div",{className:"recent-file-item",onClick:()=>s(c),children:[(0,le.jsx)("div",{className:"recent-file-icon",children:(0,le.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,le.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,le.jsx)("polyline",{points:"14 2 14 8 20 8"})]})}),(0,le.jsxs)("div",{className:"recent-file-info",children:[(0,le.jsx)("span",{className:"recent-file-name",children:c.name}),(0,le.jsxs)("span",{className:"recent-file-meta",children:[q1(c.size)," \xB7 ",K1(c.lastOpened)]})]}),(0,le.jsx)("button",{className:"recent-file-remove",onClick:u=>o(u,c.id),title:"Remove from recent files",children:(0,le.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,le.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,le.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},c.id))})]})}var Ht=tt(zt());function tS({onBrowseDirectory:n,browseError:t}){let e=Ce(),{processFile:i}=Vc(),[r,a]=(0,Zn.useState)(null),[s,o]=(0,Zn.useState)(0),l=(0,Zn.useRef)(null),c=(0,Zn.useRef)(null),u=(0,Zn.useCallback)(async h=>{try{let d=await h.arrayBuffer();await V1(h.name,d),o(y=>y+1);let f=await i(h);a({message:`Loading ${f.strokes.length} strokes...`,type:"success"}),e("/viewer",{state:{data:f}})}catch(d){a({message:`Error: ${d instanceof Error?d.message:String(d)}`,type:"error"})}},[i,e]);return(0,Zn.useEffect)(()=>{let h=l.current,d=c.current;if(!h||!d)return;let f=m=>{m.preventDefault(),m.stopPropagation()},y=()=>h.classList.add("drag-over"),g=()=>h.classList.remove("drag-over"),w=m=>{g();let b=m.dataTransfer?.files;b&&b.length>0&&u(b[0])},p=()=>{let m=d.files;m&&m.length>0&&u(m[0])};return["dragenter","dragover","dragleave","drop"].forEach(m=>{h.addEventListener(m,f)}),["dragenter","dragover"].forEach(m=>{h.addEventListener(m,y)}),["dragleave","drop"].forEach(m=>{h.addEventListener(m,g)}),h.addEventListener("drop",w),d.addEventListener("change",p),()=>{["dragenter","dragover","dragleave","drop"].forEach(m=>{h.removeEventListener(m,f)}),["dragenter","dragover"].forEach(m=>{h.removeEventListener(m,y)}),["dragleave","drop"].forEach(m=>{h.removeEventListener(m,g)}),h.removeEventListener("drop",w),d.removeEventListener("change",p)}},[u]),(0,Ht.jsxs)(Ht.Fragment,{children:[(0,Ht.jsx)("div",{ref:l,id:"drop-zone",className:"drop-zone",children:(0,Ht.jsxs)("div",{className:"drop-zone-content",children:[(0,Ht.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Ht.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,Ht.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,Ht.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),(0,Ht.jsx)("h2",{children:"Drop .concept or .concepts file here"}),(0,Ht.jsx)("p",{children:"or"}),(0,Ht.jsx)("label",{htmlFor:"file-input",className:"file-input-label",children:"Choose File"}),(0,Ht.jsx)("input",{ref:c,type:"file",id:"file-input",accept:".concept,.concepts",style:{display:"none"}})]})}),n&&(0,Ht.jsxs)("div",{className:"browse-directory-section",children:[(0,Ht.jsx)("p",{className:"browse-hint",children:"Or browse your iCloud Concepts folder"}),(0,Ht.jsxs)("button",{className:"button secondary",onClick:n,children:[(0,Ht.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,Ht.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),"Select Folder"]}),t&&(0,Ht.jsx)("div",{className:"status error",children:t})]}),(0,Ht.jsx)(J1,{},s),r&&(0,Ht.jsx)("div",{className:`status ${r.type}`,children:r.message})]})}B();var Fp="concepts-root-directory-handle";function eS(){return"showDirectoryPicker"in window}async function zR(n){let t={mode:"read"};return await n.queryPermission(t)==="granted"||await n.requestPermission(t)==="granted"}async function Zc(n){try{await or(Fp,n)}catch(t){throw console.error("Failed to save directory handle:",t),t}}async function Qc(){try{let n=await Qa(Fp);return n?await zR(n)?n:(await Wc(),null):null}catch(n){return console.error("Failed to restore directory handle:",n),await Wc(),null}}async function Wc(){localStorage.removeItem("concepts-gallery-path");try{await Pp(Fp)}catch(n){console.error("Failed to clear directory handle:",n)}}async function nS(n,t){let e=n;for(let i of t)try{e=await e.getDirectoryHandle(i)}catch{throw new Error(`Failed to navigate to directory: ${t.join("/")}`)}return e}var ot=tt(zt());function iS(){let n=Ce(),[t,e]=(0,Ip.useState)(!1),[i,r]=(0,Ip.useState)(null);return(0,ot.jsxs)("div",{className:"container",children:[(0,ot.jsxs)("header",{children:[(0,ot.jsx)(Wn,{to:"/",children:(0,ot.jsx)("img",{src:"favicon.png",alt:"Logo",className:"header-logo"})}),(0,ot.jsxs)("div",{className:"header-text",children:[(0,ot.jsx)("h1",{children:"Concepts File Viewer"}),(0,ot.jsx)("p",{children:"View Concepts app drawings in your browser"})]})]}),(0,ot.jsxs)("div",{className:"guide-section",children:[(0,ot.jsxs)("button",{className:"guide-toggle",onClick:()=>e(!t),children:[(0,ot.jsx)("span",{children:"How do I get .concepts files?"}),(0,ot.jsx)("svg",{className:`guide-chevron ${t?"expanded":""}`,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,ot.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),t&&(0,ot.jsxs)("div",{className:"guide-content",children:[(0,ot.jsxs)("div",{className:"guide-column",children:[(0,ot.jsx)("h3",{children:"Drop or Choose File"}),(0,ot.jsx)("p",{children:"Export a drawing from the Concepts app:"}),(0,ot.jsxs)("ol",{children:[(0,ot.jsx)("li",{children:"Open your drawing in Concepts"}),(0,ot.jsxs)("li",{children:["Tap the ",(0,ot.jsx)("strong",{children:"Share"})," button"]}),(0,ot.jsxs)("li",{children:["Select ",(0,ot.jsx)("strong",{children:"Export"})," \u2192 ",(0,ot.jsx)("strong",{children:"Concepts"})]}),(0,ot.jsx)("li",{children:"Save to Files or AirDrop to your computer"})]})]}),(0,ot.jsxs)("div",{className:"guide-column",children:[(0,ot.jsx)("h3",{children:"Browse Directory"}),(0,ot.jsx)("p",{children:"Access your full Concepts library via iCloud:"}),(0,ot.jsxs)("ol",{children:[(0,ot.jsxs)("li",{children:["Enable ",(0,ot.jsx)("strong",{children:"iCloud Drive"})," sync on your device"]}),(0,ot.jsxs)("li",{children:[(0,ot.jsx)("strong",{children:"macOS:"})," Enable iCloud Drive in System Settings \u2192 Apple ID \u2192 iCloud"]}),(0,ot.jsxs)("li",{children:[(0,ot.jsx)("strong",{children:"Windows:"})," Install ",(0,ot.jsx)("a",{href:"https://support.apple.com/en-us/HT204283",target:"_blank",rel:"noopener noreferrer",children:"iCloud for Windows"})]}),(0,ot.jsxs)("li",{children:['Click "Select Folder" and navigate to: ',(0,ot.jsx)("code",{children:"iCloud Drive/Concepts/drawings/"})]})]})]})]})]}),(0,ot.jsx)("div",{className:"main-content",children:(0,ot.jsx)(tS,{onBrowseDirectory:async()=>{if(!eS()){r("Directory browsing requires Chrome or Edge browser.");return}if(r(null),await Qc()){n("/gallery");return}try{let o=await window.showDirectoryPicker({mode:"read"});await Zc(o),localStorage.removeItem("concepts-gallery-path"),n("/gallery")}catch(o){o instanceof Error&&o.name!=="AbortError"&&r(o.message)}},browseError:i})})]})}B();var $o=tt(It());B();var Nn=tt(It());B();B();B();var lu={};lu.d=(n,t)=>{for(var e in t)lu.o(t,e)&&!lu.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};lu.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var Oe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Vp=[.001,0,0,.001,0,0],cu=1.35,HR=.35,AL=HR/cu,fn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},lr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_o="pdfjs_internal_editor_",it={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},jR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},uu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ie={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var ts={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var Xu={ERRORS:0,WARNINGS:1,INFOS:5},To={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Jc={moveTo:0,lineTo:1,curveTo:2,closePath:3},GR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},qu=Xu.WARNINGS;function YR(n){Number.isInteger(n)&&(qu=n)}function VR(){return qu}function Ku(n){qu>=Xu.INFOS&&console.info(`Info: ${n}`)}function et(n){qu>=Xu.WARNINGS&&console.warn(`Warning: ${n}`)}function Ct(n){throw new Error(n)}function gt(n,t){n||Ct(t)}function $R(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AS(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=WR(n)}catch{}let i=t?URL.parse(n,t):URL.parse(n);return $R(i)?i:null}function xS(n,t,e=!1){let i=URL.parse(n);return i?(i.hash=t,i.href):e&&AS(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function lt(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}var qr=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}(),hu=class extends qr{constructor(t,e){super(t,"PasswordException"),this.code=e}},xo=class extends qr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},Ro=class extends qr{constructor(t){super(t,"InvalidPDFException")}},as=class extends qr{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}},$p=class extends qr{constructor(t){super(t,"FormatError")}},ti=class extends qr{constructor(t){super(t,"AbortException")}};function _S(n){(typeof n!="object"||n?.length===void 0)&&Ct("Invalid argument for bytesToString");let t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);let i=[];for(let r=0;r<t;r+=e){let a=Math.min(r+e,t),s=n.subarray(r,a);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function jo(n){typeof n!="string"&&Ct("Invalid argument for stringToBytes");let t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function XR(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function qR(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function KR(){try{return new Function(""),!0}catch{return!1}}var ce=class{static get isLittleEndian(){return lt(this,"isLittleEndian",qR())}static get isEvalSupported(){return lt(this,"isEvalSupported",KR())}static get isOffscreenCanvasSupported(){return lt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return lt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){let{platform:t,userAgent:e}=navigator;return lt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return lt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},Up=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),j=class{static makeHexColor(t,e,i){return`#${Up[t]}${Up[e]}${Up[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){let r=t[i],a=t[i+1];t[i]=r*e[0]+a*e[2]+e[4],t[i+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){let r=e[0],a=e[1],s=e[2],o=e[3],l=e[4],c=e[5];for(let u=0;u<6;u+=2){let h=t[i+u],d=t[i+u+1];t[i+u]=h*r+d*s+l,t[i+u+1]=h*a+d*o+c}}static applyInverseTransform(t,e){let i=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,i){let r=e[0],a=e[1],s=e[2],o=e[3],l=e[4],c=e[5],u=t[0],h=t[1],d=t[2],f=t[3],y=r*u+l,g=y,w=r*d+l,p=w,m=o*h+c,b=m,E=o*f+c,A=E;if(a!==0||s!==0){let T=a*u,x=a*d,D=s*h,R=s*f;y+=D,p+=D,w+=R,g+=R,m+=T,A+=T,E+=x,b+=x}i[0]=Math.min(i[0],y,w,g,p),i[1]=Math.min(i[1],m,E,b,A),i[2]=Math.max(i[2],y,w,g,p),i[3]=Math.max(i[3],m,E,b,A)}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){let i=t[0],r=t[1],a=t[2],s=t[3],o=i**2+r**2,l=i*a+r*s,c=a**2+s**2,u=(o+c)/2,h=Math.sqrt(u**2-(o*c-l**2));e[0]=Math.sqrt(u+h||1),e[1]=Math.sqrt(u-h||1)}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;let a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>s?null:[i,a,r,s]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,a){a[0]=Math.min(a[0],t,i),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,i),a[3]=Math.max(a[3],e,r)}static#t(t,e,i,r,a,s,o,l,c,u){if(c<=0||c>=1)return;let h=1-c,d=c*c,f=d*c,y=h*(h*(h*t+3*c*e)+3*d*i)+f*r,g=h*(h*(h*a+3*c*s)+3*d*o)+f*l;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],g)}static#e(t,e,i,r,a,s,o,l,c,u,h,d){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,e,i,r,a,s,o,l,-h/u,d);return}let f=u**2-4*h*c;if(f<0)return;let y=Math.sqrt(f),g=2*c;this.#t(t,e,i,r,a,s,o,l,(-u+y)/g,d),this.#t(t,e,i,r,a,s,o,l,(-u-y)/g,d)}static bezierBoundingBox(t,e,i,r,a,s,o,l,c){c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],e,l),this.#e(t,i,a,o,e,r,s,l,3*(-t+3*(i-a)+o),6*(t-2*i+a),3*(i-t),c),this.#e(t,i,a,o,e,r,s,l,3*(-e+3*(r-s)+l),6*(e-2*r+s),3*(r-e),c)}};function WR(n){return decodeURIComponent(escape(n))}var zp=null,rS=null;function ZR(n){return zp||(zp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rS=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(zp,(t,e,i)=>e?e.normalize("NFKC"):rS.get(i))}function TS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);return crypto.getRandomValues(n),_S(n)}var xg="pdfjs_internal_id_";function QR(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;let[i,r,...a]=e;if(!n(i)&&!Number.isInteger(i)||!t(r))return!1;let s=a.length,o=!0;switch(r.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(let l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Ne(n,t,e){return Math.min(Math.max(n,t),e)}function RS(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(_S(n))}function JR(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):jo(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});var Co=class n{static textContent(t){let e=[],i={items:e,styles:Object.create(null)};function r(a){if(!a)return;let s=null,o=a.name;if(o==="#text")s=a.value;else if(n.shouldBuildText(o))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&e.push({str:s}),!!a.children)for(let l of a.children)r(l)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},du=class{static setupStorage(t,e,i,r,a){let s=r.getValue(e,{value:null});switch(i.name){case"textarea":if(s.value!==null&&(t.textContent=s.value),a==="print")break;t.addEventListener("input",o=>{r.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(s.value===i.attributes.xfaOn?t.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",o=>{r.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&t.setAttribute("value",s.value),a==="print")break;t.addEventListener("input",o=>{r.setValue(e,{value:o.target.value})})}break;case"select":if(s.value!==null){t.setAttribute("value",s.value);for(let o of i.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{let l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){let{attributes:s}=e,o=t instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${r}`);for(let[l,c]of Object.entries(s))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&a.addLinkAttributes(t,s.href,s.newWindow),i&&s.dataId&&this.setupStorage(t,s.dataId,e,i)}static render(t){let e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:a,linkService:i});let o=a!=="richText",l=t.div;if(l.append(s),t.viewport){let h=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=h}o&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(r.children.length===0){if(r.value){let h=document.createTextNode(r.value);s.append(h),o&&Co.shouldBuildText(r.name)&&c.push(h)}return{textDivs:c}}let u=[[r,-1,s]];for(;u.length>0;){let[h,d,f]=u.at(-1);if(d+1===h.children.length){u.pop();continue}let y=h.children[++u.at(-1)[1]];if(y===null)continue;let{name:g}=y;if(g==="#text"){let p=document.createTextNode(y.value);c.push(p),f.append(p);continue}let w=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,g):document.createElement(g);if(f.append(w),y.attributes&&this.setAttributes({html:w,element:y,storage:e,intent:a,linkService:i}),y.children?.length>0)u.push([y,-1,w]);else if(y.value){let p=document.createTextNode(y.value);o&&Co.shouldBuildText(g)&&c.push(p),w.append(p)}}for(let h of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},xi="http://www.w3.org/2000/svg",ur=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};async function Go(n,t="text"){if(Ao(n,document.baseURI)){let e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{let r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}var Do=class n{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=s,i*=e;let l=(t[2]+t[0])/2,c=(t[3]+t[1])/2,u,h,d,f;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let y,g,w,p;u===0?(y=Math.abs(c-t[1])*i+a,g=Math.abs(l-t[0])*i+s,w=(t[3]-t[1])*i,p=(t[2]-t[0])*i):(y=Math.abs(l-t[0])*i+a,g=Math.abs(c-t[1])*i+s,w=(t[2]-t[0])*i,p=(t[3]-t[1])*i),this.transform=[u*i,h*i,d*i,f*i,y-u*i*l-d*i*c,g-h*i*l-f*i*c],this.width=w,this.height=p}get rawDims(){let t=this.viewBox;return lt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new n({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){let i=[t,e];return j.applyTransform(i,this.transform),i}convertToViewportRectangle(t){let e=[t[0],t[1]];j.applyTransform(e,this.transform);let i=[t[2],t[3]];return j.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){let i=[t,e];return j.applyInverseTransform(i,this.transform),i}},Mo=class extends qr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Wu(n){let t=n.length,e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function _g(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function tC(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function eC(n,t="document.pdf"){if(typeof n!="string")return t;if(Wu(n))return et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;let r=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},a=/\.pdf$/i,s=i.pathname.split("/").at(-1);if(a.test(s))return r(s);if(i.searchParams.size>0){let o=Array.from(i.searchParams.values()).reverse();for(let c of o)if(a.test(c))return r(c);let l=Array.from(i.searchParams.keys()).reverse();for(let c of l)if(a.test(c))return r(c)}if(i.hash){let l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return r(l[0])}return t}var fu=class{started=Object.create(null);times=[];time(t){t in this.started&&et(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||et(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:i}of this.times)e=Math.max(i.length,e);for(let{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}};function Ao(n,t){let e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function On(n){n.preventDefault()}function Xt(n){n.preventDefault(),n.stopPropagation()}function nC(n){console.log("Deprecated API usage: "+n)}var Lo=class{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#t.exec(t);if(!e)return null;let i=parseInt(e[1],10),r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=u,o+=h):c==="+"&&(s-=u,o-=h),new Date(Date.UTC(i,r,a,s,o,l))}};function iC(n,{scale:t=1,rotation:e=0}){let{width:i,height:r}=n.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Do({viewBox:a,userUnit:1,scale:t,rotation:e})}function Yo(n){if(n.startsWith("#")){let t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(et(`Not a valid color format: "${n}"`),[0,0,0])}function rC(n){let t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(let e of n.keys()){t.style.color=e;let i=window.getComputedStyle(t).color;n.set(e,Yo(i))}t.remove()}function jt(n){let{a:t,b:e,c:i,d:r,e:a,f:s}=n.getTransform();return[t,e,i,r,a,s]}function Qn(n){let{a:t,b:e,c:i,d:r,e:a,f:s}=n.getTransform().invertSelf();return[t,e,i,r,a,s]}function Gr(n,t,e=!1,i=!0){if(t instanceof Do){let{pageWidth:r,pageHeight:a}=t.rawDims,{style:s}=n,o=ce.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${a}px`,u=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!e||t.rotation%180===0?(s.width=u,s.height=h):(s.width=h,s.height=u)}i&&n.setAttribute("data-main-rotation",t.rotation)}var Ti=class n{constructor(){let{pixelRatio:t}=n;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,a=-1){let s=1/0,o=1/0,l=1/0;i=n.capPixels(i,a),i>0&&(s=Math.sqrt(i/(t*e))),r!==-1&&(o=r/t,l=r/e);let c=Math.min(s,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){let i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}},Xp=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],qp=class{static get isDarkMode(){return lt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},Kp=class{static get commentForegroundColor(){let t=document.createElement("span");t.classList.add("comment","sidebar");let{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);let{color:i}=window.getComputedStyle(t);return t.remove(),lt(this,"commentForegroundColor",Yo(i))}};function aC(n,t,e,i){i=Math.min(Math.max(i??1,0),1);let r=255*(1-i);return n=Math.round(n*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[n,t,e]}function aS(n,t){let e=n[0]/255,i=n[1]/255,r=n[2]/255,a=Math.max(e,i,r),s=Math.min(e,i,r),o=(a+s)/2;if(a===s)t[0]=t[1]=0;else{let l=a-s;switch(t[1]=o<.5?l/(a+s):l/(2-a-s),a){case e:t[0]=((i-r)/l+(i<r?6:0))*60;break;case i:t[0]=((r-e)/l+2)*60;break;case r:t[0]=((e-i)/l+4)*60;break}}t[2]=o}function Wp(n,t){let e=n[0],i=n[1],r=n[2],a=(1-Math.abs(2*r-1))*i,s=a*(1-Math.abs(e/60%2-1)),o=r-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+o,t[1]=s+o,t[2]=o;break;case 1:t[0]=s+o,t[1]=a+o,t[2]=o;break;case 2:t[0]=o,t[1]=a+o,t[2]=s+o;break;case 3:t[0]=o,t[1]=s+o,t[2]=a+o;break;case 4:t[0]=s+o,t[1]=o,t[2]=a+o;break;case 5:case 6:t[0]=a+o,t[1]=o,t[2]=s+o;break}}function sS(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function oS(n,t,e){Wp(n,e),e.map(sS);let i=.2126*e[0]+.7152*e[1]+.0722*e[2];Wp(t,e),e.map(sS);let r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}var lS=new Map;function sC(n,t){let e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776,i=lS.get(e);if(i)return i;let r=new Float32Array(9),a=r.subarray(0,3),s=r.subarray(3,6);aS(n,s);let o=r.subarray(6,9);aS(t,o);let l=o[2]<.5,c=l?12:4.5;if(s[2]=l?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),oS(s,o,a)<c){let u,h;l?(u=s[2],h=1):(u=0,h=s[2]);let d=.005;for(;h-u>d;){let f=s[2]=(u+h)/2;l===oS(s,o,a)<c?u=f:h=f}s[2]=l?h:u}return Wp(s,a),i=j.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),lS.set(e,i),i}function CS({html:n,dir:t,className:e},i){let r=document.createDocumentFragment();if(typeof n=="string"){let a=document.createElement("p");a.dir=t||"auto";let s=n.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){let c=s[o];a.append(document.createTextNode(c)),o<l-1&&a.append(document.createElement("br"))}r.append(a)}else du.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}var Zp=class n{#t=null;#e=null;#i;#n=null;#s=null;#r=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,n.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){let t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",On,{signal:e}),t.addEventListener("pointerdown",n.#l,{signal:e}));let i=this.#n=document.createElement("div");i.className="buttons",t.append(i);let r=this.#i.toolbarPosition;if(r){let{style:a}=t,s=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,Xt(t)}#h(t){this.#i._focusEventsAllowed=!0,Xt(t)}#f(t){let e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",On,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown(),this.#r?.shown()}addDeleteButton(){let{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",n.#c[t]),this.#f(i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#g(){let t=document.createElement("div");return t.className="divider",t}async addAltText(t){let e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#s=t}addComment(t,e=null){if(this.#r)return;let i=t.renderForToolbar();if(!i)return;this.#f(i);let r=this.#a=this.#g;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(r,e)):this.#n.append(i,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;let e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){let e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){let r=this.#n.querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},Qp=class{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){let t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");let e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",On,{signal:e});let i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#s(t,e){let i=0,r=0;for(let a of t){let s=a.y+a.height;if(s<i)continue;let o=a.x+(e?a.width:0);if(s>i){r=o,i=s;continue}e?o>r&&(r=o):o<r&&(r=o)}return[e?1-r:r,i]}show(t,e,i){let[r,a]=this.#s(e,i),{style:s}=this.#e||=this.#n();t.append(this.#e),s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,r){let a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);let s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",i);let o=this.#i._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",On,{signal:o}),a.addEventListener("click",r,{signal:o})),this.#t.append(a)}};function DS(n,t,e){for(let i of e)t.addEventListener(i,n[i].bind(n))}var Jp=class{#t=0;get id(){return`${_o}${this.#t++}`}},tm=class n{#t=TS();#e=0;#i=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;let a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return lt(this,"_isSVGFittingCanvas",a)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await Go(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){let a=n._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},s.onload=async()=>{let h=i.svgUrl=s.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=s.onerror=u});s.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){et(r),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){let{lastModified:e,name:i,size:r,type:a}=t;return this.#n(`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){let i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;let e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;let r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){let e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;let e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:i}=e;if(!e.url&&!e.file){let r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}},em=class{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(r&&t(),this.#e)return;let l={cmd:t,undo:e,post:i,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(s&&this.#t[this.#n].type===a){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}let c=this.#n+1;c===this.#i?this.#t.splice(0,1):(this.#n=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;let{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;let{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}},Yr=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=ce.platform;for(let[i,r,a={}]of t)for(let s of i){let o=s.startsWith("mac+");e&&o?(this.callbacks.set(s.slice(4),{callback:r,options:a}),this.allKeys.add(s.split("+").at(-1))):!e&&!o&&(this.callbacks.set(s,{callback:r,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let i=this.callbacks.get(this.#t(e));if(!i)return;let{callback:r,options:{bubbles:a=!1,args:s=[],checker:o=null}}=i;o&&!o(t,e)||(r.bind(t,...s,e)(),a||Xt(e))}},nm=class n{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return rC(t),lt(this,"_colors",t)}convert(t){let e=Yo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[i,r]of this._colors)if(r.every((a,s)=>a===e[s]))return n._colorsMapping.get(i);return e}getHexCode(t){let e=this._colors.get(t);return e?j.makeHexColor(...e):t}},Vr=class n{#t=new AbortController;#e=null;#i=null;#n=new Map;#s=new Map;#r=null;#a=null;#o=null;#c=new em;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#_=null;#A=null;#w=null;#R=null;#E=!1;#x=null;#M=new Jp;#C=!1;#D=!1;#F=!1;#O=null;#B=null;#I=null;#k=null;#Y=null;#T=it.NONE;#S=new Set;#N=null;#U=null;#H=null;#X=null;#$=null;#q={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#V=null;#Q=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=n.prototype,e=s=>s.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),i=(s,{target:o})=>{if(o instanceof HTMLInputElement){let{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return lt(this,"_keyboardManager",new Yr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#V.contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&s.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,i,r,a,s,o,l,c,u,h,d,f,y,g,w){let p=this._signal=this.#t.signal;this.#V=t,this.#Q=e,this.#J=i,this.#r=r,this.#l=a,this.#U=s,this.#$=l,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:p}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),o._on("setpreference",this.onSetPreference.bind(this),{signal:p}),o._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:p}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:p}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:p}),this.#lt(),this.#dt(),this.#et(),this.#a=l.annotationStorage,this.#_=l.filterFactory,this.#H=c,this.#R=u||null,this.#y=h,this.#b=d,this.#v=f,this.#Y=y||null,this.viewParameters={realScale:ur.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1,a?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let t of this.#s.values())t.destroy();this.#s.clear(),this.#n.clear(),this.#m.clear(),this.#k?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#x?.hide(),this.#x=null,this.#I?.destroy(),this.#I=null,this.#i=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#Y}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return lt(this,"hcmFilter",this.#H?this.#_.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return lt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return lt(this,"_highlightColors",this.#R?new Map(this.#R.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){let{_highlightColors:t}=this;if(!t)return lt(this,"highlightColors",null);let e=new Map,i=!!this.#H;for(let[r,a]of t){let s=r.endsWith("_HCM");if(i&&s){e.set(r.replace("_HCM",""),a);continue}!i&&!s&&e.set(r,a)}return lt(this,"highlightColors",e)}get highlightColorNames(){return lt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;let e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#I=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,r){this.#l?.showDialog(this,t,e,i,r)}selectComment(t,e){this.#s.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#s.has(t-1))return;let{resolve:e,promise:i}=Promise.withResolvers(),r=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(let i of this.#s.values()){let{x:r,y:a,width:s,height:o}=i.div.getBoundingClientRect();if(t>=r&&t<=r+s&&e>=a&&e<=a+o)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ur.PDF_TO_CSS_UNITS;for(let e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){let{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(let i of this.#s.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:r,anchorOffset:a,focusNode:s,focusOffset:o}=i,l=i.toString(),u=this.#Z(i).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;i.empty();let d=this.#tt(u),f=this.#T===it.NONE,y=()=>{let g=d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:r,anchorOffset:a,focusNode:s,focusOffset:o,text:l});f&&this.showAllEditors("highlight",!0,!0),e&&g?.editComment()};if(f){this.switchToMode(it.HIGHLIGHT,y);return}y()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){let t=document.getSelection();if(!t||t.isCollapsed)return;let i=this.#Z(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#x||=new Qp(this),this.#x.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;let e=`${_o}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){let i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){let t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#x?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}let{anchorNode:e}=t;if(e===this.#N)return;let r=this.#Z(t).closest(".textLayer");if(!r){this.#N&&(this.#x?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#N=e,this.#L({hasSelectedText:!0}),!(this.#T!==it.HIGHLIGHT&&this.#T!==it.NONE)&&(this.#T===it.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=this.#T===it.HIGHLIGHT?this.#tt(r):null;if(a?.toggleDrawing(),this.#D){let s=new AbortController,o=this.combinedSignal(s),l=c=>{c.type==="pointerup"&&c.button!==0||(s.abort(),a?.toggleDrawing(!0),c.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}else a?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===it.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#w)return;this.#w=new AbortController;let t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let e of this.#S)if(e.div.contains(t)){this.#B=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#B)return;let[t,e]=this.#B;this.#B=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;let t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#nt(){if(this.#d)return;this.#d=new AbortController;let t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(let{type:e}of t.dataTransfer.items)for(let i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let e of t.dataTransfer.items)for(let i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let e=[];for(let i of this.#S){let r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();let{clipboardData:e}=t;for(let a of e.items)for(let s of this.#u)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){et(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();let r=this.currentLayer;try{let a=[];for(let l of i){let c=await r.deserialize(l);if(!c)return;a.push(c)}let s=()=>{for(let l of a)this.#rt(l);this.#at(a)},o=()=>{for(let l of a)l.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){et(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==it.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([i,r])=>this.#q[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#q,t)}),this.#T===it.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#T!==it.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(let e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#s.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,a=!1){if(this.#T!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===it.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===it.NONE){this.setEditingState(!1),this.#pt();for(let s of this.#n.values())s.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(let s of this.#n.values())s.addStandaloneCommentButton();t===it.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(let s of this.#s.values())s.updateMode(t);if(t===it.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(l=>l._editorType)));let s=new Set,o=[];for(let l of this.#n.values()){let{annotationElementId:c,hasComment:u,deleted:h}=l;c&&s.add(c),u&&!h&&o.push(l.getData())}for(let l of this.#i){let{id:c,popupRef:u,contentsObj:h}=l;u&&h?.str&&!s.has(c)&&!this.#g.has(c)&&o.push(l)}this.#l?.showSidebar(o)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(let s of this.#n.values())s.uid===e?(this.setSelected(s),a?s.editComment():r?s.enterInEditMode():s.focus()):s.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case mt.CREATE:this.currentLayer.addNewEditor(e);return;case mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(let i of this.#S)i.updateParams(t,e);else for(let i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(let a of this.#n.values())a.editorType===t&&a.show(e);(this.#X?.get(mt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(let e of this.#s.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;let t=[];for(let e of this.#s.values())t.push(e.enable());await Promise.all(t);for(let e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#C){this.#C=!1;for(let t of this.#s.values())t.disable();for(let t of this.#n.values())t.disable()}}*getEditors(t){for(let e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#k?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#rt(t){let e=this.#s.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(let e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(let a of e)a.remove()},r=()=>{for(let a of e)this.#rt(a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(let e of this.#S)e.unselect();this.#S.clear();for(let e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==it.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(let t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;let[r,a]=this.#j,s=[...this.#S],o=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(let l of s)this.#n.has(l.id)&&(l.translateInPage(r,a),l.translationDone())},undo:()=>{for(let l of s)this.#n.has(l.id)&&(l.translateInPage(-r,-a),l.translationDone())},mustExec:!1})},o);for(let l of s)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(let t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);let t=this.#p;this.#p=null;let e=!1;for(let[{x:r,y:a,pageIndex:s},o]of t)o.newX=r,o.newY=a,o.newPageIndex=s,e||=r!==o.savedX||a!==o.savedY||s!==o.savedPageIndex;if(!e)return!1;let i=(r,a,s,o)=>{if(this.#n.has(r.id)){let l=this.#s.get(o);l?r._setParentAndPosition(l,a,s):(r.pageIndex=o,r.x=a,r.y=s)}};return this.addCommands({cmd:()=>{for(let[r,{newX:a,newY:s,newPageIndex:o}]of t)i(r,a,s,o)},undo:()=>{for(let[r,{savedX:a,savedY:s,savedPageIndex:o}]of t)i(r,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(let i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){let e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==it.NONE}get imageManager(){return lt(this,"imageManager",new tm)}getSelectionBoxes(t){if(!t)return null;let e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;let{x:i,y:r,width:a,height:s}=t.getBoundingClientRect(),o;switch(t.getAttribute("data-main-rotation")){case"90":o=(c,u,h,d)=>({x:(u-r)/s,y:1-(c+h-i)/a,width:d/s,height:h/a});break;case"180":o=(c,u,h,d)=>({x:1-(c+h-i)/a,y:1-(u+d-r)/s,width:h/a,height:d/s});break;case"270":o=(c,u,h,d)=>({x:1-(u+d-r)/s,y:(c-i)/a,width:d/s,height:h/a});break;default:o=(c,u,h,d)=>({x:(c-i)/a,y:(u-r)/s,width:h/a,height:d/s});break}let l=[];for(let c=0,u=e.rangeCount;c<u;c++){let h=e.getRangeAt(c);if(!h.collapsed)for(let{x:d,y:f,width:y,height:g}of h.getClientRects())y===0||g===0||l.push(o(d,f,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){let e=this.#o?.get(t.data.id);if(!e)return;let i=this.#a.getRawValue(e);i&&(this.#T===it.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){let r=this.#k?.get(t);r&&(r.setCanvas(e,i),this.#k.delete(t))}addMissingCanvas(t,e){(this.#k||=new Map).set(t,e)}},pu=class n{#t=null;#e=!1;#i=null;#n=null;#s=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,n.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}async render(){let t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";let e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",n.#f.missing),e.setAttribute("data-l10n-id",n.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=this.#c._uiManager._signal;t.addEventListener("contextmenu",On,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});let r=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#a=!0,r(a))},{signal:i}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){let e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#p(){let t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",n.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",n.#f[`${this.#g}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#s;if(!e){this.#s=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;let r=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}},ns=class{#t=null;#e=null;#i=!1;#n=null;#s=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){let t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){let t=this.#t=document.createElement("button");t.className="annotationCommentButton";let e=this.#n.commentButtonPosition;if(e){let{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;let r=this.#n.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;let t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;let{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:r,y:a,width:s,height:o}=this.#n.parent.boundingClientRect;return[(t-r)/s,(e+i-a)/o]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));let i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",On,{signal:i}),e&&(t.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Xt(a)},{capture:!0,signal:i}),t.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Xt(a)},{capture:!0,signal:i})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});let r=a=>{a.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#i=!0,r(a))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){let e=this.commentPopupPositionInLayer,i,r;if(e)[i,r]=e;else{[i,r]=this.#n.commentButtonPosition;let{width:u,height:h,x:d,y:f}=this.#n;i=d+i*u,r=f+r*h}let a=this.#n.parent.boundingClientRect,{x:s,y:o,width:l,height:c}=a;this.#n._uiManager.editComment(this.#n,s+i*l,o+r*c,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#r=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#s=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}},mu=class n{#t;#e=!1;#i=null;#n;#s;#r;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){this.#t=t,this.#i=i,this.#n=e,this.#s=r,this.#r=a,this.#a=s,this.#d=new AbortController,this.#c=AbortSignal.any([o,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ti.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;let r=this.#o=new AbortController,a=AbortSignal.any([this.#c,r.signal]),s=this.#t,o={capture:!0,signal:a,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};s.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(Xt(c),l(c))},o),s.addEventListener("pointerup",l,o),s.addEventListener("pointercancel",l,o);return}if(!this.#h){this.#h=new AbortController;let r=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,s={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),s);let o=this.#p.bind(this);a.addEventListener("touchend",o,s),a.addEventListener("touchcancel",o,s),s.capture=!0,a.addEventListener("pointerdown",Xt,s),a.addEventListener("pointermove",Xt,s),a.addEventListener("pointercancel",Xt,s),a.addEventListener("pointerup",Xt,s),this.#s?.()}if(Xt(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Xt(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);let{screenX:r,screenY:a}=e,{screenX:s,screenY:o}=i,l=this.#l,{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,f=h-c,y=d-u,g=s-r,w=o-a,p=Math.hypot(g,w)||1,m=Math.hypot(f,y)||1;if(!this.#e&&Math.abs(m-p)<=n.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=a,l.touch1X=s,l.touch1Y=o,!this.#e){this.#e=!0;return}let b=[(r+s)/2,(a+o)/2];this.#r?.(b,m,p)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(Xt(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}},Lt=class n{#t=null;#e=null;#i=null;#n=null;#s=null;#r=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#_=0;#A=0;#w=null;#R=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#x=n._zIndex++;static _borderLineWidth=-1;static _colorManager=new nm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=n.prototype._resizeWithKeyboard,e=Vr.TRANSLATE_SMALL,i=Vr.TRANSLATE_BIG;return lt(this,"_resizerKeyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],n.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;let{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,s];let[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return lt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new im({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(n._l10n??=t,n._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),n._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ct("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){let[a,s]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/s,this.fixAndSetPosition()}_moveAfterPaste(t,e){let[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}#M([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];let{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this,[l,c]=this.getBaseTranslation();s+=l,o+=c;let{style:u}=i;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:i}=n,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[i,r]}=this,{x:a,y:s,width:o,height:l}=this;if(o*=i,l*=r,a*=i,s*=r,this._mustFixPosition)switch(t){case 0:a=Ne(a,0,i-o),s=Ne(s,0,r-l);break;case 90:a=Ne(a,0,i-l),s=Ne(s,o,r);break;case 180:a=Ne(a,o,i),s=Ne(s,l,r);break;case 270:a=Ne(a,l,i),s=Ne(s,0,r-o);break}this.x=a/=i,this.y=s/=r;let[c,u]=this.getBaseTranslation();a+=c,s+=u,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#C(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return n.#C(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return n.#C(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{let[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){let{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let i of t){let r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#O.bind(this,i),{signal:e}),r.addEventListener("contextmenu",On,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();let{isMac:i}=ce.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);let r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];let a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,t),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Xt,{passive:!1,signal:s}),window.addEventListener("contextmenu",On,{signal:s}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let c=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#I()};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}#B(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#d)return;let{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;let a=this.x,s=this.y,o=this.width,l=this.height;a===t&&s===e&&o===i&&l===r||this.addCommands({cmd:this.#B.bind(this,a,s,o,l),undo:this.#B.bind(this,t,e,i,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#k(t,e){let[i,r]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,c=n.MIN_SIZE/i,u=n.MIN_SIZE/r,h=this.#D(this.rotation),d=(Y,V)=>[h[0]*Y+h[2]*V,h[1]*Y+h[3]*V],f=this.#D(360-this.rotation),y=(Y,V)=>[f[0]*Y+f[2]*V,f[1]*Y+f[3]*V],g,w,p=!1,m=!1;switch(t){case"topLeft":p=!0,g=(Y,V)=>[0,0],w=(Y,V)=>[Y,V];break;case"topMiddle":g=(Y,V)=>[Y/2,0],w=(Y,V)=>[Y/2,V];break;case"topRight":p=!0,g=(Y,V)=>[Y,0],w=(Y,V)=>[0,V];break;case"middleRight":m=!0,g=(Y,V)=>[Y,V/2],w=(Y,V)=>[0,V/2];break;case"bottomRight":p=!0,g=(Y,V)=>[Y,V],w=(Y,V)=>[0,0];break;case"bottomMiddle":g=(Y,V)=>[Y/2,V],w=(Y,V)=>[Y/2,0];break;case"bottomLeft":p=!0,g=(Y,V)=>[0,V],w=(Y,V)=>[Y,0];break;case"middleLeft":m=!0,g=(Y,V)=>[0,V/2],w=(Y,V)=>[Y,V/2];break}let b=g(o,l),E=w(o,l),A=d(...E),T=n._round(a+A[0]),x=n._round(s+A[1]),D=1,R=1,L,F;if(e.fromKeyboard)({deltaX:L,deltaY:F}=e);else{let{screenX:Y,screenY:V}=e,[ct,ue]=this.#l;[L,F]=this.screenToPageTranslation(Y-ct,V-ue),this.#l[0]=Y,this.#l[1]=V}if([L,F]=y(L/i,F/r),p){let Y=Math.hypot(o,l);D=R=Math.max(Math.min(Math.hypot(E[0]-b[0]-L,E[1]-b[1]-F)/Y,1/o,1/l),c/o,u/l)}else m?D=Ne(Math.abs(E[0]-b[0]-L),c,1)/o:R=Ne(Math.abs(E[1]-b[1]-F),u,1)/l;let G=n._round(o*D),q=n._round(l*R);A=d(...w(G,q));let Q=T-A[0],rt=x-A[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=G,this.height=q,this.x=Q,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Zp(this),this.div.append(this._editToolbar.render());let{toolbarButtons:t}=this;if(t)for(let[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(pu.initialize(n._l10n),this.#i=new pu(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new ns(this)}addStandaloneCommentButton(){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){let{data:{richText:t,text:e,date:i,deleted:r}}=this.#n;return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new ns(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new ns(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;let r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new ns(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){let[,,,r]=t.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,l=r-100,c=o+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,c,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();let[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);let[r,a]=this.getInitialTranslation();return this.translate(r,a),DS(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#R||=new mu({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#Y.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#Y(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;let s=this.#D(this.rotation),o=(T,x)=>[s[0]*T+s[2]*x,s[1]*T+s[3]*x],[l,c]=this.parentDimensions,u=this.x,h=this.y,d=this.width,f=this.height,y=n.MIN_SIZE/l,g=n.MIN_SIZE/c;a=Math.max(Math.min(a,1/d,1/f),y/d,g/f);let w=n._round(d*a),p=n._round(f*a);if(w===d&&p===f)return;this.#u||=[u,h,d,f];let m=o(d/2,f/2),b=n._round(u+m[0]),E=n._round(h+m[1]),A=o(w/2,p/2);this.x=b-A[0],this.y=E-A[1],this.width=w,this.height=p,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(t){let{isMac:e}=ce.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){let{isMac:e}=ce.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1,r=new AbortController,a=this._uiManager.combinedSignal(r),s={capture:!0,passive:!1,signal:a},o=c=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(c),i&&this._onStopDragging()};e&&(this.#_=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",c=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:u,clientY:h,pointerId:d}=c;if(d!==this.#a){Xt(c);return}let[f,y]=this.screenToPageTranslation(u-this.#_,h-this.#A);this.#_=u,this.#A=h,this._uiManager.dragSelectedEditors(f,y)},s),window.addEventListener("touchmove",Xt,s),window.addEventListener("pointerdown",c=>{c.pointerType===this.#o&&(this.#R||c.isPrimary)&&o(c),Xt(c)},s));let l=c=>{if(!this.#a||this.#a===c.pointerId){o(c);return}Xt(c)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){let r=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/r,u=e/r,h=this.x*a,d=this.y*s,f=this.width*a,y=this.height*s;switch(i){case 0:return[h+c+o,s-d-u-y+l,h+c+f+o,s-d-u+l];case 90:return[h+u+o,s-d+c+l,h+u+y+o,s-d+c+f+l];case 180:return[h-c-f+o,s-d+u+l,h-c+o,s-d+u+y+l];case 270:return[h-u-y+o,s-d-c-f+l,h-u+o,s-d-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[i,r,a,s]=t,o=a-i,l=s-r;switch(this.rotation){case 0:return[i,e-s,o,l];case 90:return[i,e-r,l,o];case 180:return[a,e-r,o,l];case 270:return[a,e-s,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&n._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){let{comment:{text:t,color:e,date:i,opacity:r,deleted:a,richText:s},uid:o,pageIndex:l,creationDate:c,modificationDate:u}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:s,contentsObj:{str:t},creationDate:c,modificationDate:i||u,popupRef:!a,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return e<s&&r>0&&t<a&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;let t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){let r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;let[a,s]=r.pageDimensions,[o,l,c,u]=r.getRectInCurrentCoords(t.rect,s);return r.x=o/a,r.y=l/s,r.width=c/a,r.height=u/s,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P(),this.removeEditToolbar(),this.#w){for(let t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#R?.destroy(),this.#R=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[t,e]}=this,[i,r,a,s]=this.getPDFRect();return[n._round(i+(a-i)*t),n._round(r+(s-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#c.children;if(!this.#e){this.#e=Array.from(e);let s=this.#X.bind(this),o=this.#$.bind(this),l=this._uiManager._signal;for(let c of this.#e){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#q.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",n._l10nResizer[u])}}let i=this.#e[0],r=0;for(let s of e){if(s===i)break;r++}let a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let o=0;o<r-a;o++)this.#c.append(this.#c.firstChild);else if(a>r)for(let o=0;o<a-r;o++)this.#c.firstChild.before(this.#c.lastChild);let s=0;for(let o of e){let c=this.#e[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",n._l10nResizer[c])}}this.#j(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){n._resizerKeyboardManager.exec(this,t)}#$(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#q(t){this.#g=this.#b?t:""}#j(t){if(this.#e)for(let e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#k(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#b=!1,this.#j(-1),this.#I()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;let{action:i}=t,r=this.#w.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},n._telemetryTimeout),this.#w.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},im=class extends Lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},cS=3285377520,Mn=4294901760,Jn=65535,gu=class{constructor(t){this.h1=t?t&4294967295:cS,this.h2=t?t&4294967295:cS}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let g=0,w=t.length;g<w;g++){let p=t.charCodeAt(g);p<=255?e[i++]=p:(e[i++]=p>>>8,e[i++]=p&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let r=i>>2,a=i-r*4,s=new Uint32Array(e.buffer,0,r),o=0,l=0,c=this.h1,u=this.h2,h=3432918353,d=461845907,f=h&Jn,y=d&Jn;for(let g=0;g<r;g++)g&1?(o=s[g],o=o*h&Mn|o*f&Jn,o=o<<15|o>>>17,o=o*d&Mn|o*y&Jn,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=s[g],l=l*h&Mn|l*f&Jn,l=l<<15|l>>>17,l=l*d&Mn|l*y&Jn,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,a){case 3:o^=e[r*4+2]<<16;case 2:o^=e[r*4+1]<<8;case 1:o^=e[r*4],o=o*h&Mn|o*f&Jn,o=o<<15|o>>>17,o=o*d&Mn|o*y&Jn,r&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Mn|t*36045&Jn,e=e*4283543511&Mn|((e<<16|t>>>16)*2950163797&Mn)>>>16,t^=e>>>1,t=t*444984403&Mn|t*60499&Jn,e=e*3301882366&Mn|((e<<16|t>>>16)*3120437893&Mn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},rm=Object.freeze({map:null,hash:"",transfer:void 0}),Oo=class{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){let e=this.#n.get(t);if(e!==void 0&&(e instanceof Lt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let i of this.#n.values())if(i instanceof Lt)return;this.onAnnotationEditor(null)}}setValue(t,e){let i=this.#n.get(t),r=!1;if(i!==void 0)for(let[a,s]of Object.entries(e))i[a]!==s&&(r=!0,i[a]=s);else r=!0,this.#n.set(t,e);r&&this.#s(),e instanceof Lt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yu(this)}get serializable(){if(this.#n.size===0)return rm;let t=new Map,e=new gu,i=[],r=Object.create(null),a=!1;for(let[s,o]of this.#n){let l=o instanceof Lt?o.serialize(!1,r):o;l&&(t.set(s,l),e.update(`${s}:${JSON.stringify(l)}`),a||=!!l.bitmap)}if(a)for(let s of t.values())s.bitmap&&i.push(s.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:rm}get editorStats(){let t=null,e=new Map,i=0,r=0;for(let a of this.#n.values()){if(!(a instanceof Lt)){a.popup&&(a.popup.deleted?r+=1:i+=1);continue}a.isCommentDeleted?r+=1:a.hasEditedComment&&(i+=1);let s=a.telemetryFinalData;if(!s)continue;let{type:o}=s;e.has(o)||e.set(o,Object.getPrototypeOf(a).constructor),t||=Object.create(null);let l=t[o]||=new Map;for(let[c,u]of Object.entries(s)){if(c==="type")continue;let h=l.get(c);h||(h=new Map,l.set(c,h));let d=h.get(u)??0;h.set(u,d+1)}}if((r>0||i>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:i}),!t)return null;for(let[a,s]of e)t[a]=s.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){let i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;let t=[];if(this.#i)for(let e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}},yu=class extends Oo{#t;constructor(t){super();let{map:e,hash:i,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:i,transfer:r}}get print(){Ct("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return lt(this,"modifiedIds",{ids:new Set,hash:""})}},am=class{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(gt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:r,src:a,style:s}=t,o=new FontFace(r,a,s);this.addNativeFontFace(o);try{await o.load(),this.#t.add(r),i?.(t)}catch{et(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ct("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw et(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{let r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return lt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return lt(this,"isSyncFontLoadingSupported",Oe||ce.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(gt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){let a=i.shift();setTimeout(a.callback,0)}}let{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return lt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(E,A){return E.charCodeAt(A)<<24|E.charCodeAt(A+1)<<16|E.charCodeAt(A+2)<<8|E.charCodeAt(A+3)&255}function r(E,A,T,x){let D=E.substring(0,A),R=E.substring(A+T);return D+x+R}let a,s,o=this._document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d"),c=0;function u(E,A){if(++c>30){et("Load test font never loaded."),A();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(u.bind(null,E,A))}let h=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=r(d,976,h.length,h);let y=16,g=1482184792,w=i(d,y);for(a=0,s=h.length-3;a<s;a+=4)w=w-g+i(h,a)|0;a<h.length&&(w=w-g+i(h+"XXX",a)|0),d=r(d,y,4,XR(w));let p=`url(data:font/opentype;base64,${btoa(d)});`,m=`@font-face {font-family:"${h}";src:${p}}`;this.insertRule(m);let b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(let E of[t.loadedName,h]){let A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=E,b.append(A)}this._document.body.append(b),u(h,()=>{b.remove(),e.complete()})}},sm=class{#t;constructor(t,e=null,i,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${RS(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i=this.loadedName+"_path_"+e,r;try{r=t.get(i)}catch(s){et(`getPathGenerator - ignoring character: "${s}".`)}let a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}};function oC(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Oe)return n;let t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function lC(n){if(Oe&&typeof z.Buffer<"u"&&n instanceof z.Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return jo(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function tu(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}var om=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,cC=n=>typeof n=="object"&&typeof n?.name=="string",uC=QR.bind(null,om,cC),lm=class{#t=new Map;#e=Promise.resolve();postMessage(t,e){let i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(let[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){let{signal:a}=i;if(a.aborted){et("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(let[,t]of this.#t)t?.();this.#t.clear()}},eu={DATA:1,ERROR:2},ne={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function uS(){}function Xe(n){if(n instanceof ti||n instanceof Ro||n instanceof hu||n instanceof as||n instanceof xo)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ct('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ti(n.message);case"InvalidPDFException":return new Ro(n.message);case"PasswordException":return new hu(n.message,n.code);case"ResponseException":return new as(n.message,n.status,n.missing);case"UnknownErrorException":return new xo(n.message,n.details)}return new xo(n.message,n.toString())}var jr=class{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){let i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===eu.DATA)r.resolve(t.data);else if(t.callback===eu.ERROR)r.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(s){a.postMessage({sourceName:i,targetName:r,callback:eu.DATA,callbackId:t.callbackId,data:s})},function(s){a.postMessage({sourceName:i,targetName:r,callback:eu.ERROR,callbackId:t.callbackId,reason:Xe(s)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){let i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){let r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(s){a.reject(s)}return a.promise}sendWithStream(t,e,i,r){let a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[a]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:t,streamId:a,data:e,desiredSize:c.desiredSize},r),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,l.postMessage({sourceName:s,targetName:o,stream:ne.PULL,streamId:a,desiredSize:c.desiredSize}),u.promise},cancel:c=>{gt(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:ne.CANCEL,streamId:a,reason:Xe(c)}),u.promise}},i)}#i(t){let e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,s=this,o=this.actionHandler[t.action],l={enqueue(c,u=1,h){if(this.isCancelled)return;let d=this.desiredSize;this.desiredSize-=u,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:ne.ENQUEUE,streamId:e,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:ne.CLOSE,streamId:e}),delete s.streamSinks[e])},error(c){gt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:ne.ERROR,streamId:e,reason:Xe(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(o,t.data,l).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ne.START_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:i,targetName:r,stream:ne.START_COMPLETE,streamId:e,reason:Xe(c)})})}#n(t){let e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,s=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case ne.START_COMPLETE:t.success?s.startCall.resolve():s.startCall.reject(Xe(t.reason));break;case ne.PULL_COMPLETE:t.success?s.pullCall.resolve():s.pullCall.reject(Xe(t.reason));break;case ne.PULL:if(!o){a.postMessage({sourceName:i,targetName:r,stream:ne.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,Promise.try(o.onPull||uS).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ne.PULL_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:i,targetName:r,stream:ne.PULL_COMPLETE,streamId:e,reason:Xe(c)})});break;case ne.ENQUEUE:if(gt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case ne.CLOSE:if(gt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#s(s,e);break;case ne.ERROR:gt(s,"error should have stream controller"),s.controller.error(Xe(t.reason)),this.#s(s,e);break;case ne.CANCEL_COMPLETE:t.success?s.cancelCall.resolve():s.cancelCall.reject(Xe(t.reason)),this.#s(s,e);break;case ne.CANCEL:if(!o)break;let l=Xe(t.reason);Promise.try(o.onCancel||uS,l).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ne.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:i,targetName:r,stream:ne.CANCEL_COMPLETE,streamId:e,reason:Xe(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#s(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}},vu=class{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ct("Abstract method `_createCanvas` called.")}},cm=class extends vu{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},bu=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ct("Abstract method `_fetch` called.")}},wu=class extends bu{async _fetch(t){let e=await Go(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):jo(e)}},Su=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}},um=class extends Su{#t;#e;#i;#n;#s;#r;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#s=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){let t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let i=this.#s.createElementNS(xi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#s.createElementNS(xi,"defs"),t.append(i),i.append(this.#i),this.#s.body.append(t)}return this.#i}#d(t){if(t.length===1){let l=t[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=l[h]/255;let u=c.join(",");return[u,u,u]}let[e,i,r]=t,a=new Array(256),s=new Array(256),o=new Array(256);for(let l=0;l<256;l++)a[l]=e[l]/255,s[l]=i[l]/255,o[l]=r[l]/255;return[a.join(","),s.join(","),o.join(",")]}#h(t){if(this.#t===void 0){this.#t="";let e=this.#s.URL;e!==this.#s.baseURI&&(Wu(e)?et('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=xS(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;let[i,r,a]=this.#d(t),s=t.length===1?i:`${i}${r}${a}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;let o=`g_${this.#n}_transfer_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(s,l);let c=this.#p(o);return this.#m(i,r,a,c),l}addHCMFilter(t,e){let i=`${t}-${e}`,r="base",a=this.#c.get(r);if(a?.key===i||(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#c.set(r,a)),!t||!e))return a.url;let s=this.#b(t);t=j.makeHexColor(...s);let o=this.#b(e);if(e=j.makeHexColor(...o),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;let l=new Array(256);for(let f=0;f<=255;f++){let y=f/255;l[f]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#n}_hcm_filter`,h=a.filter=this.#p(u);this.#m(c,c,c,h),this.#g(h);let d=(f,y)=>{let g=s[f]/255,w=o[f]/255,p=new Array(y+1);for(let m=0;m<=y;m++)p[m]=g+m/y*(w-g);return p.join(",")};return this.#m(d(0,5),d(1,5),d(2,5),h),a.url=this.#h(u),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;let[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;let a=`g_${this.#n}_alpha_map_${this.#a++}`,s=this.#h(a);this.#o.set(t,s),this.#o.set(r,s);let o=this.#p(a);return this.#y(i,o),s}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;let a=`g_${this.#n}_luminosity_map_${this.#a++}`,s=this.#h(a);this.#o.set(t,s),this.#o.set(r,s);let o=this.#p(a);return this.#f(o),t&&this.#y(i,o),s}addHighlightHCMFilter(t,e,i,r,a){let s=`${e}-${i}-${r}-${a}`,o=this.#c.get(t);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(t,o)),!e||!i))return o.url;let[l,c]=[e,i].map(this.#b.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,f]=[r,a].map(this.#b.bind(this));h<u&&([u,h,d,f]=[h,u,f,d]),this.#l.style.color="";let y=(p,m,b)=>{let E=new Array(256),A=(h-u)/b,T=p/255,x=(m-p)/(255*b),D=0;for(let R=0;R<=b;R++){let L=Math.round(u+R*A),F=T+R*x;for(let G=D;G<=L;G++)E[G]=F;D=L+1}for(let R=D;R<256;R++)E[R]=E[D-1];return E.join(",")},g=`g_${this.#n}_hcm_${t}_filter`,w=o.filter=this.#p(g);return this.#g(w),this.#m(y(d[0],f[0],5),y(d[1],f[1],5),y(d[2],f[2],5),w),o.url=this.#h(g),o.url}destroy(t=!1){t&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(t){let e=this.#s.createElementNS(xi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){let e=this.#s.createElementNS(xi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){let e=this.#s.createElementNS(xi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){let r=this.#s.createElementNS(xi,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#m(t,e,i,r){let a=this.#s.createElementNS(xi,"feComponentTransfer");r.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",i)}#y(t,e){let i=this.#s.createElementNS(xi,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#b(t){return this.#l.style.color=t,Yo(getComputedStyle(this.#l).getPropertyValue("color"))}},Eu=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ct("Abstract method `_fetch` called.")}},Au=class extends Eu{async _fetch(t){let e=await Go(t,"arraybuffer");return new Uint8Array(e)}},xu=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ct("Abstract method `_fetch` called.")}},_u=class extends xu{async _fetch(t){let e=await Go(t,"arraybuffer");return new Uint8Array(e)}};Oe&&et("Please use the `legacy` build in Node.js environments.");async function Tg(n){let e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}var hm=class extends Su{},dm=class extends vu{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},fm=class extends bu{async _fetch(t){return Tg(t)}},pm=class extends Eu{async _fetch(t){return Tg(t)}},mm=class extends xu{async _fetch(t){return Tg(t)}},Ja="__forcedDependency",{floor:hS,ceil:dS}=Math;function nu(n,t,e,i,r,a){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],r),n[t*4+3]=Math.max(n[t*4+3],a)}var gm=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],ym=class{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===gm}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}},iu=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e},vm=class{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ja]:[]};#i=new Map;#n=[];#s=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#y(e),i&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){let i=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(gm,e.length)):this.#u.fill(gm)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ja]:{__proto__:this.#e[Ja]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){let e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);let i=this.#n.pop();return i!==void 0&&(iu(this.#m,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){let e=this.#n.pop();return e!==void 0&&(iu(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#s.push(t),this}endMarkedContent(t){let e=this.#s.pop();return e!==void 0&&(iu(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(j.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Ja,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(let e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let t of this.#l)this.recordFutureForcedDependency(Ja,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,r,a,s){let o=j.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),l=[1/0,1/0,-1/0,-1/0];j.axialAlignedBoundingBox([i,a,r,s],o,l);let c=j.intersect(this.#a,l);return c?(this.#a[0]=c[0],this.#a[1]=c[1],this.#a[2]=c[2],this.#a[3]=c[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,r,a,s){let o=this.#a;if(o[0]===1/0)return this;let l=j.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(o[0]===-1/0)return j.axialAlignedBoundingBox([i,a,r,s],l,this.#o),this;let c=[1/0,1/0,-1/0,-1/0];return j.axialAlignedBoundingBox([i,a,r,s],l,c),this.#o[0]=Math.min(this.#o[0],Math.max(c[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(c[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(c[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(c[3],o[3])),this}recordCharacterBBox(t,e,i,r=1,a=0,s=0,o){let l=i.bbox,c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&this.#h.get(i),c!==!1&&(u=[0,0,0,0],j.axialAlignedBoundingBox(l,i.fontMatrix,u),(r!==1||a!==0||s!==0)&&j.scaleMinMax([r,0,0,-r,a,s],u),c)))return this.recordBBox(t,e,u[0],u[2],u[1],u[3]);if(!o)return this.recordFullPageBBox(t);let h=o();return l&&u&&c===void 0&&(c=u[0]<=a-h.actualBoundingBoxLeft&&u[2]>=a+h.actualBoundingBoxRight&&u[1]<=s-h.actualBoundingBoxAscent&&u[3]>=s+h.actualBoundingBoxDescent,this.#h.set(i,c),c)?this.recordBBox(t,e,u[0],u[2],u[1],u[3]):this.recordBBox(t,e,a-h.actualBoundingBoxLeft,a+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){let i=this.#l,r=this.#t,a=this.#e;for(let s of e)s in this.#t?i.add(r[s]):s in a&&a[s].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Ja]),this.#m){let i=iu(this.#m,t),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#s.forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(this.#c===t){let i=hS(this.#o[0]*256/this.#f),r=hS(this.#o[1]*256/this.#g),a=dS(this.#o[2]*256/this.#f),s=dS(this.#o[3]*256/this.#g);nu(this.#p,t,i,r,a,s);for(let o of this.#l)o!==t&&nu(this.#p,o,i,r,a,s);for(let o of this.#n)o!==t&&nu(this.#p,o,i,r,a,s);for(let o of this.#s)o!==t&&nu(this.#p,o,i,r,a,s);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){let i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(let r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){let t=this.#l;return this.#l=new Set,t}_extractOperation(t){let e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(let e of t)this.#l.add(e)}take(){return this.#h.clear(),new ym(this.#u,this.#p)}takeDebugMetadata(){return this.#m}},Tu=class n{#t;#e;#i;#n=0;#s=0;constructor(t,e,i){if(t instanceof n&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#s++,this.#t.save(this.#e),this}restore(t){return this.#s>0&&(this.#t.restore(this.#e),this.#s--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,r,a,s){return this.#i||this.#t.recordClipBox(this.#e,e,i,r,a,s),this}recordBBox(t,e,i,r,a,s){return this.#i||this.#t.recordBBox(this.#e,e,i,r,a,s),this}recordCharacterBBox(t,e,i,r,a,s,o){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,r,a,s,o),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}},Ln={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bm(n,t){if(!t)return;let e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),n.clip(r)}var No=class{isModifyingCurrentTransform(){return!1}getPattern(){Ct("Abstract method `getPattern` called.")}},wm=class extends No{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===Ee.STROKE||r===Ee.FILL){let s=e.current.getClippedPathBoundingBox(r,jt(t))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-s[0],-s[1]),i=j.transform(i,[1,0,0,1,s[0],s[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),bm(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=t.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(i);a.setTransform(h)}else bm(t,this._bbox),a=this._createGradient(t);return a}};function Hp(n,t,e,i,r,a,s,o){let l=t.coords,c=t.colors,u=n.data,h=n.width*4,d;l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=a,a=s,s=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=s,s=o,o=d),l[e+1]>l[i+1]&&(d=e,e=i,i=d,d=a,a=s,s=d);let f=(l[e]+t.offsetX)*t.scaleX,y=(l[e+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,w=(l[i+1]+t.offsetY)*t.scaleY,p=(l[r]+t.offsetX)*t.scaleX,m=(l[r+1]+t.offsetY)*t.scaleY;if(y>=m)return;let b=c[a],E=c[a+1],A=c[a+2],T=c[s],x=c[s+1],D=c[s+2],R=c[o],L=c[o+1],F=c[o+2],G=Math.round(y),q=Math.round(m),Q,rt,Y,V,ct,ue,Ke,he;for(let Pt=G;Pt<=q;Pt++){if(Pt<w){let Yt=Pt<y?0:(y-Pt)/(y-w);Q=f-(f-g)*Yt,rt=b-(b-T)*Yt,Y=E-(E-x)*Yt,V=A-(A-D)*Yt}else{let Yt;Pt>m?Yt=1:w===m?Yt=0:Yt=(w-Pt)/(w-m),Q=g-(g-p)*Yt,rt=T-(T-R)*Yt,Y=x-(x-L)*Yt,V=D-(D-F)*Yt}let yt;Pt<y?yt=0:Pt>m?yt=1:yt=(y-Pt)/(y-m),ct=f-(f-p)*yt,ue=b-(b-R)*yt,Ke=E-(E-L)*yt,he=A-(A-F)*yt;let In=Math.round(Math.min(Q,ct)),mn=Math.round(Math.max(Q,ct)),gn=h*Pt+In*4;for(let Yt=In;Yt<=mn;Yt++)yt=(Q-Yt)/(Q-ct),yt<0?yt=0:yt>1&&(yt=1),u[gn++]=rt-(rt-ue)*yt|0,u[gn++]=Y-(Y-Ke)*yt|0,u[gn++]=V-(V-he)*yt|0,u[gn++]=255}}function hC(n,t,e){let i=t.coords,r=t.colors,a,s;switch(t.type){case"lattice":let o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(a=0;a<l;a++){let u=a*o;for(let h=0;h<c;h++,u++)Hp(n,e,i[u],i[u+1],i[u+o],r[u],r[u+1],r[u+o]),Hp(n,e,i[u+o+1],i[u+1],i[u+o],r[u+o+1],r[u+1],r[u+o])}break;case"triangles":for(a=0,s=i.length;a<s;a+=3)Hp(n,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}var Sm=class extends No{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){let o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/h,y=u/d,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/y},w=h+2*2,p=d+2*2,m=i.getCanvas("mesh",w,p),b=m.context,E=b.createImageData(h,d);if(e){let T=E.data;for(let x=0,D=T.length;x<D;x+=4)T[x]=e[0],T[x+1]=e[1],T[x+2]=e[2],T[x+3]=255}for(let T of this._figures)hC(E,T,g);return b.putImageData(E,2,2),{canvas:m.canvas,offsetX:o-2*f,offsetY:l-2*y,scaleX:f,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){bm(t,this._bbox);let a=new Float32Array(2);if(r===Ee.SHADING)j.singularValueDecompose2dScale(jt(t),a);else if(this.matrix){j.singularValueDecompose2dScale(this.matrix,a);let[o,l]=a;j.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=o,a[1]*=l}else j.singularValueDecompose2dScale(e.baseTransform,a);let s=this._createMeshCanvas(a,r===Ee.SHADING?null:this._background,e.cachedCanvases);return r!==Ee.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}},Em=class extends No{getPattern(){return"hotpink"}};function dC(n){switch(n[0]){case"RadialAxial":return new wm(n);case"Mesh":return new Sm(n);case"Dummy":return new Em}throw new Error(`Unknown IR type: ${n[0]}`)}var fS={COLORED:1,UNCOLORED:2},Am=class n{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){let{bbox:i,operatorList:r,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Ku("TilingType: "+s);let h=i[0],d=i[1],f=i[2],y=i[3],g=f-h,w=y-d,p=new Float32Array(2);j.singularValueDecompose2dScale(this.matrix,p);let[m,b]=p;j.singularValueDecompose2dScale(this.baseTransform,p);let E=m*p[0],A=b*p[1],T=g,x=w,D=!1,R=!1,L=Math.ceil(c*E),F=Math.ceil(u*A),G=Math.ceil(g*E),q=Math.ceil(w*A);L>=G?T=c:D=!0,F>=q?x=u:R=!0;let Q=this.getSizeAndScale(T,this.ctx.canvas.width,E),rt=this.getSizeAndScale(x,this.ctx.canvas.height,A),Y=t.cachedCanvases.getCanvas("pattern",Q.size,rt.size),V=Y.context,ct=l.createCanvasGraphics(V,e);if(ct.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(ct,a,o),V.translate(-Q.scale*h,-rt.scale*d),ct.transform(0,Q.scale,0,0,rt.scale,0,0),V.save(),ct.dependencyTracker?.save(),this.clipBbox(ct,h,d,f,y),ct.baseTransform=jt(ct.ctx),ct.executeOperatorList(r),ct.endDrawing(),ct.dependencyTracker?.restore(),V.restore(),D||R){let ue=Y.canvas;D&&(T=c),R&&(x=u);let Ke=this.getSizeAndScale(T,this.ctx.canvas.width,E),he=this.getSizeAndScale(x,this.ctx.canvas.height,A),Pt=Ke.size,yt=he.size,In=t.cachedCanvases.getCanvas("pattern-workaround",Pt,yt),mn=In.context,gn=D?Math.floor(g/c):0,Yt=R?Math.floor(w/u):0;for(let Un=0;Un<=gn;Un++)for(let Di=0;Di<=Yt;Di++)mn.drawImage(ue,Pt*Un,yt*Di,Pt,yt,0,0,Pt,yt);return{canvas:In.canvas,scaleX:Ke.scale,scaleY:he.scale,offsetX:h,offsetY:d}}return{canvas:Y.canvas,scaleX:Q.scale,scaleY:rt.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,i){let r=Math.max(n.MAX_PATTERN_SIZE,e),a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){let s=r-e,o=a-i;t.ctx.rect(e,i,s,o),j.axialAlignedBoundingBox([e,i,r,a],jt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){let r=t.ctx,a=t.current;switch(e){case fS.COLORED:let{fillStyle:s,strokeStyle:o}=this.ctx;r.fillStyle=a.fillColor=s,r.strokeStyle=a.strokeColor=o;break;case fS.UNCOLORED:r.fillStyle=r.strokeStyle=i,a.fillColor=a.strokeColor=i;break;default:throw new $p(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,a){let s=i;r!==Ee.SHADING&&(s=j.transform(s,e.baseTransform),this.matrix&&(s=j.transform(s,this.matrix)));let o=this.createPatternCanvas(e,a),l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);let c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};function fC({src:n,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:s=!1}){let o=ce.isLittleEndian?4278190080:255,[l,c]=s?[a,o]:[o,a],u=i>>3,h=i&7,d=n.length;e=new Uint32Array(e.buffer);let f=0;for(let y=0;y<r;y++){for(let w=t+u;t<w;t++){let p=t<d?n[t]:255;e[f++]=p&128?c:l,e[f++]=p&64?c:l,e[f++]=p&32?c:l,e[f++]=p&16?c:l,e[f++]=p&8?c:l,e[f++]=p&4?c:l,e[f++]=p&2?c:l,e[f++]=p&1?c:l}if(h===0)continue;let g=t<d?n[t++]:255;for(let w=0;w<h;w++)e[f++]=g&1<<7-w?c:l}return{srcPos:t,destPos:f}}var pS=16,mS=100,pC=15,gS=10,qe=16,jp=new DOMMatrix,pn=new Float32Array(2),is=new Float32Array([1/0,1/0,-1/0,-1/0]);function mC(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,r,a,s,o){t.transform(e,i,r,a,s,o),this.__originalTransform(e,i,r,a,s,o)},n.setTransform=function(e,i,r,a,s,o){t.setTransform(e,i,r,a,s,o),this.__originalSetTransform(e,i,r,a,s,o)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,r,a,s,o){t.bezierCurveTo(e,i,r,a,s,o),this.__originalBezierCurveTo(e,i,r,a,s,o)},n.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var xm=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function ru(n,t,e,i,r,a,s,o,l,c){let[u,h,d,f,y,g]=jt(n);if(h===0&&d===0){let m=s*u+y,b=Math.round(m),E=o*f+g,A=Math.round(E),T=(s+l)*u+y,x=Math.abs(Math.round(T)-b)||1,D=(o+c)*f+g,R=Math.abs(Math.round(D)-A)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),b,A),n.drawImage(t,e,i,r,a,0,0,x,R),n.setTransform(u,h,d,f,y,g),[x,R]}if(u===0&&f===0){let m=o*d+y,b=Math.round(m),E=s*h+g,A=Math.round(E),T=(o+c)*d+y,x=Math.abs(Math.round(T)-b)||1,D=(s+l)*h+g,R=Math.abs(Math.round(D)-A)||1;return n.setTransform(0,Math.sign(h),Math.sign(d),0,b,A),n.drawImage(t,e,i,r,a,0,0,R,x),n.setTransform(u,h,d,f,y,g),[R,x]}n.drawImage(t,e,i,r,a,s,o,l,c);let w=Math.hypot(u,h),p=Math.hypot(d,f);return[w*l,p*c]}var Ru=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Vp;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Se.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=is.slice()}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ee.FILL,e=null){let i=this.minMax.slice();if(t===Ee.STROKE){e||Ct("Stroke bounding box must include transform."),j.singularValueDecompose2dScale(e,pn);let r=pn[0]*this.lineWidth/2,a=pn[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){let t=j.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(is,0)}getClippedPathBoundingBox(t=Ee.FILL,e=null){return j.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function yS(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}let e=t.height,i=t.width,r=e%qe,a=(e-r)/qe,s=r===0?a:a+1,o=n.createImageData(i,qe),l=0,c,u=t.data,h=o.data,d,f,y,g;if(t.kind===uu.GRAYSCALE_1BPP){let w=u.byteLength,p=new Uint32Array(h.buffer,0,h.byteLength>>2),m=p.length,b=i+7>>3,E=4294967295,A=ce.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(y=d<a?qe:r,c=0,f=0;f<y;f++){let T=w-l,x=0,D=T>b?i:T*8-7,R=D&-8,L=0,F=0;for(;x<R;x+=8)F=u[l++],p[c++]=F&128?E:A,p[c++]=F&64?E:A,p[c++]=F&32?E:A,p[c++]=F&16?E:A,p[c++]=F&8?E:A,p[c++]=F&4?E:A,p[c++]=F&2?E:A,p[c++]=F&1?E:A;for(;x<D;x++)L===0&&(F=u[l++],L=128),p[c++]=F&L?E:A,L>>=1}for(;c<m;)p[c++]=0;n.putImageData(o,0,d*qe)}}else if(t.kind===uu.RGBA_32BPP){for(f=0,g=i*qe*4,d=0;d<a;d++)h.set(u.subarray(l,l+g)),l+=g,n.putImageData(o,0,f),f+=qe;d<s&&(g=i*r*4,h.set(u.subarray(l,l+g)),n.putImageData(o,0,f))}else if(t.kind===uu.RGB_24BPP)for(y=qe,g=i*y,d=0;d<s;d++){for(d>=a&&(y=r,g=i*y),c=0,f=g;f--;)h[c++]=u[l++],h[c++]=u[l++],h[c++]=u[l++],h[c++]=255;n.putImageData(o,0,d*qe)}else throw new Error(`bad image kind: ${t.kind}`)}function vS(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}let e=t.height,i=t.width,r=e%qe,a=(e-r)/qe,s=r===0?a:a+1,o=n.createImageData(i,qe),l=0,c=t.data,u=o.data;for(let h=0;h<s;h++){let d=h<a?qe:r;({srcPos:l}=fC({src:c,srcPos:l,dest:u,width:i,height:d,nonBlackColor:0})),n.putImageData(o,0,h*qe)}}function bo(n,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function au(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);let{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function bS(n,t){if(t)return!0;j.singularValueDecompose2dScale(n,pn);let e=Math.fround(Ti.pixelRatio*ur.PDF_TO_CSS_UNITS);return pn[0]<=e&&pn[1]<=e}var gC=["butt","round","square"],yC=["miter","round","bevel"],vC={},wS={},rs=class n{constructor(t,e,i,r,a,{optionalContentConfig:s,markedContentStack:o=null},l,c,u){this.ctx=t,this.current=new Ru(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new xm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){let a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,i){let l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...jt(this.compositeCtx))}this.ctx.save(),au(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=jt(this.ctx)}executeOperatorList(t,e,i,r,a){let s=t.argsArray,o=t.fnArray,l=e||0,c=s.length;if(c===l)return l;let u=c-l>gS&&typeof i=="function",h=u?Date.now()+pC:0,d=0,f=this.commonObjs,y=this.objs,g,w;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,i),l;if(!a||a(l))if(g=o[l],w=s[l]??null,g!==To.dependency)w===null?this[g](l):this[g](l,...w);else for(let p of w){this.dependencyTracker?.recordNamedData(p,l);let m=p.startsWith("g_")?f:y;if(!m.has(p))return m.get(p,i),l}if(l++,l===c)return l;if(u&&++d>gS){if(Date.now()>h)return i(),l;d=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let i=t.width??t.displayWidth,r=t.height??t.displayHeight,a=Math.max(Math.hypot(e[0],e[1]),1),s=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=r,c="prescale1",u,h;for(;a>2&&o>1||s>2&&l>1;){let d=o,f=l;a>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/d),s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/f),u=this.cachedCanvases.getCanvas(c,d,f),h=u.context,h.clearRect(0,0,d,f),h.drawImage(t,0,0,o,l,0,0,d,f),t=u.canvas,o=d,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t,e){let i=this.ctx,{width:r,height:a}=e,s=this.current.fillColor,o=this.current.patternFill,l=jt(i),c,u,h,d;if((e.bitmap||e.data)&&e.count>1){let L=e.bitmap||e.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),s]),c=this._cachedBitmapsMap.get(L),c||(c=new Map,this._cachedBitmapsMap.set(L,c));let F=c.get(u);if(F&&!o){let G=Math.round(Math.min(l[0],l[2])+l[4]),q=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(t,Ln.transformAndFill),{canvas:F,offsetX:G,offsetY:q}}h=F}h||(d=this.cachedCanvases.getCanvas("maskCanvas",r,a),vS(d.context,e));let f=j.transform(l,[1/r,0,0,-1/a,0,0]);f=j.transform(f,[1,0,0,1,0,-a]);let y=is.slice();j.axialAlignedBoundingBox([0,0,r,a],f,y);let[g,w,p,m]=y,b=Math.round(p-g)||1,E=Math.round(m-w)||1,A=this.cachedCanvases.getCanvas("fillCanvas",b,E),T=A.context,x=g,D=w;T.translate(-x,-D),T.transform(...f),h||(h=this._scaleImage(d.canvas,Qn(T)),h=h.img,c&&o&&c.set(u,h)),T.imageSmoothingEnabled=bS(jt(T),e.interpolate),ru(T,h,0,0,h.width,h.height,0,0,r,a),T.globalCompositeOperation="source-in";let R=j.transform(Qn(T),[1,0,0,1,-x,-D]);return T.fillStyle=o?s.getPattern(i,this,R,Ee.FILL,t):s,T.fillRect(0,0,r,a),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,A.canvas)),this.dependencyTracker?.recordDependencies(t,Ln.transformAndFill),{canvas:A.canvas,offsetX:Math.round(x),offsetY:Math.round(D)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=gC[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=yC[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);let r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(let[i,r]of e)switch(i){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;let s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),bo(this.suspendedCtx,s),mC(s,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){let a=r[0],s=r[1],o=r[2]-a,l=r[3]-s;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,a,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,s,o,l,c,u,h){let d=t.canvas,f=l-u,y=c-h;if(s)if(f<0||y<0||f+i>d.width||y+r>d.height){let w=this.cachedCanvases.getCanvas("maskExtension",i,r),p=w.context;p.drawImage(d,-f,-y),p.globalCompositeOperation="destination-atop",p.fillStyle=s,p.fillRect(0,0,i,r),p.globalCompositeOperation="source-over",d=w.canvas,f=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let w=new Path2D;w.rect(f,y,i,r),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(f,y,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));let g=new Path2D;g.rect(l,c,i,r),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(d,f,y,i,r,l,c,i,r),e.restore()}save(t){this.inSMaskMode&&bo(this.ctx,this.suspendedCtx),this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,a,s,o){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[a]=i;if(!r){a||=i[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){let s=e===To.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-s,r[2]+s,r[1]-s,r[3]+s).recordDependencies(t,["transform"])}if(!(a instanceof Path2D)){let s=i[0]=new Path2D;for(let o=0,l=a.length;o<l;)switch(a[o++]){case Jc.moveTo:s.moveTo(a[o++],a[o++]);break;case Jc.lineTo:s.lineTo(a[o++],a[o++]);break;case Jc.curveTo:s.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case Jc.closePath:s.closePath();break;default:et(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=s}j.axialAlignedBoundingBox(r,jt(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){let r=this.ctx,a=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){let s=a.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=a.getPattern(r,this,Qn(r),Ee.STROKE,t),s){let o=new Path2D;o.addPath(e,r.getTransform().invertSelf().multiplySelf(s)),e=o}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Ln.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ee.STROKE,jt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){let r=this.ctx,a=this.current.fillColor,s=this.current.patternFill,o=!1;if(s){let c=a.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=a.getPattern(r,this,Qn(r),Ee.FILL,t),c){let u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=u}o=!0}let l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,Ln.fill),o&&(r.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Ln.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=vC}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=wS}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){let e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){let{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){let r=new Path2D,a=i.getTransform().invertSelf();for(let{transform:s,x:o,y:l,fontSize:c,path:u}of e)u&&r.addPath(u,new DOMMatrix(s).preMultiplySelf(a).translate(o,l).scale(c,-c));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);let r=this.commonObjs.get(e),a=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=r.fontMatrix||Vp,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&et("Invalid font matrix for font "+e),i<0?(i=-i,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;let s=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`,l="normal";r.black?l="900":r.bold&&(l="bold");let c=r.italic?"italic":"normal",u=i;i<pS?u=pS:i>mS&&(u=mS),this.current.fontSizeScale=i/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);let{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){let r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r}paintChar(t,e,i,r,a,s){let o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&Se.FILL_STROKE_MASK,f=!!(u&Se.ADD_TO_PATH_FLAG),y=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile,w;if((c.disableFontFace||f||y||g)&&!c.missingFile&&(w=c.getPathGenerator(this.commonObjs,e)),w&&(c.disableFontFace||y||g)){o.save(),o.translate(i,r),o.scale(h,-h),this.dependencyTracker?.recordCharacterBBox(t,o,c);let p;if(d===Se.FILL||d===Se.FILL_STROKE)if(a){p=o.getTransform(),o.setTransform(...a);let m=this.#i(w,p,a);o.fill(m)}else o.fill(w);if(d===Se.STROKE||d===Se.FILL_STROKE)if(s){p||=o.getTransform(),o.setTransform(...s);let{a:m,b,c:E,d:A}=p,T=j.inverseTransform(s),x=j.transform([m,b,E,A,0,0],T);j.singularValueDecompose2dScale(x,pn),o.lineWidth*=Math.max(pn[0],pn[1])/h,o.stroke(this.#i(w,p,s))}else o.lineWidth/=h,o.stroke(w);o.restore()}else(d===Se.FILL||d===Se.FILL_STROKE)&&(o.fillText(e,i,r),this.dependencyTracker?.recordCharacterBBox(t,o,c,h,i,r,()=>o.measureText(e))),(d===Se.STROKE||d===Se.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,o,c,h,i,r,()=>o.measureText(e)).recordDependencies(t,Ln.stroke),o.strokeText(e,i,r));f&&((this.pendingTextPaths||=[]).push({transform:jt(o),x:i,y:r,fontSize:h,path:w}),this.dependencyTracker?.recordCharacterBBox(t,o,c,h,i,r))}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return lt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ln.showText).resetBBox(t),this.current.textRenderingMode&Se.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());let i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}let a=i.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}let s=this.ctx,o=i.fontSizeScale,l=i.charSpacing,c=i.wordSpacing,u=i.fontDirection,h=i.textHScale*u,d=e.length,f=r.vertical,y=f?1:-1,g=r.defaultVMetrics,w=a*i.fontMatrix[0],p=i.textRenderingMode===Se.FILL&&!r.disableFontFace&&!i.patternFill;s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),u>0?s.scale(h,-1):s.scale(h,1);let m,b;if(i.patternFill){s.save();let D=i.fillColor.getPattern(s,this,Qn(s),Ee.FILL,t);m=jt(s),s.restore(),s.fillStyle=D}if(i.patternStroke){s.save();let D=i.strokeColor.getPattern(s,this,Qn(s),Ee.STROKE,t);b=jt(s),s.restore(),s.strokeStyle=D}let E=i.lineWidth,A=i.textMatrixScale;if(A===0||E===0){let D=i.textRenderingMode&Se.FILL_STROKE_MASK;(D===Se.STROKE||D===Se.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=A;if(o!==1&&(s.scale(o,o),E/=o),s.lineWidth=E,r.isInvalidPDFjsFont){let D=[],R=0;for(let F of e)D.push(F.unicode),R+=F.width;let L=D.join("");if(s.fillText(L,0,0),this.dependencyTracker!==null){let F=s.measureText(L);this.dependencyTracker.recordBBox(t,this.ctx,-F.actualBoundingBoxLeft,F.actualBoundingBoxRight,-F.actualBoundingBoxAscent,F.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=R*w*h,s.restore(),this.compose();return}let T=0,x;for(x=0;x<d;++x){let D=e[x];if(typeof D=="number"){T+=y*D*a/1e3;continue}let R=!1,L=(D.isSpace?c:0)+l,F=D.fontChar,G=D.accent,q,Q,rt=D.width;if(f){let ct=D.vmetric||g,ue=-(D.vmetric?ct[1]:rt*.5)*w,Ke=ct[2]*w;rt=ct?-ct[0]:rt,q=ue/o,Q=(T+Ke)/o}else q=T/o,Q=0;let Y;if(r.remeasure&&rt>0){Y=s.measureText(F);let ct=Y.width*1e3/a*o;if(rt<ct&&this.isFontSubpixelAAEnabled){let ue=rt/ct;R=!0,s.save(),s.scale(ue,1),q/=ue}else rt!==ct&&(q+=(rt-ct)/2e3*a/o)}if(this.contentVisible&&(D.isInFont||r.missingFile)){if(p&&!G)s.fillText(F,q,Q),this.dependencyTracker?.recordCharacterBBox(t,s,Y?{bbox:null}:r,a/o,q,Q,()=>Y??s.measureText(F));else if(this.paintChar(t,F,q,Q,m,b),G){let ct=q+a*G.offset.x/o,ue=Q-a*G.offset.y/o;this.paintChar(t,G.fontChar,ct,ue,m,b)}}let V=f?rt*w-L*u:rt*w+L*u;T+=V,R&&s.restore()}f?i.y-=T:i.x+=T*h,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){let i=this.ctx,r=this.current,a=r.font,s=r.fontSize,o=r.fontDirection,l=a.vertical?1:-1,c=r.charSpacing,u=r.wordSpacing,h=r.textHScale*o,d=r.fontMatrix||Vp,f=e.length,y=r.textRenderingMode===Se.INVISIBLE,g,w,p,m;if(y||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(h,o);let b=this.dependencyTracker;for(this.dependencyTracker=b?new Tu(b,t):null,g=0;g<f;++g){if(w=e[g],typeof w=="number"){m=l*w*s/1e3,this.ctx.translate(m,0),r.x+=m*h;continue}let E=(w.isSpace?u:0)+c,A=a.charProcOperatorList[w.operatorListId];A?this.contentVisible&&(this.save(),i.scale(s,s),i.transform(...d),this.executeOperatorList(A),this.restore()):et(`Type3 character "${w.operatorListId}" is not available.`);let T=[w.width,0];j.applyTransform(T,d),p=T[0]*s+E,i.translate(p,0),r.x+=p*h}i.restore(),b&&(this.dependencyTracker=b)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,a,s,o){let l=new Path2D;l.rect(r,a,s-r,o-a),this.ctx.clip(l),this.dependencyTracker?.recordBBox(t,this.ctx,r,s,a,o).recordClipBox(t,this.ctx,r,s,a,o),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){let r=this.baseTransform||jt(this.ctx),a={createCanvasGraphics:(s,o)=>new n(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Tu(this.dependencyTracker,o,!0):null)};i=new Am(e,this.ctx,a,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=dC(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){if(!this.contentVisible)return;let i=this.ctx;this.save(t);let r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,Qn(i),Ee.SHADING,t);let a=Qn(i);if(a){let{width:s,height:o}=i.canvas,l=is.slice();j.axialAlignedBoundingBox([0,0,s,o],a,l);let[c,u,h,d]=l;this.ctx.fillRect(c,u,h-c,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ln.transform).recordDependencies(t,Ln.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ct("Should not call beginInlineImage")}beginImageData(){Ct("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=jt(this.ctx),i)){j.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);let[r,a,s,o]=i,l=new Path2D;l.rect(r,a,s-r,o-a),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(t,this.ctx,r,s,a,o),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let i=this.ctx;e.isolated||Ku("TODO: Support non-isolated groups."),e.knockout&&et("Knockout groups not supported.");let r=jt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=is.slice();j.axialAlignedBoundingBox(e.bbox,jt(i),a);let s=[0,0,i.canvas.width,i.canvas.height];a=j.intersect(a,s)||[0,0,0,0];let o=Math.floor(a[0]),l=Math.floor(a[1]),c=Math.max(Math.ceil(a[2])-o,1),u=Math.max(Math.ceil(a[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-l),f.transform(...r);let y=new Path2D,[g,w,p,m]=e.bbox;if(y.rect(g,w,p-g,m-w),e.matrix){let b=new Path2D;b.addPath(y,new DOMMatrix(e.matrix)),y=b}f.clip(y),e.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),bo(i,f),this.ctx=f,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;let i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let a=jt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);let s=is.slice();j.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],a,s),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,i,r,a,s){if(this.#t(),au(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){let o=i[2]-i[0],l=i[3]-i[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=l,j.singularValueDecompose2dScale(jt(this.ctx),pn);let{viewportScale:c}=this,u=Math.ceil(o*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,h);let{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(pn[0],0,0,-pn[1],0,l*pn[1]),au(this.ctx)}else{au(this.ctx),this.endPath(t);let c=new Path2D;c.rect(i[0],i[1],o,l),this.ctx.clip(c)}}this.current=new Ru(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;let i=e.count;e=this.getObject(t,e.data,e),e.count=i;let r=this.ctx,a=this._createMaskCanvas(t,e),s=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(s,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,a=0,s,o){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);let l=this.ctx;l.save();let c=jt(l);l.transform(i,r,a,s,0,0);let u=this._createMaskCanvas(t,e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),this.dependencyTracker?.resetBBox(t);for(let h=0,d=o.length;h<d;h+=2){let f=j.transform(c,[i,r,a,s,o[h],o[h+1]]);l.drawImage(u.canvas,f[4],f[5]),this.dependencyTracker?.recordBBox(t,this.ctx,f[4],f[4]+u.canvas.width,f[5],f[5]+u.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;let i=this.ctx,r=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ln.transformAndFill);for(let s of e){let{data:o,width:l,height:c,transform:u}=s,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();let f=this.getObject(t,o,s);vS(d,f),d.globalCompositeOperation="source-in",d.fillStyle=a?r.getPattern(d,this,Qn(i),Ee.FILL,t):r,d.fillRect(0,0,l,c),d.restore(),i.save(),i.transform(...u),i.scale(1,-1),ru(i,h.canvas,0,0,l,c,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,l,0,c),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;let i=this.getObject(t,e);if(!i){et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,a){if(!this.contentVisible)return;let s=this.getObject(t,e);if(!s){et("Dependent image isn't ready yet");return}let o=s.width,l=s.height,c=[];for(let u=0,h=a.length;u<h;u+=2)c.push({transform:[i,0,0,r,a[u],a[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(t,s,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;let i=e.width,r=e.height,a=this.ctx;this.save(t);let{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/i,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{let u=this.cachedCanvases.getCanvas("inlineImage",i,r).context;yS(u,e),o=this.applyTransferMapsToCanvas(u)}let l=this._scaleImage(o,Qn(a));a.imageSmoothingEnabled=bS(jt(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,i,-r,0).recordDependencies(t,Ln.imageXObject).recordOperation(t),ru(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;let r=this.ctx,a;if(e.bitmap)a=e.bitmap;else{let s=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,o).context;yS(c,e),a=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(t);for(let s of i)r.save(),r.transform(...s.transform),r.scale(1,-1),ru(r,a,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ln.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){let r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);let a=this.ctx;this.pendingClip?(r||(this.pendingClip===wS?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform(),s,o;if(i===0&&r===0){let l=Math.abs(e),c=Math.abs(a);if(l===c)if(t===0)s=o=1/l;else{let u=l*t;s=o=u<1?1/u:1}else if(t===0)s=1/l,o=1/c;else{let u=l*t,h=c*t;s=u<1?1/u:1,o=h<1?1/h:1}}else{let l=Math.abs(e*a-i*r),c=Math.hypot(e,i),u=Math.hypot(r,a);if(t===0)s=u/l,o=c/l;else{let h=t*l;s=u>h?u/h:1,o=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t,e){let{ctx:i,current:{lineWidth:r}}=this,[a,s]=this.getScaleForStroking();if(a===s){i.lineWidth=(r||1)*a,i.stroke(t);return}let o=i.getLineDash();e&&i.save(),i.scale(a,s),jp.a=1/a,jp.d=1/s;let l=new Path2D;if(l.addPath(t,jp),o.length>0){let c=Math.max(a,s);i.setLineDash(o.map(u=>u/c)),i.lineDashOffset/=c}i.lineWidth=r||1,i.stroke(l),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let n in To)rs.prototype[n]!==void 0&&(rs.prototype[To[n]]=rs.prototype[n]);var Cu=class n{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){let e=new TextEncoder,i={},r=0;for(let c of n.strings){let u=e.encode(t[c]);i[c]=u,r+=4+u.length}let a=new ArrayBuffer(r),s=new Uint8Array(a),o=new DataView(a),l=0;for(let c of n.strings){let u=i[c],h=u.length;o.setUint32(l,h),s.set(u,l+4),l+=4+h}return gt(l===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){gt(t<n.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;let i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}},Du=class n{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){let e=new TextEncoder,i={},r=0;for(let d of n.strings){let f=e.encode(t[d]);i[d]=f,r+=4+f.length}r+=4;let a,s,o=1+r;t.style&&(a=e.encode(t.style.style),s=e.encode(t.style.weight),o+=4+a.length+4+s.length);let l=new ArrayBuffer(o),c=new Uint8Array(l),u=new DataView(l),h=0;u.setUint8(h++,t.guessFallback?1:0),u.setUint32(h,0),h+=4,r=0;for(let d of n.strings){let f=i[d],y=f.length;r+=4+y,u.setUint32(h,y),c.set(f,h+4),h+=4+y}return u.setUint32(h-r-4,r),t.style&&(u.setUint32(h,a.length),c.set(a,h+4),h+=4+a.length,u.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length),gt(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){gt(t<n.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;let i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);let e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;let r=this.#e.getUint32(t),a=this.#i.decode(new Uint8Array(this.#t,t+4,r));return{style:i,weight:a}}},_m=class n{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+2*4;static#n=this.#i+1+8*6;static#s=this.#n+1+2*3;#r;#a;#o;constructor({data:t,extra:e}){this.#r=t,this.#a=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){gt(t<n.bools.length,"Invalid boolean index");let e=Math.floor(t/4),i=t*2%8,r=this.#o.getUint8(e)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return gt(t<n.numbers.length,"Invalid number index"),this.#o.getFloat64(n.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=n.#e;if(this.#o.getUint8(t)===0)return;t+=1;let i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=n.#i;if(this.#o.getUint8(t)===0)return;t+=1;let i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=n.#n;if(this.#o.getUint8(t)===0)return;t+=1;let i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){gt(t<n.strings.length,"Invalid string index");let e=n.#s+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;let i=this.#o.getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,e+4,i)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=n.#s,e=this.#o.getUint32(t);t+=4+e;let i=this.#o.getUint32(t);t+=4+i;let r=this.#o.getUint32(t);t+=4+r;let a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#r,t+4,a)}clearData(){let t=n.#s,e=this.#o.getUint32(t);t+=4+e;let i=this.#o.getUint32(t);t+=4+i;let r=this.#o.getUint32(t);t+=4+r;let a=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=n.#s,e=this.#o.getUint32(t);t+=4+e;let i=this.#o.getUint32(t);t+=4+i;let r=this.#o.getUint32(t);if(r===0)return null;let a=new Uint8Array(r);return a.set(new Uint8Array(this.#r,t+4,r)),new Cu(a.buffer)}get systemFontInfo(){let t=n.#s,e=this.#o.getUint32(t);t+=4+e;let i=this.#o.getUint32(t);if(i===0)return null;let r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,t+4,i)),new Du(r.buffer)}static write(t){let e=t.systemFontInfo?Du.write(t.systemFontInfo):null,i=t.cssFontInfo?Cu.write(t.cssFontInfo):null,r=new TextEncoder,a={},s=0;for(let g of n.strings)a[g]=r.encode(t[g]),s+=4+a[g].length;let o=n.#s+4+s+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),l=new ArrayBuffer(o),c=new Uint8Array(l),u=new DataView(l),h=0,d=n.bools.length,f=0,y=0;for(let g=0;g<d;g++){let w=t[n.bools[g]];f|=(w===void 0?0:w?2:1)<<y,y+=2,(y===8||g===d-1)&&(u.setUint8(h++,f),f=0,y=0)}gt(h===n.#t,"FontInfo.write: Boolean properties offset mismatch");for(let g of n.numbers)u.setFloat64(h,t[g]),h+=8;if(gt(h===n.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){u.setUint8(h++,4);for(let g of t.bbox)u.setInt16(h,g,!0),h+=2}else u.setUint8(h++,0),h+=2*4;if(gt(h===n.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){u.setUint8(h++,6);for(let g of t.fontMatrix)u.setFloat64(h,g,!0),h+=8}else u.setUint8(h++,0),h+=8*6;if(gt(h===n.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){u.setUint8(h++,1);for(let g of t.defaultVMetrics)u.setInt16(h,g,!0),h+=2}else u.setUint8(h++,0),h+=3*2;gt(h===n.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),u.setUint32(n.#s,0),h+=4;for(let g of n.strings){let w=a[g],p=w.length;u.setUint32(h,p),c.set(w,h+4),h+=4+p}if(u.setUint32(n.#s,h-n.#s-4),!e)u.setUint32(h,0),h+=4;else{let g=e.byteLength;u.setUint32(h,g),gt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(e),h+4),h+=4+g}if(!i)u.setUint32(h,0),h+=4;else{let g=i.byteLength;u.setUint32(h,g),gt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(i),h+4),h+=4+g}return t.data===void 0?(u.setUint32(h,0),h+=4):(u.setUint32(h,t.data.length),c.set(t.data,h+4),h+=4+t.data.length),gt(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}},_i=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}},Tm=class{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}},es=Symbol("INTERNAL"),Rm=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){this.#t=!!(t&fn.DISPLAY),this.#e=!!(t&fn.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;let{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==es&&Ct("Internal method `_setVisible` called."),this.#i=i,this.#n=e}},Cm=class{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=fn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(let i of t.groups)this.#e.set(i.id,new Rm(e,i));if(t.baseState==="OFF")for(let i of this.#e.values())i._setVisible(es,!1);for(let i of t.on)this.#e.get(i)._setVisible(es,!0);for(let i of t.off)this.#e.get(i)._setVisible(es,!1);this.#i=this.getHash()}}#s(t){let e=t.length;if(e<2)return!0;let i=t[0];for(let r=1;r<e;r++){let a=t[r],s;if(Array.isArray(a))s=this.#s(a);else if(this.#e.has(a))s=this.#e.get(a).visible;else return et(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ku("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(et(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#e.has(e))return et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#e.has(e))return et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#e.has(e))return et(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#e.has(e))return et(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return et(`Unknown optional content policy ${t.policy}.`),!0}return et(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){let r=this.#e.get(t);if(!r){et(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(let a of r.rbGroups)for(let s of a)s!==t&&this.#e.get(s)?._setVisible(es,!1,!0);r._setVisible(es,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(let r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}let a=this.#e.get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;let t=new gu;for(let[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}},Dm=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){gt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:r,initialData:a,progressiveDone:s,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,a?.length>0){let l=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});gt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new Mm(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new Lm(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},Mm=class{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=_g(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(let a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Lm=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function bC(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let u=o(e);return u=unescape(u),u=l(u),u=c(u),a(u)}if(e=s(n),e){let u=c(e);return a(u)}if(e=i("filename","i").exec(n),e){e=e[1];let u=o(e);return u=c(u),a(u)}function i(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let d=new TextDecoder(u,{fatal:!0}),f=jo(h);h=d.decode(f),t=!1}catch{}}return h}function a(u){return t&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),t&&(u=r("iso-8859-1",u))),u}function s(u){let h=[],d,f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(u))!==null;){let[,g,w,p]=d;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[w,p]}let y=[];for(let g=0;g<h.length&&g in h;++g){let[w,p]=h[g];p=o(p),w&&(p=unescape(p),g===0&&(p=l(p))),y.push(p)}return y.join("")}function o(u){if(u.startsWith('"')){let h=u.slice(1).split('\\"');for(let d=0;d<h.length;++d){let f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function l(u){let h=u.indexOf("'");if(h===-1)return u;let d=u.slice(0,h),y=u.slice(h+1).replace(/^[^']*'/,"");return r(d,y)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,y){if(f==="q"||f==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),r(d,y);try{y=atob(y)}catch{}return r(d,y)})}return""}function MS(n,t){let e=new Headers;if(!n||!t||typeof t!="object")return e;for(let i in t){let r=t[i];r!==void 0&&e.append(i,r)}return e}function Zu(n){return URL.parse(n)?.origin??null}function LS({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){let r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function OS(n){let t=n.get("Content-Disposition");if(t){let e=bC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(_g(e))return e}return null}function Vo(n,t){return new as(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function NS(n){return n===200||n===206}function BS(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function kS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(et(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}var Om=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=MS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Nm(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new Bm(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},Nm=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let i=new Headers(t.headers),r=e.url;fetch(r,BS(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Zu(a.url),!NS(a.status))throw Vo(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();let s=a.headers,{allowRangeRequests:o,suggestedLength:l}=LS({responseHeaders:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=OS(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ti("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:kS(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},Bm=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;let r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);let s=r.url;fetch(s,BS(a,this._withCredentials,this._abortController)).then(o=>{let l=Zu(o.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!NS(o.status))throw Vo(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:kS(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},Gp=200,Yp=206;function wC(n){let t=n.response;return typeof t!="string"?t:jo(t).buffer}var km=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=MS(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){let e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[a,s]of this.headers)e.setRequestHeader(a,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Yp):r.expectedStatus=Gp,e.responseType="arraybuffer",gt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){let i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){let i=this.pendingRequests[t];if(!i)return;let r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}let a=r.status||Gp;if(!(a===Gp&&i.expectedStatus===Yp)&&a!==i.expectedStatus){i.onError(r.status);return}let o=wC(r);if(a===Yp){let l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?i.onDone({begin:parseInt(c[1],10),chunk:o}):(et('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone({begin:0,chunk:o}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},Pm=class{constructor(t){this._source=t,this._manager=new km(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Fm(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let i=new Im(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},Fm=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Zu(e.responseURL);let i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{let[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=LS({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=OS(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Vo(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},Im=class{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=Zu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Vo(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},SC=/^[a-z][a-z0-9\-+.]+:/i;function EC(n){if(SC.test(n))return new URL(n);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}var Um=class{constructor(t){this.source=t,this.url=EC(t.url),gt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new zm(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new Hm(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},zm=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Vo(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ti("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Hm=class{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let r=t.source;this._isStreamingSupported=!r.disableStream;let a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},wo=Symbol("INITIAL_DATA"),Mu=class{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:wo}}get(t,e=null){if(e){let r=this.#e(t);return r.promise.then(()=>e(r.data)),null}let i=this.#t[t];if(!i||i.data===wo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){let e=this.#t[t];return!!e&&e.data!==wo}delete(t){let e=this.#t[t];return!e||e.data===wo?!1:(delete this.#t[t],!0)}resolve(t,e=null){let i=this.#e(t);i.data=e,i.resolve()}clear(){for(let t in this.#t){let{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let t in this.#t){let{data:e}=this.#t[t];e!==wo&&(yield[t,e])}}},AC=1e5,SS=30,Bo=class n{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#_=new WeakMap;static#A=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Ti.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:r,pageHeight:a,pageX:s,pageY:o}=i.rawDims;this.#y=[1,0,0,-1,-s,o+a],this.#o=r,this.#a=a,n.#D(),Gr(e,i),this.#t.promise.finally(()=>{n.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=ce.platform;return lt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#R(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),n.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){let i=t.scale*Ti.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,Gr(this.#l,{rotation:r})),i!==this.#h){e?.(),this.#h=i;let a={div:null,properties:null,ctx:n.#M(this.#s)};for(let s of this.#u)a.properties=this.#m.get(s),a.div=s,this.#x(a)}}cancel(){let t=new ti("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#R(t){if(this.#i)return;this.#r.ctx??=n.#M(this.#s);let e=this.#u,i=this.#g;for(let r of t){if(e.length>AC){et("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){let a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#E(r)}}#E(t){let e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);let r=j.transform(this.#y,t.transform),a=Math.atan2(r[1],r[0]),s=this.#f[t.fontName];s.vertical&&(a+=Math.PI/2);let o=this.#n&&s.fontSubstitution||s.fontFamily;o=n.fontFamilyMap.get(o)||o;let l=Math.hypot(r[2],r[3]),c=l*n.#F(o,s,this.#s),u,h;a===0?(u=r[4],h=r[5]-c):(u=r[4]+c*Math.sin(a),h=r[5]-c*Math.cos(a));let d="calc(var(--total-scale-factor) *",f=e.style;this.#e===this.#l?(f.left=`${(100*u/this.#o).toFixed(2)}%`,f.top=`${(100*h/this.#a).toFixed(2)}%`):(f.left=`${d}${u.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(n.#A*l).toFixed(2)}px)`,f.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let g=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);g!==w&&Math.max(g,w)/Math.min(g,w)>1.5&&(y=!0)}if(y&&(i.canvasWidth=s.vertical?t.height:t.width),this.#m.set(e,i),this.#r.div=e,this.#r.properties=i,this.#x(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#e.append(g)}}#x(t){let{div:e,properties:i,ctx:r}=t,{style:a}=e,s="";if(n.#A>1&&(s=`scale(${1/n.#A})`),i.canvasWidth!==0&&i.hasText){let{fontFamily:o}=a,{canvasWidth:l,fontSize:c}=i;n.#C(r,c*this.#h,o);let{width:u}=r.measureText(e.textContent);u>0&&(s=`scaleX(${l*this.#h/u}) ${s}`)}i.angle!==0&&(s=`rotate(${i.angle}deg) ${s}`),s.length>0&&(a.transform=s)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(let{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#M(t=null){let e=this.#v.get(t||="");if(!e){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#_.set(e,{size:0,family:""})}return e}static#C(t,e,i){let r=this.#_.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#D(){if(this.#A!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#F(t,e,i){let r=this.#b.get(t);if(r)return r;let a=this.#M(i);a.canvas.width=a.canvas.height=SS,this.#C(a,SS,t);let s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let c=.8;return o?c=o/(o+l):(ce.platform.isFirefox&&et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?c=e.ascent:e.descent&&(c=1+e.descent)),this.#b.set(t,c),c}},xC=100;function Rg(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let t=new jm,{docId:e}=t,i=n.url?oC(n.url):null,r=n.data?lC(n.data):null,a=n.httpHeaders||null,s=n.withCredentials===!0,o=n.password??null,l=n.range instanceof Lu?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16,u=n.worker instanceof ko?n.worker:null,h=n.verbosity,d=typeof n.docBaseUrl=="string"&&!Wu(n.docBaseUrl)?n.docBaseUrl:null,f=tu(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Oe?fm:wu),w=tu(n.iccUrl),p=tu(n.standardFontDataUrl),m=n.StandardFontDataFactory||(Oe?pm:Au),b=tu(n.wasmUrl),E=n.WasmFactory||(Oe?mm:_u),A=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,x=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Oe,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Oe&&(ce.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:Oe,G=n.fontExtraProperties===!0,q=n.enableXfa===!0,Q=n.ownerDocument||globalThis.document,rt=n.disableRange===!0,Y=n.disableStream===!0,V=n.disableAutoFetch===!0,ct=n.pdfBug===!0,ue=n.CanvasFactory||(Oe?dm:cm),Ke=n.FilterFactory||(Oe?hm:um),he=n.enableHWA===!0,Pt=n.useWasm!==!1,yt=l?l.length:n.length??NaN,In=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Oe&&!F,mn=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===wu&&m===Au&&E===_u&&f&&p&&b&&Ao(f,document.baseURI)&&Ao(p,document.baseURI)&&Ao(b,document.baseURI)),gn=null;YR(h);let Yt={canvasFactory:new ue({ownerDocument:Q,enableHWA:he}),filterFactory:new Ke({docId:e,ownerDocument:Q}),cMapReaderFactory:mn?null:new g({baseUrl:f,isCompressed:y}),standardFontDataFactory:mn?null:new m({baseUrl:p}),wasmFactory:mn?null:new E({baseUrl:b})};u||(u=ko.create({verbosity:h,port:_i.workerPort}),t._worker=u);let Un={docId:e,apiVersion:"5.4.296",data:r,password:o,disableAutoFetch:V,rangeChunkSize:c,length:yt,docBaseUrl:d,enableXfa:q,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:A,isEvalSupported:x,isOffscreenCanvasSupported:D,isImageDecoderSupported:R,canvasMaxAreaInBytes:L,fontExtraProperties:G,useSystemFonts:In,useWasm:Pt,useWorkerFetch:mn,cMapUrl:f,iccUrl:w,standardFontDataUrl:p,wasmUrl:b}},Di={ownerDocument:Q,pdfBug:ct,styleElement:gn,loadingParams:{disableAutoFetch:V,enableXfa:q}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let qo=u.messageHandler.sendWithPromise("GetDocRequest",Un,r?[r.buffer]:null),fr;if(l)fr=new Dm(l,{disableRange:rt,disableStream:Y});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Wr=Ao(i)?Om:Oe?Um:Pm;fr=new Wr({url:i,length:yt,httpHeaders:a,withCredentials:s,rangeChunkSize:c,disableRange:rt,disableStream:Y})}return qo.then(Wr=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Ko=new jr(e,Wr,u.port),th=new Vm(Ko,t,fr,Di,Yt,he);t._transport=th,Ko.send("Ready",null)})}).catch(t._capability.reject),t}var jm=class n{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${n.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}},Lu=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#s=[];constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){this.#s.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(let i of this.#s)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(let i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(let e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(let t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ct("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Gm=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return lt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Ym=class{#t=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new fu:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Mu,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Do({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return lt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:a=lr.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:y=null}){this._stats?.time("Overall");let g=this._transport.getRenderingIntent(r,a,h,d),{renderingIntent:w,cacheKey:p}=g;this.#t=!1,l||=this._transport.getOptionalContentConfig(w);let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);let b=!!(w&fn.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));let E=!!(this._pdfBug&&globalThis.StepperManager?.enabled),A=!this.recordedBBoxes&&(f||E),T=R=>{if(m.renderTasks.delete(x),A){let L=x.gfx?.dependencyTracker.take();L&&(x.stepper&&x.stepper.setOperatorBBoxes(L,x.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=L))}b&&(this.#t=!0),this.#e(),R?(x.capability.reject(R),this._abortOperatorList({intentState:m,reason:R instanceof Error?R:new Error(R)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new Xm({callback:T,params:{canvas:e,canvasContext:t,dependencyTracker:A?new vm(e,m.operatorList.length,E):null,viewport:i,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:y});(m.renderTasks||=new Set).add(x);let D=x.task;return Promise.all([m.displayReadyCapability.promise,l]).then(([R,L])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(L.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:R,optionalContentConfig:L}),x.operatorListChanged()}).catch(T),D}getOperatorList({intent:t="display",annotationMode:e=lr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}let s=this._transport.getRenderingIntent(t,e,i,r,!0),o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Co.textContent(i));let e=this.streamTextContent(t);return new Promise(function(i,r){function a(){s.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},r)}let s=e.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;let e=this.#e();return t&&e&&(this._stats&&=new fu),e}#e(){if(!this.#t||this.destroyed)return!1;for(let{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){let i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){let{map:a,transfer:s}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},s).getReader(),c=this._intentStates.get(e);c.streamReader=l;let u=()=>{l.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let d of c.renderTasks)d.operatorListChanged();this.#e()}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Mo){let r=xC;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new ti(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}},ko=class n{#t=Promise.withResolvers();#e=null;#i=null;#n=null;static#s=0;static#r=!1;static#a=new WeakMap;static{Oe&&(this.#r=!0,_i.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;let r=new URL(e,i);return i.origin===r.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},this.fromPort=t=>{if(nC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(t)}}constructor({name:t=null,port:e=null,verbosity:i=VR()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(n.#a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");n.#a.set(e,this),this.#c(e)}else this.#l()}get promise(){return this.#t.promise}#o(){this.#t.resolve(),this.#e.send("configure",{verbosity:this.verbosity})}get port(){return this.#i}get messageHandler(){return this.#e}#c(t){this.#i=t,this.#e=new jr("main","worker",t),this.#e.on("ready",()=>{}),this.#o()}#l(){if(n.#r||n.#h){this.#d();return}let{workerSrc:t}=n;try{n._isSameOrigin(window.location,t)||(t=n._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),i=new jr("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?this.#t.reject(new Error("Worker was destroyed")):this.#d()},a=new AbortController;e.addEventListener("error",()=>{this.#n||r()},{signal:a.signal}),i.on("test",o=>{if(a.abort(),this.destroyed||!o){r();return}this.#e=i,this.#i=e,this.#n=e,this.#o()}),i.on("ready",o=>{if(a.abort(),this.destroyed){r();return}try{s()}catch{this.#d()}});let s=()=>{let o=new Uint8Array;i.send("test",o,[o.buffer])};s();return}catch{Ku("The worker has been disabled.")}this.#d()}#d(){n.#r||(et("Setting up fake worker."),n.#r=!0),n._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#t.reject(new Error("Worker was destroyed"));return}let e=new lm;this.#i=e;let i=`fake${n.#s++}`,r=new jr(i+"_worker",i,e);t.setup(r,e),this.#e=new jr(i,i+"_worker",e),this.#o()}).catch(t=>{this.#t.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this.#n?.terminate(),this.#n=null,n.#a.delete(this.#i),this.#i=null,this.#e?.destroy(),this.#e=null}static create(t){let e=this.#a.get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new n(t)}static get workerSrc(){if(_i.workerSrc)return _i.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#h(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return lt(this,"_setupFakeWorkerGlobal",(async()=>this.#h?this.#h:(await import(this.workerSrc)).WorkerMessageHandler)())}},Vm=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#s=null;constructor(t,e,i,r,a,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Mu,this.fontLoader=new am({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}#r(t,e=null){let i=this.#t.get(t);if(i)return i;let r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return lt(this,"annotationStorage",new Oo)}getRenderingIntent(t,e=lr.ENABLE,i=null,r=!1,a=!1){let s=fn.DISPLAY,o=rm;switch(t){case"any":s=fn.ANY;break;case"display":break;case"print":s=fn.PRINT;break;default:et(`getRenderingIntent - invalid intent: ${t}`)}let l=s&fn.PRINT&&i instanceof yu?i:this.annotationStorage;switch(e){case lr.DISABLE:s+=fn.ANNOTATIONS_DISABLE;break;case lr.ENABLE:break;case lr.ENABLE_FORMS:s+=fn.ANNOTATIONS_FORMS;break;case lr.ENABLE_STORAGE:s+=fn.ANNOTATIONS_STORAGE,o=l.serializable;break;default:et(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(s+=fn.IS_EDITING),a&&(s+=fn.OPLIST);let{ids:c,hash:u}=l.modifiedIds,h=[s,o.hash,u];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Bo.cleanup(),this._networkStream?.cancelAllRequests(new ti("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){r.close();return}gt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(s=>{if(!this.destroyed)throw s})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;let{isStreamingSupported:r,isRangeSupported:a,contentLength:s}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:s}}),t.on("GetRangeReader",(i,r)=>{gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){r.close();return}gt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{a.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Gm(i,this))}),t.on("DocException",i=>{e._capability.reject(Xe(i))}),t.on("PasswordRequest",i=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw Xe(i);let r=a=>{a instanceof Error?this.#s.reject(a):this.#s.resolve({password:a})};e.onPassword(r,i.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in a){let u=a.error;et(`Error during font loading: ${u}`),this.commonObjs.resolve(i,u);break}let s=new _m(a),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(u,h)=>globalThis.FontInspector.fontAdded(u,h):null,l=new sm(s,o,a.extra,a.charProcOperatorList);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&l.clearData(),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":let{imageRef:c}=a;gt(c,"The imageRef must be defined.");for(let u of this.#e.values())for(let[,h]of u.objs)if(h?.ref===c)return h.dataLen?(this.commonObjs.resolve(i,structuredClone(h)),h.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,s])=>{if(this.destroyed)return;let o=this.#e.get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(i,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");let r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,i=this.#i.get(e);if(i)return i;let r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,t);let s=new Ym(e,a,this,this._params.pdfBug);return this.#e.set(e,s),s});return this.#i.set(e,r),r}getPageIndex(t){return om(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new Cm(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#t.get(t);if(e)return e;let i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new Tm(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Bo.cleanup()}}cachedPageNumber(t){if(!om(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}},$m=class{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}},Xm=class n{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:y=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new $m(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=f,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(n.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:i,transform:r,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new rs(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),n.#e.delete(this._canvas),t||=new Mo(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n.#e.delete(this._canvas),this.callback())))}},_C="5.4.296",TC="f56dc8601",Ou=class n{#t=null;#e=null;#i;#n=null;#s=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return lt(this,"_keyboardManager",new Yr([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#a=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",n.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);let e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});let i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){let t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){let t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",On,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(let[i,r]of this.#l.highlightColors){let a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",n.#d[i]);let s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=r,a.ariaSelected=r===this.#i,a.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}let e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){n._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#s=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}let e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;let e=this.#l.highlightColors.values();for(let i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}},Nu=class n{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,n.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;let{editorType:t,colorType:e,colorValue:i}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",n.#n[t]),r.addEventListener("input",()=>{this.#i.updateParams(e,r.value)},{signal:this.#i._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}};function ES(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function So(n){return Math.max(0,Math.min(255,255*n))}var Bu=class{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=So(t),[t,t,t]}static G_HTML([t]){let e=ES(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(So)}static RGB_HTML(t){return`#${t.map(ES).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[So(1-Math.min(1,t+r)),So(1-Math.min(1,i+r)),So(1-Math.min(1,e+r))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){let r=1-t,a=1-e,s=1-i,o=Math.min(r,a,s);return["CMYK",r,a,s,o]}};var qm=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ct("Abstract method `_createSVG` called.")}},ss=class extends qm{_createSVG(t){return document.createElementNS(xi,t)}},RC=9,$r=new WeakSet,CC=new Date().getTimezoneOffset()*60*1e3,ku=class{static create(t){switch(t.data.annotationType){case ie.LINK:return new Po(t);case ie.TEXT:return new Wm(t);case ie.WIDGET:switch(t.data.fieldType){case"Tx":return new Zm(t);case"Btn":return t.data.radioButton?new Pu(t):t.data.checkBox?new Jm(t):new tg(t);case"Ch":return new eg(t);case"Sig":return new Qm(t)}return new Ri(t);case ie.POPUP:return new Fo(t);case ie.FREETEXT:return new Fu(t);case ie.LINE:return new ig(t);case ie.SQUARE:return new rg(t);case ie.CIRCLE:return new ag(t);case ie.POLYLINE:return new Iu(t);case ie.CARET:return new og(t);case ie.INK:return new Io(t);case ie.POLYGON:return new sg(t);case ie.HIGHLIGHT:return new Uu(t);case ie.UNDERLINE:return new lg(t);case ie.SQUIGGLY:return new cg(t);case ie.STRIKEOUT:return new ug(t);case ie.STAMP:return new zu(t);case ie.FILEATTACHMENT:return new hg(t);default:return new Gt(t)}}},Gt=class n{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;let{quadPoints:e,inkLists:i,rect:r}=this.data,a=-1/0,s=-1/0;if(e?.length>=8){for(let o=0;o<e.length;o+=8)e[o+1]>s?(s=e[o+1],a=e[o+2]):e[o+1]===s&&(a=Math.max(a,e[o+2]));return[a,s]}if(i?.length>=1){for(let o of i)for(let l=0,c=o.length;l<c;l+=2)o[l+1]>s?(s=o[l+1],a=o[l]):o[l+1]===s&&(a=Math.max(a,o[l]));if(a!==1/0)return[a,s]}return r?[r[2],r[3]]:null}_normalizePoint(t){let{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:s}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/i,t[1]=100*(t[1]-s)/r,t}get commentText(){let{data:t}=this;return this.annotationStorage.getRawValue(`${_o}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){let{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${_o}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});let{rect:e,popup:i}=t;e&&this.#n(e);let r=this.#i?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#i.popup),r&&(r.updateEdited(t),i?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){let{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-o)/a}%`,e.top=`${100*(s-t[3]+l)/s}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/s}%`):this.setRotation(r)}_createContainer(t){let{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof Ri)&&!(this instanceof Po)&&(a.tabIndex=0);let{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Fo){let{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,a),a}let{width:o,height:l}=this;if(!t&&e.borderStyle.width>0){s.borderWidth=`${e.borderStyle.width}px`;let g=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(g>0||w>0){let m=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=m}else if(this instanceof Pu){let m=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=m}switch(e.borderStyle.style){case ts.SOLID:s.borderStyle="solid";break;case ts.DASHED:s.borderStyle="dashed";break;case ts.BEVELED:et("Unimplemented border style: beveled");break;case ts.INSET:et("Unimplemented border style: inset");break;case ts.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let p=e.borderColor||null;p?(this.#e=!0,s.borderColor=j.makeHexColor(p[0]|0,p[1]|0,p[2]|0)):s.borderWidth=0}let c=j.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:h,pageX:d,pageY:f}=r.rawDims;s.left=`${100*(c[0]-d)/u}%`,s.top=`${100*(c[1]-f)/h}%`;let{rotation:y}=e;return e.hasOwnCanvas||y===0?(s.width=`${100*o/u}%`,s.height=`${100*l/h}%`):this.setRotation(y,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:s}=this;t%180!==0&&([a,s]=[s,a]),e.style.width=`${100*a/i}%`,e.style.height=`${100*s/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,i,r)=>{let a=r.detail[e],s=a[0],o=a.slice(1);r.target.style[i]=Bu[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:Bu[`${s}_rgb`](o)})};return lt(this,"_commonActions",{display:e=>{let{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){let i=this._commonActions;for(let r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let i=this._commonActions;for(let[r,a]of Object.entries(e)){let s=i[r];if(s){let o={detail:{[r]:a},target:t};s(o),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,i,r,a]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){let[g,w,p,m]=t.subarray(2,6);if(r===g&&a===w&&e===p&&i===m)return}let{style:s}=this.container,o;if(this.#e){let{borderColor:g,borderWidth:w}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}let l=r-e,c=a-i,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";let d=u.createElement("defs");h.append(d);let f=u.createElement("clipPath"),y=`clippath_${this.data.id}`;f.setAttribute("id",y),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let g=2,w=t.length;g<w;g+=8){let p=t[g],m=t[g+1],b=t[g+2],E=t[g+3],A=u.createElement("rect"),T=(b-e)/l,x=(a-m)/c,D=(p-b)/l,R=(m-E)/c;A.setAttribute("x",T),A.setAttribute("y",x),A.setAttribute("width",D),A.setAttribute("height",R),f.append(A),o?.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${x}" width="${D}" height="${R}"/>`)}this.#e&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(t=null){let{data:e}=this,i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);let a=this.#i=new Fo({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Ct("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let i=[];if(this._fieldObjects){let r=this._fieldObjects[t];if(r)for(let{page:a,id:s,exportValues:o}of r){if(a===-1||s===e)continue;let l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!$r.has(c)){et(`_getElementsByName - element not allowed: ${s}`);continue}i.push({id:s,exportValue:l,domElement:c})}return i}for(let r of document.getElementsByName(t)){let{exportValue:a}=r,s=r.getAttribute("data-element-id");s!==e&&$r.has(r)&&i.push({id:s,exportValue:a,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},Km=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}},Po=class extends Gt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(e.actions)){let a=i.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:r,refs:a,include:s}=e,o=[];if(r.length!==0||a.length!==0){let u=new Set(a);for(let h of r){let d=this._fieldObjects[h]||[];for(let{id:f}of d)u.add(f)}for(let h of Object.values(this._fieldObjects))for(let d of h)u.has(d.id)===s&&o.push(d)}else for(let u of Object.values(this._fieldObjects))o.push(...u);let l=this.annotationStorage,c=[];for(let u of o){let{id:h}=u;switch(c.push(h),u.type){case"text":{let f=u.defaultValue||"";l.setValue(h,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;l.setValue(h,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";l.setValue(h,{value:f});break}default:continue}let d=document.querySelector(`[data-element-id="${h}"]`);if(d){if(!$r.has(d)){et(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},Wm=class extends Gt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},Ri=class extends Gt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ce.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):t.addEventListener(i,s=>{if(i==="blur"){if(!e.focused||!s.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(s)}})})}_setEventListeners(t,e,i,r){for(let[a,s]of i)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,s,r),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":j.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||RC,a=t.style,s,o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(cu*r))||1,h=c/u;s=Math.min(r,l(h/cu))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(r,l(c/cu))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=j.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},Zm=class extends Ri{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){let a=this.annotationStorage;for(let s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=i),a.setValue(s.id,{[r]:i})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let r=t.getValue(e,{value:this.data.fieldValue}),a=r.value||"",s=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let l={userValue:a,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",o??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),$r.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;let{datetimeFormat:c,datetimeType:u,timeStep:h}=this.data,d=!!u&&this.enableScripting;c&&(i.title=c),this._setRequired(i,this.data.required),s&&(i.maxLength=s),i.addEventListener("input",y=>{t.setValue(e,{value:y.target.value}),this.setPropertyOnSiblings(i,"value",y.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",y=>{let g=this.data.defaultFieldValue??"";i.value=l.userValue=g,l.formattedValue=null});let f=y=>{let{formattedValue:g}=l;g!=null&&(y.target.value=g),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{if(l.focused)return;let{target:w}=g;if(d&&(w.type=u,h&&(w.step=h)),l.userValue){let p=l.userValue;if(d)if(u==="time"){let m=new Date(p),b=[m.getHours(),m.getMinutes(),m.getSeconds()];w.value=b.map(E=>E.toString().padStart(2,"0")).join(":")}else w.value=new Date(p-CC).toISOString().split(u==="date"?"T":".",1)[0];else w.value=p}l.lastCommittedValue=w.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);let w={value(p){l.userValue=p.detail.value??"",d||t.setValue(e,{value:l.userValue.toString()}),p.target.value=l.userValue},formattedValue(p){let{formattedValue:m}=p.detail;l.formattedValue=m,m!=null&&p.target!==document.activeElement&&(p.target.value=m);let b={formattedValue:m};d&&(b.value=m),t.setValue(e,b)},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{let{charLimit:m}=p.detail,{target:b}=p;if(m===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",m);let E=l.userValue;!E||E.length<=m||(E=E.slice(0,m),b.value=l.userValue=E,t.setValue(e,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(w,g)}),i.addEventListener("keydown",g=>{l.commitKey=1;let w=-1;if(g.key==="Escape"?w=0:g.key==="Enter"&&!this.data.multiLine?w=2:g.key==="Tab"&&(l.commitKey=3),w===-1)return;let{value:p}=g.target;l.lastCommittedValue!==p&&(l.lastCommittedValue=p,l.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:w,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});let y=f;f=null,i.addEventListener("blur",g=>{if(!l.focused||!g.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{target:w}=g,{value:p}=w;if(d){if(p&&u==="time"){let m=p.split(":").map(b=>parseInt(b,10));p=new Date(2e3,0,1,m[0],m[1],m[2]||0).valueOf(),w.step=""}else p.includes("T")||(p=`${p}T00:00`),p=new Date(p).valueOf();w.type="text"}l.userValue=p,l.lastCommittedValue!==p&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:l.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),y(g)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",g=>{l.lastCommittedValue=null;let{data:w,target:p}=g,{value:m,selectionStart:b,selectionEnd:E}=p,A=b,T=E;switch(g.inputType){case"deleteWordBackward":{let x=m.substring(0,b).match(/\w*[^\w]*$/);x&&(A-=x[0].length);break}case"deleteWordForward":{let x=m.substring(b).match(/^[^\w]*\w*/);x&&(T+=x[0].length);break}case"deleteContentBackward":b===E&&(A-=1);break;case"deleteContentForward":b===E&&(T+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,change:w||"",willCommit:!1,selStart:A,selEnd:T}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&i.addEventListener("blur",f),this.data.comb){let g=(this.data.rect[2]-this.data.rect[0])/s;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Qm=class extends Ri{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},Jm=class extends Ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,i=e.id,r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let a=document.createElement("input");return $r.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{let{name:o,checked:l}=s.target;for(let c of this._getElementsByName(o,i)){let u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(i,{value:l})}),a.addEventListener("resetform",s=>{let o=e.defaultFieldValue||"Off";s.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{let o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},Pu=class extends Ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,i=e.id,r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(let s of this._getElementsByName(e.fieldName,i))t.setValue(s.id,{value:!1});let a=document.createElement("input");if($r.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{let{name:o,checked:l}=s.target;for(let c of this._getElementsByName(o,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),a.addEventListener("resetform",s=>{let o=e.defaultFieldValue;s.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){let s=e.buttonValue;a.addEventListener("updatefromsandbox",o=>{let l={value:c=>{let u=s===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let d=u&&h.id===i;h.domElement&&(h.domElement.checked=d),t.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},tg=class extends Po{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},eg=class extends Ri{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");$r.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{let h=this.data.defaultFieldValue;for(let d of r.options)d.selected=d.value===h});for(let u of this.data.options){let h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,i.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),r.append(h)}let s=null;if(a){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),s=()=>{u.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}let o=u=>{let h=u?"value":"textContent",{options:d,multiple:f}=r;return f?Array.prototype.filter.call(d,y=>y.selected).map(y=>y[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]},l=o(!1),c=u=>{let h=u.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{let h={value(d){s?.();let f=d.detail.value,y=new Set(Array.isArray(f)?f:[f]);for(let g of r.options)g.selected=y.has(g.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(d){r.multiple=!0},remove(d){let f=r.options,y=d.detail.remove;f[y].selected=!1,r.remove(y),f.length>0&&Array.prototype.findIndex.call(f,w=>w.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:o(!0),items:c(d)}),l=o(!1)},clear(d){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(d){let{index:f,displayValue:y,exportValue:g}=d.detail.insert,w=r.children[f],p=document.createElement("option");p.textContent=y,p.value=g,w?w.before(p):r.append(p),t.setValue(e,{value:o(!0),items:c(d)}),l=o(!1)},items(d){let{items:f}=d.detail;for(;r.length!==0;)r.remove(0);for(let y of f){let{displayValue:g,exportValue:w}=y,p=document.createElement("option");p.textContent=g,p.value=w,r.append(p)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:o(!0),items:c(d)}),l=o(!1)},indices(d){let f=new Set(d.detail.indices);for(let y of d.target.options)y.selected=f.has(y.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,u)}),r.addEventListener("input",u=>{let h=o(!0),d=o(!1);t.setValue(e,{value:h}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},Fo=class extends Gt{constructor(t){let{data:e,elements:i,parent:r}=t,a=!!r._commentManager;if(super(t,{isRenderable:!a&&Gt._hasPopupData(e)}),this.elements=i,a&&Gt._hasPopupData(e)){let s=this.popup=this.#t();for(let o of i)o.popup=s}else this.popup=null}#t(){return new ng({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let e=this.popup=this.#t(),i=[];for(let r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${xg}${r}`).join(",")),this.container}},ng=class{#t=null;#e=this.#Y.bind(this);#i=this.#U.bind(this);#n=this.#N.bind(this);#s=this.#S.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#_=null;#A=null;#w=null;#R=!1;#E=null;#x=null;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:c,parentRect:u,open:h,commentManager:d=null}){this.#a=t,this.#A=r,this.#o=s,this.#_=o,this.#d=l,this.#r=e,this.#v=c,this.#h=u,this.#l=i,this.#t=d,this.#E=i[0],this.#c=Lo.toDateObject(a),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup()),d?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,h&&this.#S())}#M(){if(this.#p)return;this.#p=new AbortController;let{signal:t}=this.#p;for(let e of this.trigger)e.addEventListener("click",this.#s,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(let e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#C(){let t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#C(),!this.#y))return;let{signal:t}=this.#p=new AbortController,e=!!this.#E.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#E.container;for(let s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",this.#e,{signal:t}),s.addEventListener("click",i,{signal:t}),s.addEventListener("pointerenter",r,{signal:t}),s.addEventListener("pointerleave",a,{signal:t}),s.classList.add("popupTriggerArea")}else{let s=this.#m=document.createElement("button");s.className="annotationCommentButton";let o=this.#E.container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#D(),s.addEventListener("keydown",this.#e,{signal:t}),s.addEventListener("click",i,{signal:t}),s.addEventListener("pointerenter",r,{signal:t}),s.addEventListener("pointerleave",a,{signal:t}),o.after(s)}}#D(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();let[t,e]=this.#y,{style:i}=this.#m;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){let{color:t,opacity:e}=this.#E.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){let{richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}}get elementBeforePopup(){return this.#m}get comment(){return this.#x||=this.#E.commentText,this.#x}set comment(t){t!==this.comment&&(this.#E.commentText=this.#x=t)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;let{x:t,y:e,height:i}=this.#m.getBoundingClientRect(),{x:r,y:a,width:s,height:o}=this.#E.layer.getBoundingClientRect();return[(t-r)/s,(e+i-a)/o]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){let[e,i]=this.#b||this.commentButtonPosition.map(c=>c/100),r=this.parentBoundingClientRect,{x:a,y:s,width:o,height:l}=r;this.#t.showDialog(null,this,a+e*o,s+i*l,{...t,parentDimensions:r})}render(){if(this.#g)return;let t=this.#g=document.createElement("div");if(t.className="popup",this.#r){let i=t.style.outlineColor=j.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}let e=document.createElement("span");if(e.className="header",this.#A?.str){let i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){let i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}CS({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){let t=this.#_,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#_.html||null}get#B(){return this.#O?.attributes?.style?.fontSize||0}get#I(){return this.#O?.attributes?.style?.color||null}#k(t){let e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#I,fontSize:this.#B?`calc(${this.#B}px * var(--total-scale-factor))`:""}};for(let a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i}#Y(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#x=null):e&&(e.deleted?this.remove():(this.#F(),this.#x=e.text)),t&&(this.#y=null,this.#C(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#M(),this.#w||={contentsObj:this.#o,richText:this.#_},t&&(this.#u=null),e&&e.text&&(this.#_=this.#k(e.text),this.#c=Lo.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#_}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#R=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(let t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=this.#d,s=!!this.#h,o=s?this.#h:this.#v;for(let y of this.#l)if(!o||j.intersect(y.data.rect,o)!==null){o=y.data.rect,s=!0;break}let l=j.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),u=s?o[2]-o[0]+5:0,h=l[0]+u,d=l[1];this.#u=[100*(h-r)/e,100*(d-a)/i];let{style:f}=this.#a;f.left=`${this.#u[0]}%`,f.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#e)):(this.#U(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#R=this.isVisible,this.#R&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#R&&(this.#g||this.#N(),this.#R=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}},Fu=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=it.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},ig=class extends Gt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},rg=class extends Gt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,s=this.#t=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",e-a),s.setAttribute("height",i-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},ag=class extends Gt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,s=this.#t=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",i/2),s.setAttribute("rx",e/2-a/2),s.setAttribute("ry",i/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Iu=class extends Gt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:i,popupRef:r},width:a,height:s}=this;if(!e)return this.container;let o=this.svgFactory.create(a,s,!0),l=[];for(let u=0,h=e.length;u<h;u+=2){let d=e[u]-t[0],f=t[3]-e[u+1];l.push(`${d},${f}`)}l=l.join(" ");let c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},sg=class extends Iu{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},og=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Io=class extends Gt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?it.HIGHLIGHT:it.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:s,width:o,height:l}=this.#i(e,t),c=this.svgFactory.create(o,l,!0),u=this.#t=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",s);for(let h=0,d=i.length;h<d;h++){let f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",i[h].join(",")),u.append(f)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:e,points:i,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),i)for(let s=0,o=this.#e.length;s<o;s++)this.#e[s].setAttribute("points",i[s].join(","));if(r){let{transform:s,width:o,height:l}=this.#i(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Uu=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=it.HIGHLIGHT}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){let i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},lg=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){let i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},cg=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){let i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},ug=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){let i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},zu=class extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=it.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},hg=class extends Gt{#t=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;let{isMac:r}=ce.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},dg=class n{#t=null;#e=null;#i=null;#n=new Map;#s=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:s,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:u}){this.div=t,this.#t=e,this.#e=i,this.#s=o||null,this.#r=c||null,this.#i=u||new Oo,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){let r=t.firstChild||t,a=r.id=`${xg}${e}`,s=await this.#s?.getAriaAttributes(a);if(s)for(let[o,l]of s)r.setAttribute(o,l);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){let{annotations:e}=t,i=this.div;Gr(i,this.viewport);let r=new Map,a={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ss,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let s of e){if(s.noHTML)continue;let o=s.annotationType===ie.POPUP;if(o){let u=r.get(s.id);if(!u)continue;a.elements=u}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;a.data=s;let l=ku.create(a);if(!l.isRenderable)continue;if(!o&&s.popupRef){let u=r.get(s.popupRef);u?u.push(l):r.set(s.popupRef,[l])}let c=l.render();s.hidden&&(c.style.visibility="hidden"),await this.#a(c,s.id,a.elements),l.extraPopupElement?.popup?.renderCommentButton(),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#o()}async addLinkAnnotations(t){let e={data:null,layer:this.div,linkService:this.#r,svgFactory:new ss,parent:this};for(let i of t){i.borderStyle||=n._defaultBorderStyle,e.data=i;let r=ku.create(e);if(!r.isRenderable)continue;let a=r.render();await this.#a(a,i.id,null)}}update({viewport:t}){let e=this.div;this.viewport=t,Gr(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;let t=this.div;for(let[e,i]of this.#e){let r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";let{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);let s=this.#n.get(e);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,i),s._hasNoCanvas=!1):s.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){let{div:e}=this,{id:i,rotation:r}=t,a=new Km({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i}),s=a.render();return e.append(s),this.#t?.moveElementInDOM(e,s,s,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return lt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ts.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},su=/\r\n?|\n/g,fg=class n extends Lt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=n.prototype,e=a=>a.isEmpty(),i=Vr.TRANSLATE_SMALL,r=Vr.TRANSLATE_BIG;return lt(this,"_keyboardManager",new Yr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=it.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||n._defaultColor||Lt._defaultLineColor,this.#n=t.fontSize||n._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Lt.initialize(t,e);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case mt.FREETEXT_SIZE:n._defaultFontSize=e;break;case mt.FREETEXT_COLOR:n._defaultColor=e;break}}updateParams(t,e){switch(t){case mt.FREETEXT_SIZE:this.#s(e);break;case mt.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[mt.FREETEXT_SIZE,n._defaultFontSize],[mt.FREETEXT_COLOR,n._defaultColor||Lt._defaultLineColor]]}get propertiesToUpdate(){return[[mt.FREETEXT_SIZE,this.#n],[mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Nu(this),[["colorPicker",this._colorPicker]]}get colorType(){return mt.FREETEXT_COLOR}#s(t){let e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){let e=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-n._internalPadding*t,-(n._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;let t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){let t=[];this.editorDiv.normalize();let e=null;for(let i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(n.#c(i)),e=i);return t.join(`
`)}#o(){let[t,e]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:r,div:a}=this,s=a.style.display,o=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;let i=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){n._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[r,a]=this.parentDimensions;if(this.annotationElementId){let{position:s}=this._initialData,[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);let[c,u]=this.pageDimensions,[h,d]=this.pageTranslation,f,y;switch(this.rotation){case 0:f=t+(s[0]-h)/c,y=e+this.height-(s[1]-d)/u;break;case 90:f=t+(s[0]-h)/c,y=e-(s[1]-d)/u,[o,l]=[l,-o];break;case 180:f=t-this.width+(s[0]-h)/c,y=e-(s[1]-d)/u,[o,l]=[-o,-l];break;case 270:f=t+(s[0]-h-this.height*u)/c,y=e+(s[1]-d-this.width*c)/u,[o,l]=[-l,o];break}this.setAt(f*r,y*a,o,l)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(su,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let r=n.#h(e.getData("text")||"").replaceAll(su,`
`);if(!r)return;let a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();let s=a.getRangeAt(0);if(!r.includes(`
`)){s.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}let{startContainer:o,startOffset:l}=s,c=[],u=[];if(o.nodeType===Node.TEXT_NODE){let f=o.parentElement;if(u.push(o.nodeValue.slice(l).replaceAll(su,"")),f!==this.editorDiv){let y=c;for(let g of this.editorDiv.childNodes){if(g===f){y=u;continue}y.push(n.#c(g))}}c.push(o.nodeValue.slice(0,l).replaceAll(su,""))}else if(o===this.editorDiv){let f=c,y=0;for(let g of this.editorDiv.childNodes)y++===l&&(f=u),f.push(n.#c(g))}this.#t=`${c.join(`
`)}${r}${u.join(`
`)}`,this.#l();let h=new Range,d=Math.sumPrecise(c.map(f=>f.length));for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let y=f.nodeValue.length;if(d<=y){h.setStart(f,d),h.setEnd(f,d);break}d-=y}a.removeAllRanges(),a.addRange(h)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let t of this.#t.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll("\xA0"," ")}static#h(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}getPDFRect(){let t=n._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let r=null;if(t instanceof Fu){let{data:{defaultAppearanceData:{fontSize:s,fontColor:o},rect:l,rotation:c,id:u,popupRef:h,richText:d,contentsObj:f,creationDate:y,modificationDate:g},textContent:w,textPosition:p,parent:{page:{pageNumber:m}}}=t;if(!w||w.length===0)return null;r=t={annotationType:it.FREETEXT,color:Array.from(o),fontSize:s,value:w.join(`
`),position:p,pageIndex:m-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:h,comment:f?.str||null,richText:d,creationDate:y,modificationDate:g}}let a=await super.deserialize(t,e,i);return a.#n=t.fontSize,a.color=j.makeHexColor(...t.color),a.#t=n.#h(t.value),a._initialData=r,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=Lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){let{value:e,fontSize:i,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((s,o)=>s!==r[o])||t.pageIndex!==a}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(!e)return null;let{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(let r of this.#t.split(`
`)){let a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},H=class{static PRECISION=1e-4;toSVGPath(){Ct("Abstract method `toSVGPath` must be implemented.")}get box(){Ct("Abstract getter `box` must be implemented.")}serialize(t,e){Ct("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,s){s||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)s[o]=e+t[o]*r,s[o+1]=i+t[o+1]*a;return s}static _rescaleAndSwap(t,e,i,r,a,s){s||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)s[o]=e+t[o+1]*r,s[o+1]=i+t[o]*a;return s}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let a=0,s=t.length;a<s;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,s){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+s)/6,(i+a)/2,(r+s)/2]}},Hu=class n{#t;#e=[];#i;#n;#s=[];#r=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=n.#g+n.#p;constructor({x:t,y:e},i,r,a,s,o=0){this.#t=i,this.#h=a*r,this.#n=s,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=o,this.#l=n.#g*r,this.#c=n.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#m(){let t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,r,a,s]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/a,(this.#o+(t[1]-e[1])/2-r)/s,(this.#a+(e[0]-t[0])/2-i)/a,(this.#o+(e[1]-t[1])/2-r)/s]}add({x:t,y:e}){this.#a=t,this.#o=e;let[i,r,a,s]=this.#t,[o,l,c,u]=this.#r.subarray(8,12),h=t-c,d=e-u,f=Math.hypot(h,d);if(f<this.#c)return!1;let y=f-this.#l,g=y/f,w=g*h,p=g*d,m=o,b=l;o=c,l=u,c+=w,u+=p,this.#f?.push(t,e);let E=-p/y,A=w/y,T=E*this.#h,x=A*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+T,u+x],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-T,u-x],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([o+T,l+x],2),this.#s.push(NaN,NaN,NaN,NaN,(o+T-i)/a,(l+x-r)/s),this.#r.set([o-T,l-x],14),this.#e.push(NaN,NaN,NaN,NaN,(o-T-i)/a,(l-x-r)/s)),this.#r.set([m,b,o,l,c,u],6),!this.isEmpty()):(this.#r.set([m,b,o,l,c,u],6),Math.abs(Math.atan2(b-l,m-o)-Math.atan2(p,w))<Math.PI/2?([o,l,c,u]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+c)/2-i)/a,((l+u)/2-r)/s),[o,l,m,b]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((m+o)/2-i)/a,((b+l)/2-r)/s),!0):([m,b,o,l,c,u]=this.#r.subarray(0,6),this.#s.push(((m+5*o)/6-i)/a,((b+5*l)/6-r)/s,((5*o+c)/6-i)/a,((5*l+u)/6-r)/s,((o+c)/2-i)/a,((l+u)/2-r)/s),[c,u,o,l,m,b]=this.#r.subarray(12,18),this.#e.push(((m+5*o)/6-i)/a,((b+5*l)/6-r)/s,((5*o+c)/6-i)/a,((5*l+u)/6-r)/s,((o+c)/2-i)/a,((l+u)/2-r)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#s,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();let i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#b(i),i.join(" ")}#y(){let[t,e,i,r]=this.#t,[a,s,o,l]=this.#m();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/r} L${a} ${s} L${o} ${l} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/r} Z`}#b(t){let e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){let[e,i,r,a]=this.#t,s=this.#r.subarray(4,6),o=this.#r.subarray(16,18),[l,c,u,h]=this.#m();t.push(`L${(s[0]-e)/r} ${(s[1]-i)/a} L${l} ${c} L${u} ${h} L${(o[0]-e)/r} ${(o[1]-i)/a}`)}newFreeDrawOutline(t,e,i,r,a,s){return new ju(t,e,i,r,a,s)}getOutlines(){let t=this.#s,e=this.#e,i=this.#r,[r,a,s,o]=this.#t,l=new Float32Array((this.#f?.length??0)+2);for(let h=0,d=l.length-2;h<d;h+=2)l[h]=(this.#f[h]-r)/s,l[h+1]=(this.#f[h+1]-a)/o;if(l[l.length-2]=(this.#a-r)/s,l[l.length-1]=(this.#o-a)/o,isNaN(i[6])&&!this.isEmpty())return this.#_(l);let c=new Float32Array(this.#s.length+24+this.#e.length),u=t.length;for(let h=0;h<u;h+=2){if(isNaN(t[h])){c[h]=c[h+1]=NaN;continue}c[h]=t[h],c[h+1]=t[h+1]}u=this.#w(c,u);for(let h=e.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(e[h+d])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[h+d],c[u+1]=e[h+d+1],u+=2}return this.#A(c,u),this.newFreeDrawOutline(c,l,this.#t,this.#d,this.#i,this.#n)}#_(t){let e=this.#r,[i,r,a,s]=this.#t,[o,l,c,u]=this.#m(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/s,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/s,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/s],0),this.newFreeDrawOutline(h,t,this.#t,this.#d,this.#i,this.#n)}#A(t,e){let i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#w(t,e){let i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[a,s,o,l]=this.#t,[c,u,h,d]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(r[0]-a)/o,(r[1]-s)/l],e),e+=24}},ju=class extends H{#t;#e=new Float32Array(4);#i;#n;#s;#r;#a;constructor(t,e,i,r,a,s){super(),this.#a=t,this.#s=e,this.#t=i,this.#r=r,this.#i=a,this.#n=s,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(s);let[o,l,c,u]=this.#e;for(let h=0,d=t.length;h<d;h+=2)t[h]=(t[h]-o)/c,t[h+1]=(t[h+1]-l)/u;for(let h=0,d=e.length;h<d;h+=2)e[h]=(e[h]-o)/c,e[h+1]=(e[h+1]-l)/u}toSVGPath(){let t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],a){let s=i-t,o=r-e,l,c;switch(a){case 0:l=H._rescale(this.#a,t,r,s,-o),c=H._rescale(this.#s,t,r,s,-o);break;case 90:l=H._rescaleAndSwap(this.#a,t,e,s,o),c=H._rescaleAndSwap(this.#s,t,e,s,o);break;case 180:l=H._rescale(this.#a,i,e,-s,o),c=H._rescale(this.#s,i,e,-s,o);break;case 270:l=H._rescaleAndSwap(this.#a,i,r,-s,-o),c=H._rescaleAndSwap(this.#s,i,r,-s,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#o(t){let e=this.#a,i=e[4],r=e[5],a=[i,r,i,r],s=i,o=r,l=i,c=r,u=t?Math.max:Math.min,h=new Float32Array(4);for(let f=6,y=e.length;f<y;f+=6){let g=e[f+4],w=e[f+5];isNaN(e[f])?(j.pointBoundingBox(g,w,a),o>w?(s=g,o=w):o===w&&(s=u(s,g)),c<w?(l=g,c=w):c===w&&(l=u(l,g))):(h[0]=h[1]=1/0,h[2]=h[3]=-1/0,j.bezierBoundingBox(i,r,...e.slice(f,f+6),h),j.rectBoundingBox(h[0],h[1],h[2],h[3],a),o>h[1]?(s=h[0],o=h[1]):o===h[1]&&(s=u(s,h[0])),c<h[3]?(l=h[2],c=h[3]):c===h[3]&&(l=u(l,h[2]))),i=g,r=w}let d=this.#e;d[0]=a[0]-this.#i,d[1]=a[1]-this.#i,d[2]=a[2]-a[0]+2*this.#i,d[3]=a[3]-a[1]+2*this.#i,this.firstPoint=[s,o],this.lastPoint=[l,c]}get box(){return this.#e}newOutliner(t,e,i,r,a,s=0){return new Hu(t,e,i,r,a,s)}getNewOutline(t,e){let[i,r,a,s]=this.#e,[o,l,c,u]=this.#t,h=a*c,d=s*u,f=i*c+o,y=r*u+l,g=this.newOutliner({x:this.#s[0]*h+f,y:this.#s[1]*d+y},this.#t,this.#r,t,this.#n,e??this.#i);for(let w=2;w<this.#s.length;w+=2)g.add({x:this.#s[w]*h+f,y:this.#s[w+1]*d+y});return g.getOutlines()}},Uo=class{#t;#e;#i;#n=[];#s=[];constructor(t,e=0,i=0,r=!0){let a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(let{x:w,y:p,width:m,height:b}of t){let E=Math.floor((w-e)/o)*o,A=Math.ceil((w+m+e)/o)*o,T=Math.floor((p-e)/o)*o,x=Math.ceil((p+b+e)/o)*o,D=[E,T,x,!0],R=[A,T,x,!1];this.#n.push(D,R),j.rectBoundingBox(E,T,A,x,a)}let l=a[2]-a[0]+2*i,c=a[3]-a[1]+2*i,u=a[0]-i,h=a[1]-i,d=r?-1/0:1/0,f=1/0,y=this.#n.at(r?-1:-2),g=[y[0],y[2]];for(let w of this.#n){let[p,m,b,E]=w;!E&&r?m<f?(f=m,d=p):m===f&&(d=Math.max(d,p)):E&&!r&&(m<f?(f=m,d=p):m===f&&(d=Math.min(d,p))),w[0]=(p-u)/l,w[1]=(m-h)/c,w[2]=(b-h)/c}this.#t=new Float32Array([u,h,l,c]),this.#e=[d,f],this.#i=g}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);let t=[];for(let e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){let e=[],i=new Set;for(let s of t){let[o,l,c]=s;e.push([o,l,s],[o,c,s])}e.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=e.length;s<o;s+=2){let l=e[s][2],c=e[s+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}let r=[],a;for(;i.size>0;){let s=i.values().next().value,[o,l,c,u,h]=s;i.delete(s);let d=o,f=l;for(a=[o,c],r.push(a);;){let y;if(i.has(u))y=u;else if(i.has(h))y=h;else break;i.delete(y),[o,l,c,u,h]=y,d!==o&&(a.push(d,f,o,f===l?l:c),d=o),f=f===l?c:l}a.push(d,f)}return new pg(r,this.#t,this.#e,this.#i)}#a(t){let e=this.#s,i=0,r=e.length-1;for(;i<=r;){let a=i+r>>1,s=e[a][0];if(s===t)return a;s<t?i=a+1:r=a-1}return r+1}#o([,t,e]){let i=this.#a(t);this.#s.splice(i,0,[t,e])}#c([,t,e]){let i=this.#a(t);for(let r=i;r<this.#s.length;r++){let[a,s]=this.#s[r];if(a!==t)break;if(a===t&&s===e){this.#s.splice(r,1);return}}for(let r=i-1;r>=0;r--){let[a,s]=this.#s[r];if(a!==t)break;if(a===t&&s===e){this.#s.splice(r,1);return}}}#l(t){let[e,i,r]=t,a=[[e,i,r]],s=this.#a(r);for(let o=0;o<s;o++){let[l,c]=this.#s[o];for(let u=0,h=a.length;u<h;u++){let[,d,f]=a[u];if(!(c<=d||f<=l)){if(d>=l){if(f>c)a[u][1]=c;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=l,f>c&&a.push([e,c,f])}}}return a}},pg=class extends H{#t;#e;constructor(t,e,i,r){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=r}toSVGPath(){let t=[];for(let e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let a=2;a<e.length;a+=2){let s=e[a],o=e[a+1];s===i?(t.push(`V${o}`),r=o):o===r&&(t.push(`H${s}`),i=s)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],a){let s=[],o=i-t,l=r-e;for(let c of this.#e){let u=new Array(c.length);for(let h=0;h<c.length;h+=2)u[h]=t+c[h]*o,u[h+1]=r-c[h+1]*l;s.push(u)}return s}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},zo=class extends Hu{newFreeDrawOutline(t,e,i,r,a,s){return new mg(t,e,i,r,a,s)}},mg=class extends ju{newOutliner(t,e,i,r,a,s=0){return new zo(t,e,i,r,a,s)}},Gu=class n extends Lt{#t=null;#e=0;#i;#n=null;#s=null;#r=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=it.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=n.prototype;return lt(this,"_keyboardManager",new Yr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||n._defaultColor,this.#m=t.thickness||n._defaultThickness,this.opacity=t.opacity||n._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#E()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){let t=new Uo(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;let e=new Uo(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();let{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];let{lastPoint:r}=this.#r;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;let r=1.5;if(this.#r=t.getNewOutline(this.#m/2+r,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){let h=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:n.#x(this.#l.box,(h-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:n.#x(this.#r.box,h),path:{d:this.#r.toSVGPath()}})}let[a,s,o,l]=t.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=o,this.height=l;break;case 90:{let[h,d]=this.parentDimensions;this.x=s,this.y=1-a,this.width=o*d/h,this.height=l*h/d;break}case 180:this.x=1-a,this.y=1-s,this.width=o,this.height=l;break;case 270:{let[h,d]=this.parentDimensions;this.x=1-s,this.y=a,this.width=o*d/h,this.height=l*h/d;break}}let{firstPoint:c}=t;this.#f=[(c[0]-a)/o,(c[1]-s)/l];let{lastPoint:u}=this.#r;this.#g=[(u[0]-a)/o,(u[1]-s)/l]}static initialize(t,e){Lt.initialize(t,e),n._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case mt.HIGHLIGHT_COLOR:n._defaultColor=e;break;case mt.HIGHLIGHT_THICKNESS:n._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case mt.HIGHLIGHT_COLOR:this.#_(e);break;case mt.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[mt.HIGHLIGHT_COLOR,n._defaultColor],[mt.HIGHLIGHT_THICKNESS,n._defaultThickness]]}get propertiesToUpdate(){return[[mt.HIGHLIGHT_COLOR,this.color||n._defaultColor],[mt.HIGHLIGHT_THICKNESS,this.#m||n._defaultThickness],[mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#_(t){let e=(a,s)=>{this.color=a,this.opacity=s,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,n._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){let e=this.#m,i=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Ou({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#R():t&&(this.#E(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#x([t,e,i,r],a){switch(a){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){let{drawLayer:e}=this.parent,i;this.#h?(t=(t-this.rotation+360)%360,i=n.#x(this.#l.box,t)):i=n.#x([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:n.#x(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});let e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),DS(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(t){n._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;let e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#C(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#F(){if(this.#h)return null;let[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,a=this.#i,s=new Float32Array(a.length*8),o=0;for(let{x:l,y:c,width:u,height:h}of a){let d=l*t+i,f=(1-c)*e+r;s[o]=s[o+4]=d,s[o+1]=s[o+3]=f,s[o+2]=s[o+6]=d+u*t,s[o+5]=s[o+7]=f-h*e,o+=8}return s}#O(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:r,y:a}){let{x:s,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=f=>{u.abort(),this.#I(t,f)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Xt,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",On,{signal:h}),i.addEventListener("pointermove",this.#B.bind(this,t),{signal:h}),this._freeHighlight=new zo({x:r,y:a},[s,o,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#B(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof Uu){let{data:{quadPoints:y,rect:g,rotation:w,id:p,color:m,opacity:b,popupRef:E,richText:A,contentsObj:T,creationDate:x,modificationDate:D},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:it.HIGHLIGHT,color:Array.from(m),opacity:b,quadPoints:y,boxes:null,pageIndex:R-1,rect:g.slice(0),rotation:w,annotationElementId:p,id:p,deleted:!1,popupRef:E,richText:A,comment:T?.str||null,creationDate:x,modificationDate:D}}else if(t instanceof Io){let{data:{inkLists:y,rect:g,rotation:w,id:p,color:m,borderStyle:{rawWidth:b},popupRef:E,richText:A,contentsObj:T,creationDate:x,modificationDate:D},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:it.HIGHLIGHT,color:Array.from(m),thickness:b,inkLists:y,boxes:null,pageIndex:R-1,rect:g.slice(0),rotation:w,annotationElementId:p,id:p,deleted:!1,popupRef:E,richText:A,comment:T?.str||null,creationDate:x,modificationDate:D}}let{color:a,quadPoints:s,inkLists:o,opacity:l}=t,c=await super.deserialize(t,e,i);c.color=j.makeHexColor(...a),c.opacity=l||1,o&&(c.#m=t.thickness),c._initialData=r,t.comment&&c.setCommentData(t);let[u,h]=c.pageDimensions,[d,f]=c.pageTranslation;if(s){let y=c.#i=[];for(let g=0;g<s.length;g+=8)y.push({x:(s[g]-d)/u,y:1-(s[g+1]-f)/h,width:(s[g+2]-s[g])/u,height:(s[g+1]-s[g+5])/h});c.#b(),c.#E(),c.rotate(c.rotation)}else if(o){c.#h=!0;let y=o[0],g={x:y[0]-d,y:h-(y[1]-f)},w=new zo(g,[0,0,u,h],1,c.#m/2,!0,.001);for(let b=0,E=y.length;b<E;b+=2)g.x=y[b]-d,g.y=h-(y[b+1]-f),w.add(g);let{id:p,clipPathId:m}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);c.#v({highlightOutlines:w.getOutlines(),highlightId:p,clipPathId:m}),c.#E(),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#F(),outlines:this.#O(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#k(i)?null:(i.id=this.annotationElementId,i)}#k(t){let{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}},Yu=class{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){let t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ct("Not implemented")}},Vu=class n extends Lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#s=null;static#r=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){let{id:i}=e.drawLayer.draw(n._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){let i=new Set(Object.keys(t));for(let[r,a]of Object.entries(e))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ct("Not implemented")}static get typesMap(){Ct("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){let i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(n.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){let i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){let t=[],e=this._defaultDrawingOptions;for(let[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:e}=this;for(let[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){let r=this._drawingOptions,a=r[e],s=o=>{r.updateProperty(e,o);let l=this.#t.updateProperty(e,o);l&&this.#u(l),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,r]){let{parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[e,1-t,i*(s/a),r*(a/s)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(s/a),r*(a/s)];default:return[t,e,i,r]}}#p(){let{x:t,y:e,width:i,height:r,parentDimensions:[a,s],rotation:o}=this;switch(o){case 90:return[1-e,t,i*(a/s),r*(s/a)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(a/s),r*(s/a)];default:return[t,e,i,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){let{x:t,y:e,width:i,height:r,rotation:a,parentRotation:s,parentDimensions:[o,l]}=this;switch((a*4+s)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(o/l),r*(l/o),i*(o/l)];case 5:return[1-e,t,i*(o/l),r*(l/o)];case 6:return[1-t-r*(l/o),1-e,r*(l/o),i*(o/l)];case 7:return[e-i*(o/l),1-t-r*(l/o),i*(o/l),r*(l/o)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(l/o),e,r*(l/o),i*(o/l)];case 13:return[1-e-i*(o/l),t-r*(l/o),i*(o/l),r*(l/o)];case 14:return[1-t,1-e-i*(o/l),r*(l/o),i*(o/l)];case 15:return[e,1-t,i*(o/l),r*(l/o)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);let i=super.render();i.classList.add("draw");let r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,r,a){Ct("Not implemented")}static startDrawing(t,e,i,r){let{target:a,offsetX:s,offsetY:o,pointerId:l,pointerType:c}=r;if(n.#a&&n.#a!==c)return;let{viewport:{rotation:u}}=t,{width:h,height:d}=a.getBoundingClientRect(),f=n.#n=new AbortController,y=t.combinedSignal(f);if(n.#r||=l,n.#a??=c,window.addEventListener("pointerup",g=>{n.#r===g.pointerId?this._endDraw(g):n.#o?.delete(g.pointerId)},{signal:y}),window.addEventListener("pointercancel",g=>{n.#r===g.pointerId?this._currentParent.endDrawingSession():n.#o?.delete(g.pointerId)},{signal:y}),window.addEventListener("pointerdown",g=>{n.#a===g.pointerType&&((n.#o||=new Set).add(g.pointerId),n.#i.isCancellable()&&(n.#i.removeLastElement(),n.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",On,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",g=>{g.timeStamp===n.#c&&Xt(g)},{signal:y}),t.toggleDrawing(),e._editorUndoBar?.hide(),n.#i){t.drawLayer.updateProperties(this._currentDrawId,n.#i.startNew(s,o,h,d,u));return}e.updateUIForDefaultProperties(this),n.#i=this.createDrawerInstance(s,o,h,d,u),n.#s=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(n.#s.toSVGProperties(),n.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(n.#c=-1,!n.#i)return;let{offsetX:e,offsetY:i,pointerId:r}=t;if(n.#r===r){if(n.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,n.#i.add(e,i)),n.#c=t.timeStamp,Xt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,n.#i=null,n.#s=null,n.#a=null,n.#c=NaN),n.#n&&(n.#n.abort(),n.#n=null,n.#r=NaN,n.#o=null)}static _endDraw(t){let e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,n.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let i=n.#i,r=this._currentDrawId,a=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(mt.DRAW_STEP),!n.#i.isEmpty()){let{pageDimensions:[i,r],scale:a}=e,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:n.#i.getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:n.#s,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,a,s){Ct("Not implemented")}static async deserialize(t,e,i){let{rawDims:{pageWidth:r,pageHeight:a,pageX:s,pageY:o}}=e.viewport,l=this.deserializeDraw(s,o,r,a,this._INNER_MARGIN,t),c=await super.deserialize(t,e,i);return c.createDrawingOptions(t),c.#l({drawOutlines:l}),c.#f(),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){let[e,i]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}},gg=class{#t=new Float64Array(6);#e;#i;#n;#s;#r;#a="";#o=0;#c=new Xr;#l;#d;constructor(t,e,i,r,a,s){this.#l=i,this.#d=r,this.#n=a,this.#s=s,[t,e]=this.#h(t,e);let o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#i=[{line:o,points:this.#r}],this.#t.set(o,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#h(t,e){return H._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);let[i,r,a,s]=this.#t.subarray(2,6),o=t-a,l=e-s;return Math.hypot(this.#l*o,this.#d*l)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([a,s,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,a,s,t,e],0),this.#e.push(...H.createBezierPoints(i,r,a,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){this.#l=i,this.#d=r,this.#n=a,[t,e]=this.#h(t,e);let s=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];let o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:s,points:this.#r}),this.#t.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){let{line:i,points:r}=this.#i[t];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){let t=H.svgRound(this.#e[4]),e=H.svgRound(this.#e[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#r.length<=6){let r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){let r=H.svgRound(this.#e[10]),a=H.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${a}`,this.#o=12,this.#a}let i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,a=this.#e.length;r<a;r+=6){let[s,o,l,c,u,h]=this.#e.slice(r,r+6).map(H.svgRound);i.push(`C${s} ${o} ${l} ${c} ${u} ${h}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,r){let a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#i,t,e,i,this.#n,this.#s,r),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},Xr=class extends H{#t;#e=0;#i;#n;#s;#r;#a;#o;#c;build(t,e,i,r,a,s,o){this.#s=e,this.#r=i,this.#a=r,this.#o=a,this.#c=s,this.#i=o??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:e}of this.#n){if(t.push(`M${H.svgRound(e[4])} ${H.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${H.svgRound(e[10])} ${H.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){let[a,s,o,l,c,u]=e.subarray(i,i+6).map(H.svgRound);t.push(`C${a} ${s} ${o} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,e,i,r],a){let s=[],o=[],[l,c,u,h]=this.#d(),d,f,y,g,w,p,m,b,E;switch(this.#o){case 0:E=H._rescale,d=t,f=e+r,y=i,g=-r,w=t+l*i,p=e+(1-c-h)*r,m=t+(l+u)*i,b=e+(1-c)*r;break;case 90:E=H._rescaleAndSwap,d=t,f=e,y=i,g=r,w=t+c*i,p=e+l*r,m=t+(c+h)*i,b=e+(l+u)*r;break;case 180:E=H._rescale,d=t+i,f=e,y=-i,g=r,w=t+(1-l-u)*i,p=e+c*r,m=t+(1-l)*i,b=e+(c+h)*r;break;case 270:E=H._rescaleAndSwap,d=t+i,f=e+r,y=-i,g=-r,w=t+(1-c-h)*i,p=e+(1-l-u)*r,m=t+(1-c)*i,b=e+(1-l)*r;break}for(let{line:A,points:T}of this.#n)s.push(E(A,d,f,y,g,a?new Array(A.length):null)),o.push(E(T,d,f,y,g,a?new Array(T.length):null));return{lines:s,points:o,rect:[w,p,m,b]}}static deserialize(t,e,i,r,a,{paths:{lines:s,points:o},rotation:l,thickness:c}){let u=[],h,d,f,y,g;switch(l){case 0:g=H._rescale,h=-t/i,d=e/r+1,f=1/i,y=-1/r;break;case 90:g=H._rescaleAndSwap,h=-e/r,d=-t/i,f=1/r,y=1/i;break;case 180:g=H._rescale,h=t/i+1,d=-e/r,f=-1/i,y=1/r;break;case 270:g=H._rescaleAndSwap,h=e/r+1,d=t/i+1,f=-1/r,y=-1/i;break}if(!s){s=[];for(let p of o){let m=p.length;if(m===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1]]));continue}if(m===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1],NaN,NaN,NaN,NaN,p[2],p[3]]));continue}let b=new Float32Array(3*(m-2));s.push(b);let[E,A,T,x]=p.subarray(0,4);b.set([NaN,NaN,NaN,NaN,E,A],0);for(let D=4;D<m;D+=2){let R=p[D],L=p[D+1];b.set(H.createBezierPoints(E,A,T,x,R,L),(D-2)*3),[E,A,T,x]=[T,x,R,L]}}}for(let p=0,m=s.length;p<m;p++)u.push({line:g(s[p].map(b=>b??NaN),h,d,f,y),points:g(o[p].map(b=>b??NaN),h,d,f,y)});let w=new this.prototype.constructor;return w.build(u,i,r,1,l,c,a),w}#l(t=this.#c){let e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#s,e/this.#r]:[e/this.#r,e/this.#s]}#d(){let[t,e,i,r]=this.#t,[a,s]=this.#l(0);return[t+a,e+s,i-2*a,r-2*s]}#h(){let t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:r}of this.#n){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6)j.pointBoundingBox(r[o],r[o+1],t);continue}let a=r[4],s=r[5];for(let o=6,l=r.length;o<l;o+=6){let[c,u,h,d,f,y]=r.subarray(o,o+6);j.bezierBoundingBox(a,s,c,u,h,d,f,y,t),a=f,s=y}}let[e,i]=this.#l();t[0]=Ne(t[0]-e,0,1),t[1]=Ne(t[1]-i,0,1),t[2]=Ne(t[2]+e,0,1),t[3]=Ne(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){let[e,i]=this.#l();this.#c=t;let[r,a]=this.#l(),[s,o]=[r-e,a-i],l=this.#t;return l[0]-=s,l[1]-=o,l[2]+=2*s,l[3]+=2*o,l}updateParentDimensions([t,e],i){let[r,a]=this.#l();this.#s=t,this.#r=e,this.#a=i;let[s,o]=this.#l(),l=s-r,c=o-a,u=this.#t;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(H.svgRound).join(" ")}get defaultProperties(){let[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(e)}`}}}get rotationTransform(){let[,,t,e]=this.#t,i=0,r=0,a=0,s=0,o=0,l=0;switch(this.#e){case 90:r=e/t,a=-t/e,o=t;break;case 180:i=-1,s=-1,o=t,l=e;break;case 270:r=-e/t,a=t/e,l=e;break;default:return""}return`matrix(${i} ${r} ${a} ${s} ${H.svgRound(o)} ${H.svgRound(l)})`}getPathResizingSVGProperties([t,e,i,r]){let[a,s]=this.#l(),[o,l,c,u]=this.#t;if(Math.abs(c-a)<=H.PRECISION||Math.abs(u-s)<=H.PRECISION){let g=t+i/2-(o+c/2),w=e+r/2-(l+u/2);return{path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(e)}`,transform:`${this.rotationTransform} translate(${g} ${w})`}}}let h=(i-2*a)/(c-2*a),d=(r-2*s)/(u-2*s),f=c/i,y=u/r;return{path:{"transform-origin":`${H.svgRound(o)} ${H.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${y}) translate(${H.svgRound(a)} ${H.svgRound(s)}) scale(${h} ${d}) translate(${H.svgRound(-a)} ${H.svgRound(-s)})`}}}getPathResizedSVGProperties([t,e,i,r]){let[a,s]=this.#l(),o=this.#t,[l,c,u,h]=o;if(o[0]=t,o[1]=e,o[2]=i,o[3]=r,Math.abs(u-a)<=H.PRECISION||Math.abs(h-s)<=H.PRECISION){let w=t+i/2-(l+u/2),p=e+r/2-(c+h/2);for(let{line:m,points:b}of this.#n)H._translate(m,w,p,m),H._translate(b,w,p,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(i-2*a)/(u-2*a),f=(r-2*s)/(h-2*s),y=-d*(l+a)+t+a,g=-f*(c+s)+e+s;if(d!==1||f!==1||y!==0||g!==0)for(let{line:w,points:p}of this.#n)H._rescale(w,y,g,d,f,w),H._rescale(p,y,g,d,f,p);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${H.svgRound(t)} ${H.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){let[r,a]=i,s=this.#t,o=t-s[0],l=e-s[1];if(this.#s===r&&this.#r===a)for(let{line:c,points:u}of this.#n)H._translate(c,o,l,c),H._translate(u,o,l,u);else{let c=this.#s/r,u=this.#r/a;this.#s=r,this.#r=a;for(let{line:h,points:d}of this.#n)H._rescale(h,o,l,c,u,h),H._rescale(d,o,l,c,u,d);s[2]*=c,s[3]*=u}return s[0]=t,s[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t)} ${H.svgRound(e)}`}}}get defaultSVGProperties(){let t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${H.svgRound(t[0])} ${H.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},$u=class n extends Yu{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},yg=class n extends Vu{static _type="ink";static _editorType=it.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Lt.initialize(t,e),this._defaultDrawingOptions=new $u(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return lt(this,"typesMap",new Map([[mt.INK_THICKNESS,"stroke-width"],[mt.INK_COLOR,"stroke"],[mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,a){return new gg(t,e,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,a,s){return Xr.deserialize(t,e,i,r,a,s)}static async deserialize(t,e,i){let r=null;if(t instanceof Io){let{data:{inkLists:s,rect:o,rotation:l,id:c,color:u,opacity:h,borderStyle:{rawWidth:d},popupRef:f,richText:y,contentsObj:g,creationDate:w,modificationDate:p},parent:{page:{pageNumber:m}}}=t;r=t={annotationType:it.INK,color:Array.from(u),thickness:d,opacity:h,paths:{points:s},boxes:null,pageIndex:m-1,rect:o.slice(0),rotation:l,annotationElementId:c,id:c,deleted:!1,popupRef:f,richText:y,comment:g?.str||null,creationDate:w,modificationDate:p}}let a=await super.deserialize(t,e,i);return a._initialData=r,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new Nu(this),[["colorPicker",this._colorPicker]]}get colorType(){return mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=n.getDefaultDrawingOptions({stroke:j.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":s}}=this,o=Object.assign(super.serialize(t),{color:Lt._colorManager.convert(r),opacity:a,thickness:s,paths:{lines:e,points:i}});return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!this.#t(o)?null:(o.id=this.annotationElementId,o)}#t(t){let{color:e,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((s,o)=>s!==e[o])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}},Ho=class extends Xr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}},ou=8,Eo=3,cr=class{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,r,a,s,o){let l=this.#e(i,r,a,s);for(let c=0;c<8;c++){let u=(-c+l-o+16)%8,h=this.#i[2*u],d=this.#i[2*u+1];if(t[(i+h)*e+(r+d)]!==0)return u}return-1}static#s(t,e,i,r,a,s,o){let l=this.#e(i,r,a,s);for(let c=0;c<8;c++){let u=(c+l+o+16)%8,h=this.#i[2*u],d=this.#i[2*u+1];if(t[(i+h)*e+(r+d)]!==0)return u}return-1}static#r(t,e,i,r){let a=t.length,s=new Int32Array(a);for(let u=0;u<a;u++)s[u]=t[u]<=r?1:0;for(let u=1;u<i-1;u++)s[u*e]=s[u*e+e-1]=0;for(let u=0;u<e;u++)s[u]=s[e*i-1-u]=0;let o=1,l,c=[];for(let u=1;u<i-1;u++){l=1;for(let h=1;h<e-1;h++){let d=u*e+h,f=s[d];if(f===0)continue;let y=u,g=h;if(f===1&&s[d-1]===0)o+=1,g-=1;else if(f>=1&&s[d+1]===0)o+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}let w=[h,u],p=g===h+1,m={isHole:p,points:w,id:o,parent:0};c.push(m);let b;for(let F of c)if(F.id===l){b=F;break}b?b.isHole?m.parent=p?b.parent:l:m.parent=p?l:b.parent:m.parent=p?l:0;let E=this.#n(s,e,u,h,y,g,0);if(E===-1){s[d]=-o,s[d]!==1&&(l=Math.abs(s[d]));continue}let A=this.#i[2*E],T=this.#i[2*E+1],x=u+A,D=h+T;y=x,g=D;let R=u,L=h;for(;;){let F=this.#s(s,e,R,L,y,g,1);A=this.#i[2*F],T=this.#i[2*F+1];let G=R+A,q=L+T;w.push(q,G);let Q=R*e+L;if(s[Q+1]===0?s[Q]=-o:s[Q]===1&&(s[Q]=o),G===u&&q===h&&R===x&&L===D){s[d]!==1&&(l=Math.abs(s[d]));break}else y=R,g=L,R=G,L=q}}}return c}static#a(t,e,i,r){if(i-e<=4){for(let x=e;x<i-2;x+=2)r.push(t[x],t[x+1]);return}let a=t[e],s=t[e+1],o=t[i-4]-a,l=t[i-3]-s,c=Math.hypot(o,l),u=o/c,h=l/c,d=u*s-h*a,f=l/o,y=1/c,g=Math.atan(f),w=Math.cos(g),p=Math.sin(g),m=y*(Math.abs(w)+Math.abs(p)),b=y*(1-m+m**2),E=Math.max(Math.atan(Math.abs(p+w)*b),Math.atan(Math.abs(p-w)*b)),A=0,T=e;for(let x=e+2;x<i-2;x+=2){let D=Math.abs(d-u*t[x+1]+h*t[x]);D>A&&(T=x,A=D)}A>(c*E)**2?(this.#a(t,e,T+2,r),this.#a(t,T,i,r)):r.push(a,s)}static#o(t){let e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,r,a,s){let o=new Float32Array(s**2),l=-2*r**2,c=s>>1;for(let g=0;g<s;g++){let w=(g-c)**2;for(let p=0;p<s;p++)o[g*s+p]=Math.exp((w+(p-c)**2)/l)}let u=new Float32Array(256),h=-2*a**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/h);let d=t.length,f=new Uint8Array(d),y=new Uint32Array(256);for(let g=0;g<i;g++)for(let w=0;w<e;w++){let p=g*e+w,m=t[p],b=0,E=0;for(let T=0;T<s;T++){let x=g+T-c;if(!(x<0||x>=i))for(let D=0;D<s;D++){let R=w+D-c;if(R<0||R>=e)continue;let L=t[x*e+R],F=o[T*s+D]*u[Math.abs(L-m)];b+=L*F,E+=F}}let A=f[p]=Math.round(b/E);y[A]++}return[f,y]}static#l(t){let e=new Uint32Array(256);for(let i of t)e[i]++;return e}static#d(t){let e=t.length,i=new Uint8ClampedArray(e>>2),r=-1/0,a=1/0;for(let o=0,l=i.length;o<l;o++){let c=i[o]=t[o<<2];r=Math.max(r,c),a=Math.min(a,c)}let s=255/(r-a);for(let o=0,l=i.length;o<l;o++)i[o]=(i[o]-a)*s;return i}static#h(t){let e,i=-1/0,r=-1/0,a=t.findIndex(l=>l!==0),s=a,o=a;for(e=a;e<256;e++){let l=t[e];l>i&&(e-s>r&&(r=e-s,o=e-1),i=l,s=e)}for(e=o-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){let e=t,{width:i,height:r}=t,{maxDim:a}=this.#t,s=i,o=r;if(i>a||r>a){let d=i,f=r,y=Math.log2(Math.max(i,r)/a),g=Math.floor(y);y=y===g?g-1:g;for(let p=0;p<y;p++){s=Math.ceil(d/2),o=Math.ceil(f/2);let m=new OffscreenCanvas(s,o);m.getContext("2d").drawImage(t,0,0,d,f,0,0,s,o),d=s,f=o,t!==e&&t.close(),t=m.transferToImageBitmap()}let w=Math.min(a/s,a/o);s=Math.round(s*w),o=Math.round(o*w)}let c=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,s,o),c.filter="grayscale(1)",c.drawImage(t,0,0,t.width,t.height,0,0,s,o);let u=c.getImageData(0,0,s,o).data;return[this.#d(u),s,o]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},a,s,o,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1}),h=200,d=u.font=`${i} ${r} ${h}px ${e}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:p,fontBoundingBoxDescent:m,width:b}=u.measureText(t),E=1.5,A=Math.ceil(Math.max(Math.abs(f)+Math.abs(y)||0,b)*E),T=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||h,Math.abs(p)+Math.abs(m)||h)*E);c=new OffscreenCanvas(A,T),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=d,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,A,T),u.fillStyle="black",u.fillText(t,A*(E-1)/2,T*(3-E)/2);let x=this.#d(u.getImageData(0,0,A,T).data),D=this.#l(x),R=this.#h(D),L=this.#r(x,A,T,R);return this.processDrawnLines({lines:{curves:L,width:A,height:T},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,a){let[s,o,l]=this.#f(t),[c,u]=this.#c(s,o,l,Math.hypot(o,l)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),h=this.#h(u),d=this.#r(c,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:s,areContours:o}){r%180!==0&&([e,i]=[i,e]);let{curves:l,width:c,height:u}=t,h=t.thickness??0,d=[],f=Math.min(e/c,i/u),y=f/e,g=f/i,w=[];for(let{points:m}of l){let b=s?this.#o(m):m;if(!b)continue;w.push(b);let E=b.length,A=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(d.push({line:T,points:A}),E===2){A[0]=b[0]*y,A[1]=b[1]*g,T.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[x,D,R,L]=b;x*=y,D*=g,R*=y,L*=g,A.set([x,D,R,L],0),T.set([NaN,NaN,NaN,NaN,x,D],0);for(let F=4;F<E;F+=2){let G=A[F]=b[F]*y,q=A[F+1]=b[F+1]*g;T.set(H.createBezierPoints(x,D,R,L,G,q),(F-2)*3),[x,D,R,L]=[R,L,G,q]}}if(d.length===0)return null;let p=o?new Ho:new Xr;return p.build(d,e,i,1,r,o?0:h,a),{outline:p,newCurves:w,areContours:o,thickness:h,width:c,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:a}){let s=1/0,o=-1/0,l=0;for(let b of t){l+=b.length;for(let E=2,A=b.length;E<A;E++){let T=b[E]-b[E-2];s=Math.min(s,T),o=Math.max(o,T)}}let c;s>=-128&&o<=127?c=Int8Array:s>=-32768&&o<=32767?c=Int16Array:c=Int32Array;let u=t.length,h=ou+Eo*u,d=new Uint32Array(h),f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=r,d[f++]=a,d[f++]=e?0:1,d[f++]=Math.max(0,Math.floor(i??0)),d[f++]=u,d[f++]=c.BYTES_PER_ELEMENT;for(let b of t)d[f++]=b.length-2,d[f++]=b[0],d[f++]=b[1];let y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(d);let w=c.prototype.constructor;for(let b of t){let E=new w(b.length-2);for(let A=2,T=b.length;A<T;A++)E[A-2]=b[A]-b[A-2];g.write(E)}g.close();let p=await new Response(y.readable).arrayBuffer(),m=new Uint8Array(p);return RS(m)}static async decompressSignature(t){try{let e=JR(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(let b of i)s||=new Uint8Array(new Uint32Array(b.buffer,0,4)[0]),s.set(b,o),o+=b.length;let l=new Uint32Array(s.buffer,0,s.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);let u=l[2],h=l[3],d=l[4]===0,f=l[5],y=l[6],g=l[7],w=[],p=(ou+Eo*y)*Uint32Array.BYTES_PER_ELEMENT,m;switch(g){case Int8Array.BYTES_PER_ELEMENT:m=new Int8Array(s.buffer,p);break;case Int16Array.BYTES_PER_ELEMENT:m=new Int16Array(s.buffer,p);break;case Int32Array.BYTES_PER_ELEMENT:m=new Int32Array(s.buffer,p);break}o=0;for(let b=0;b<y;b++){let E=l[Eo*b+ou],A=new Float32Array(E+2);w.push(A);for(let T=0;T<Eo-1;T++)A[T]=l[Eo*b+ou+T+1];for(let T=0;T<E;T++)A[T+2]=A[T]+m[o++]}return{areContours:d,thickness:f,outlines:w,width:u,height:h}}catch(e){return et(`decompressSignature: ${e}`),null}}},vg=class n extends Yu{constructor(){super(),super.updateProperties({fill:Lt._defaultLineColor,"stroke-width":0})}clone(){let t=new n;return t.updateAll(this),t}},bg=class n extends $u{constructor(t){super(t),super.updateProperties({stroke:Lt._defaultLineColor,"stroke-width":1})}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},wg=class n extends Vu{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=it.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Lt.initialize(t,e),this._defaultDrawingOptions=new vg,this._defaultDrawnSignatureOptions=new bg(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return lt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){let e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e,{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){let{lines:r,mustSmooth:a,areContours:s,description:o,uuid:l,heightInPage:c}=this.#i,{rawDims:{pageWidth:u,pageHeight:h},rotation:d}=this.parent.viewport,f=cr.processDrawnLines({lines:r,pageWidth:u,pageHeight:h,rotation:d,innerMargin:n._INNER_MARGIN,mustSmooth:a,areContours:s});this.addSignature(f,c,o,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:e,thickness:i,width:r,height:a}=this.#i,s=Math.max(r,a),o=cr.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:i,width:r,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,r){let{x:a,y:s}=this,{outline:o}=this.#i=t;this.#t=o instanceof Ho,this.description=i;let l;this.#t?l=n.getDefaultDrawingOptions():(l=n._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:l});let[,c]=this.pageDimensions,u=e/c;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=a,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return cr.process(t,e,i,r,n._INNER_MARGIN)}getFromText(t,e){let{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return cr.extractContoursFromText(t,e,i,r,a,n._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return cr.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:n._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=n.getDefaultDrawingOptions():(this._drawingOptions=n._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(a),t?(a.paths={lines:e,points:i},a.uuid=this.#n,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,i,r,a,s){return s.areContours?Ho.deserialize(t,e,i,r,a,s):Xr.deserialize(t,e,i,r,a,s)}static async deserialize(t,e,i){let r=await super.deserialize(t,e,i);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#n=t.uuid,r}},Sg=class extends Lt{#t=null;#e=null;#i=null;#n=null;#s=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=it.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Lt.initialize(t,e)}static isHandlingMimeForPasting(t){return Xp.includes(t)}static paste(t,e){e.pasteEditor({mode:it.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:r,width:a,height:s}=t||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:r,width:a,height:s,channels:r.length/(a*s)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let l=o.output;return await this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){let i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#s){let i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}let t=document.createElement("input");t.type="file",t.accept=Xp.join(",");let e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#s||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){let{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);let t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){let{div:t}=this,{width:e,height:i}=this.#t,[r,a]=this.pageDimensions,s=.75;if(this.width)e=this.width*r,i=this.height*a;else if(e>s*r||i>s*a){let l=Math.min(s*r/e,s*a/i);e*=l,i*=l}this._uiManager.enableWaiting(!1);let o=this.#a=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=e/r,this.height=i/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);let{width:r,height:a}=this.#t,s=new Ti,o=this.#t,l=r,c=a,u=null;if(e){if(r>e||a>e){let T=Math.min(e/r,e/a);l=Math.floor(r*T),c=Math.floor(a*T)}u=document.createElement("canvas");let d=u.width=Math.ceil(l*s.sx),f=u.height=Math.ceil(c*s.sy);this.#l||(o=this.#u(d,f));let y=u.getContext("2d");y.filter=this._uiManager.hcmFilter;let g="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":qp.isDarkMode&&(g="#8f8f9d",w="#42414d");let p=15,m=p*s.sx,b=p*s.sy,E=new OffscreenCanvas(m*2,b*2),A=E.getContext("2d");A.fillStyle=g,A.fillRect(0,0,m*2,b*2),A.fillStyle=w,A.fillRect(0,0,m,b),A.fillRect(m,b,m,b),y.fillStyle=y.createPattern(E,"repeat"),y.fillRect(0,0,d,f),y.drawImage(o,0,0,o.width,o.height,0,0,d,f)}let h=null;if(i){let d,f;if(s.symmetric&&o.width<t&&o.height<t)d=o.width,f=o.height;else if(o=this.#t,r>t||a>t){let w=Math.min(t/r,t/a);d=Math.floor(r*w),f=Math.floor(a*w),this.#l||(o=this.#u(d,f))}let g=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});g.drawImage(o,0,0,o.width,o.height,0,0,d,f),h={width:d,height:f,data:g.getImageData(0,0,d,f).data}}return{canvas:u,width:l,height:c,imageData:h}}#u(t,e){let{width:i,height:r}=this.#t,a=i,s=r,o=this.#t;for(;a>2*t||s>2*e;){let l=a,c=s;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));let u=new OffscreenCanvas(a,s);u.getContext("2d").drawImage(o,0,0,l,c,0,0,a,s),o=u.transferToImageBitmap()}return o}#m(){let[t,e]=this.parentDimensions,{width:i,height:r}=this,a=new Ti,s=Math.ceil(i*t*a.sx),o=Math.ceil(r*e*a.sy),l=this.#a;if(!l||l.width===s&&l.height===o)return;l.width=s,l.height=o;let c=this.#l?this.#t:this.#u(s,o),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,s,o)}#y(t){if(t){if(this.#l){let r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){let[e,i]=this.pageDimensions,r=Math.round(this.width*e*ur.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ur.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(r,a);return s.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),s.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let r=null,a=!1;if(t instanceof zu){let{data:{rect:g,rotation:w,id:p,structParent:m,popupRef:b,richText:E,contentsObj:A,creationDate:T,modificationDate:x},container:D,parent:{page:{pageNumber:R}},canvas:L}=t,F,G;L?(delete t.canvas,{id:F,bitmap:G}=i.imageManager.getFromCanvas(D.id,L),L.remove()):(a=!0,t._hasNoCanvas=!0);let q=(await e._structTree.getAriaAttributes(`${xg}${p}`))?.get("aria-label")||"";r=t={annotationType:it.STAMP,bitmapId:F,bitmap:G,pageIndex:R-1,rect:g.slice(0),rotation:w,annotationElementId:p,id:p,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:m,popupRef:b,richText:E,comment:A?.str||null,creationDate:T,modificationDate:x}}let s=await super.deserialize(t,e,i),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=t;a?(i.addMissingCanvas(t.id,s),s.#o=!0):u&&i.imageManager.isValidId(u)?(s.#e=u,l&&(s.#t=l)):s.#n=c,s.#l=h;let[f,y]=s.pageDimensions;return s.width=(o[2]-o[0])/f,s.height=(o[3]-o[1])/y,d&&(s.altTextData=d),s._initialData=r,t.comment&&s.setCommentData(t),s.#d=!!r,s}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let o=this.#b(i);return o.isSame?null:(o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;let s=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:s,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){let o=e.stamps.get(this.#e);s>o.area&&(o.area=s,o.serialized.bitmap.close(),o.serialized.bitmap=this.#y(!1))}return i}#b(t){let{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}},Eg=class n{#t;#e=!1;#i=null;#n=null;#s=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([fg,yg,Sg,Gu,wg].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:c,l10n:u}){let h=[...n.#m.values()];if(!n._initialized){n._initialized=!0;for(let d of h)d.initialize(u,t)}t.registerEditorTypes(h),this.#u=t,this.pageIndex=e,this.div=i,this.#t=a,this.#i=s,this.viewport=c,this.#h=l,this.drawLayer=o,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===it.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case it.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case it.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case it.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===it.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(let i of n.#m.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;let t=new Set;for(let i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));let e=this.#i;if(e)for(let i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;let r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;let i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{let{clientX:s,clientY:o,timeStamp:l}=r,c=this.#p;if(l-c>500){this.#p=l;return}this.#p=-1;let{classList:u}=this.div;u.toggle("getElements",!0);let h=document.elementsFromPoint(s,o);if(u.toggle("getElements",!1),!this.div.contains(h[0]))return;let d,f=new RegExp(`^${_o}[0-9]+$`);for(let g of h)if(f.test(g.id)){d=g.id;break}if(!d)return;let y=this.#r.get(d);y?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),y.dblclick(r))},{signal:i,capture:!0})}let t=this.#i;if(t){let i=new Map,r=new Map;for(let s of this.#y){if(s.disableEditing(),!s.annotationElementId){s.updateFakeAnnotationElement(t);continue}if(s.serialize()!==null){i.set(s.annotationElementId,s);continue}else r.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}let a=t.getEditableAnnotations();for(let s of a){let{id:o}=s.data;if(this.#u.isDeletedAnnotationElement(o)){s.updateEdited({deleted:!0});continue}let l=r.get(o);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=i.get(o),l&&(this.#u.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);let{classList:e}=this.div;for(let i of n.#m.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;let t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();let{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){let{isMac:i}=ce.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),Gu.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;let t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});let e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);let{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){let e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:e}=document;t.div.contains(e)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(let e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return n.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#_(t){let e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);let{offsetX:i,offsetY:r}=this.#A(),a=this.getNextId(),s=this.#_({parent:this,id:a,x:i,y:r,uiManager:this.#u,isCentered:!0,...e});s&&this.add(s)}async deserialize(t){return await n.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){let r=this.getNextId(),a=this.#_({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){let{x:t,y:e,width:i,height:r}=this.boundingClientRect,a=Math.max(0,t),s=Math.max(0,e),o=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+r),c=(a+o)/2-t,u=(s+l)/2-e,[h,d]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:d}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){let{isMac:e}=ce.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}let i=this.#u.getMode();if(i===it.STAMP||i===it.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===it.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}let{isMac:e}=ce.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}let i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;let e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){let{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){let r=this.#u.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(let t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Gr(this.div,t);for(let e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();let e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Gr(this.div,{rotation:i}),e!==i)for(let r of this.#r.values())r.rotate(i)}get pageDimensions(){let{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}},Ag=class n{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(let e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return lt(this,"_svgFactory",new ss)}static#s(t,[e,i,r,a]){let{style:s}=t;s.top=`${100*i}%`,s.left=`${100*e}%`,s.width=`${100*r}%`,s.height=`${100*a}%`}#r(){let t=n._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){let i=n._svgFactory.createElement("clipPath");t.append(i);let r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");let a=n._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#o(t,e){for(let[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){let r=n.#n++,a=this.#r(),s=n._svgFactory.createElement("defs");a.append(s);let o=n._svgFactory.createElement("path");s.append(o);let l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(r,o);let c=i?this.#a(s,l):null,u=n._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${c})`}}drawOutline(t,e){let i=n.#n++,r=this.#r(),a=n._svgFactory.createElement("defs");r.append(a);let s=n._svgFactory.createElement("path");a.append(s);let o=`path_p${this.pageIndex}_${i}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){let h=n._svgFactory.createElement("mask");a.append(h),l=`mask_p${this.pageIndex}_${i}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");let d=n._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let f=n._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}let c=n._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);let u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(i,r),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;let{root:i,bbox:r,rootClass:a,path:s}=e,o=typeof t=="number"?this.#e.get(t):t;if(o){if(i&&this.#o(o,i),r&&n.#s(o,r),a){let{classList:l}=o;for(let[c,u]of Object.entries(a))l.toggle(c,u)}if(s){let c=o.firstChild.firstChild;this.#o(c,s)}}}updateParent(t,e){if(e===this)return;let i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(let t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:Uo};globalThis.pdfjsLib={AbortException:ti,AnnotationEditorLayer:Eg,AnnotationEditorParamsType:mt,AnnotationEditorType:it,AnnotationEditorUIManager:Vr,AnnotationLayer:dg,AnnotationMode:lr,AnnotationType:ie,applyOpacity:aC,build:TC,ColorPicker:Ou,createValidAbsoluteUrl:AS,CSSConstants:Kp,DOMSVGFactory:ss,DrawLayer:Ag,FeatureTest:ce,fetchData:Go,findContrastColor:sC,getDocument:Rg,getFilenameFromUrl:tC,getPdfFilenameFromUrl:eC,getRGB:Yo,getUuid:TS,getXfaPageViewport:iC,GlobalWorkerOptions:_i,ImageKind:uu,InvalidPDFException:Ro,isDataScheme:Wu,isPdfFile:_g,isValidExplicitDest:uC,MathClamp:Ne,noContextMenu:On,normalizeUnicode:ZR,OPS:To,OutputScale:Ti,PasswordResponses:GR,PDFDataRangeTransport:Lu,PDFDateString:Lo,PDFWorker:ko,PermissionFlag:jR,PixelsPerInch:ur,RenderingCancelledException:Mo,renderRichText:CS,ResponseException:as,setLayerDimensions:Gr,shadow:lt,SignatureExtractor:cr,stopEvent:Xt,SupportedImageMimeTypes:Xp,TextLayer:Bo,TouchManager:mu,updateUrlHash:xS,Util:j,VerbosityLevel:Xu,version:_C,XfaLayer:du};var MC=window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1";_i.workerSrc=MC?"./pdf.worker.mjs":"/dist/pdf.worker.mjs";var Qu=class{constructor(){this.loadedImages=new Map}async loadImage(t){return new Promise((e,i)=>{let r=new Image;r.onload=()=>e(r),r.onerror=i,r.src=t})}async loadPdf(t,e=0){let r=await Rg(t).promise,a=e+1,s=await r.getPage(a),l=s.getViewport({scale:2}),c=document.createElement("canvas"),u=c.getContext("2d");if(!u)throw new Error("Failed to get canvas context for PDF rendering");c.width=l.width,c.height=l.height;let h={canvasContext:u,viewport:l};return await s.render(h).promise,new Promise((d,f)=>{c.toBlob(y=>{if(!y){f(new Error("Failed to convert PDF page to blob"));return}let g=new Image;g.onload=()=>{URL.revokeObjectURL(g.src),d(g)},g.onerror=f,g.src=URL.createObjectURL(y)})})}async loadAndCache(t,e,i){let r=i!==void 0?`${t}_page${i}`:t;if(!this.loadedImages.has(r))try{let s=e.startsWith("data:application/pdf")?await this.loadPdf(e,i??0):await this.loadImage(e);this.loadedImages.set(r,s)}catch(a){throw console.error(`Failed to load image/PDF ${t}:`,a),a}}has(t,e){let i=e!==void 0?`${t}_page${e}`:t;return this.loadedImages.has(i)}get(t,e){let i=e!==void 0?`${t}_page${e}`:t;return this.loadedImages.get(i)}applyConceptsTransform(t,e,i){t.transform(e.a,e.b,e.c,e.d,e.tx*i,e.ty*i)}render(t,e,i){let r=e.pageNumber!==void 0?`${e.uuid}_page${e.pageNumber}`:e.uuid,a=this.get(e.uuid,e.pageNumber);if(!a){console.warn(`[Renderer] Image not found in cache: ${r}`);return}if(t.save(),e.transform)this.applyConceptsTransform(t,e.transform,i);else{let l=e.position.x,c=e.position.y;t.translate(l*i,c*i)}let s=e.size.x*i/2,o=e.size.y*i/2;t.scale(1,-1),t.drawImage(a,-s,-o,e.size.x*i,e.size.y*i),t.restore()}};var ei={MIN_ZOOM:.1,MAX_ZOOM:10,ZOOM_STEP:1.2,WHEEL_ZOOM_FACTOR:.9},Ju=class{constructor(t){this.baseScale=1;this.userScale=1;this.panX=0;this.panY=0;this.offsetX=0;this.offsetY=0;this.isDragging=!1;this.lastMouseX=0;this.lastMouseY=0;this.currentDrawingData=null;this.logicalHeight=0;this.initialPanX=0;this.initialPanY=0;this.canvasRotation=0;this.imageRenderer=new Qu;this.canvas=t;let e=t.getContext("2d");if(!e)throw new Error("Failed to get 2D context from canvas");this.ctx=e,this.setupInteractions()}setupInteractions(){this.canvas.addEventListener("wheel",r=>{r.preventDefault();let a=this.canvas.getBoundingClientRect(),s=r.clientX-a.left,o=r.clientY-a.top,l=r.deltaY>0?ei.WHEEL_ZOOM_FACTOR:1/ei.WHEEL_ZOOM_FACTOR,c=this.userScale*l;c<ei.MIN_ZOOM||c>ei.MAX_ZOOM||(this.panX=s-(s-this.panX)*(c/this.userScale),this.panY=o-(o-this.panY)*(c/this.userScale),this.userScale=c,this.redraw())}),this.canvas.addEventListener("mousedown",r=>{r.preventDefault(),this.isDragging=!0,this.lastMouseX=r.clientX,this.lastMouseY=r.clientY,this.canvas.style.cursor="grabbing"}),this.canvas.addEventListener("mousemove",r=>{if(!this.isDragging)return;r.preventDefault();let a=r.clientX-this.lastMouseX,s=r.clientY-this.lastMouseY;this.panX+=a,this.panY+=s,this.lastMouseX=r.clientX,this.lastMouseY=r.clientY,this.redraw()}),window.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.canvas.style.cursor="grab")}),this.canvas.addEventListener("mouseleave",()=>{this.isDragging||(this.canvas.style.cursor="grab")}),this.canvas.addEventListener("dragstart",r=>(r.preventDefault(),!1));let t=0,e=0,i=0;this.canvas.addEventListener("touchstart",r=>{if(r.preventDefault(),r.touches.length===1)t=r.touches[0].clientX,e=r.touches[0].clientY;else if(r.touches.length===2){let a=r.touches[0].clientX-r.touches[1].clientX,s=r.touches[0].clientY-r.touches[1].clientY;i=Math.sqrt(a*a+s*s)}}),this.canvas.addEventListener("touchmove",r=>{if(r.preventDefault(),r.touches.length===1){let a=r.touches[0].clientX-t,s=r.touches[0].clientY-e;this.panX+=a,this.panY+=s,t=r.touches[0].clientX,e=r.touches[0].clientY,this.redraw()}else if(r.touches.length===2){let a=r.touches[0].clientX-r.touches[1].clientX,s=r.touches[0].clientY-r.touches[1].clientY,o=Math.sqrt(a*a+s*s);if(i>0){let l=(r.touches[0].clientX+r.touches[1].clientX)/2,c=(r.touches[0].clientY+r.touches[1].clientY)/2,u=this.canvas.getBoundingClientRect(),h=l-u.left,d=c-u.top,f=o/i,y=this.userScale*f;y>=ei.MIN_ZOOM&&y<=ei.MAX_ZOOM&&(this.panX=h-(h-this.panX)*(y/this.userScale),this.panY=d-(d-this.panY)*(y/this.userScale),this.userScale=y,this.redraw())}i=o}}),this.canvas.addEventListener("touchend",r=>{r.preventDefault(),r.touches.length<2&&(i=0)}),this.canvas.style.cursor="grab"}zoomIn(){let t=Math.min(ei.MAX_ZOOM,this.userScale*ei.ZOOM_STEP);this.zoomTowardCenter(t)}zoomOut(){let t=Math.max(ei.MIN_ZOOM,this.userScale/ei.ZOOM_STEP);this.zoomTowardCenter(t)}zoomTowardCenter(t){let e=this.canvas.getBoundingClientRect(),i=e.width/2,r=e.height/2;this.panX=i-(i-this.panX)*(t/this.userScale),this.panY=r-(r-this.panY)*(t/this.userScale),this.userScale=t,this.redraw()}resetView(){this.userScale=1,this.panX=this.initialPanX,this.panY=this.initialPanY,this.canvasRotation=0,this.redraw()}rotateClockwise(){this.canvasRotation=(this.canvasRotation+90)%360,this.redraw()}rotateCounterClockwise(){this.canvasRotation=(this.canvasRotation-90+360)%360,this.redraw()}transformPoint(t,e){if(!e)return t;let{a:i,b:r,c:a,d:s,tx:o,ty:l}=e;return{x:i*t.x+a*t.y+o,y:r*t.x+s*t.y+l}}applyConceptsTransform(t){this.ctx.transform(t.a,t.b,t.c,t.d,t.tx*this.baseScale,t.ty*this.baseScale)}calculateBounds(t){let e=1/0,i=1/0,r=-1/0,a=-1/0;for(let s of t.strokes)for(let o of s.points){let l=this.transformPoint(o,s.transform);e=Math.min(e,l.x),i=Math.min(i,l.y),r=Math.max(r,l.x),a=Math.max(a,l.y)}for(let s of t.images){let o=[{x:s.position.x,y:s.position.y},{x:s.position.x+s.size.x,y:s.position.y},{x:s.position.x,y:s.position.y+s.size.y},{x:s.position.x+s.size.x,y:s.position.y+s.size.y}];for(let l of o){let c=this.transformPoint(l,s.transform);e=Math.min(e,c.x),i=Math.min(i,c.y),r=Math.max(r,c.x),a=Math.max(a,c.y)}}return{minX:e,minY:i,maxX:r,maxY:a}}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}async render(t){this.currentDrawingData=t;let{strokes:e,images:i}=t;if(e.length===0&&i.length===0){console.warn("No strokes or images to render");return}for(let p of i)if(p.imageData&&!this.imageRenderer.has(p.uuid,p.pageNumber))try{await this.imageRenderer.loadAndCache(p.uuid,p.imageData,p.pageNumber)}catch(m){console.error(`Failed to load image/PDF ${p.uuid}:`,m)}let r=this.calculateBounds(t),a=r.maxX-r.minX,s=r.maxY-r.minY,o=this.canvas.getBoundingClientRect();this.logicalHeight=o.height,this.baseScale=1;let l=r.minX+a/2,c=r.minY+s/2,u=this.logicalHeight-c,h=o.width/2,d=o.height/2;this.offsetX=0,this.offsetY=0,this.initialPanX=h-l,this.initialPanY=d-u,this.panX=this.initialPanX,this.panY=this.initialPanY;let f=40,y=(o.width-f*2)/a,g=(o.height-f*2)/s,w=Math.min(y,g);this.userScale=1,this.zoomTowardCenter(w),this.redraw()}redraw(){if(this.currentDrawingData){if(this.clear(),this.ctx.save(),this.canvasRotation!==0){let t=this.canvas.getBoundingClientRect(),e=t.width/2,i=t.height/2;this.ctx.translate(e,i),this.ctx.rotate(this.canvasRotation*Math.PI/180),this.ctx.translate(-e,-i)}this.ctx.translate(this.panX,this.panY),this.ctx.scale(this.userScale,this.userScale),this.ctx.translate(0,this.logicalHeight),this.ctx.scale(1,-1);for(let t of this.currentDrawingData.images)this.imageRenderer.render(this.ctx,t,this.baseScale);this.ctx.lineCap="round",this.ctx.lineJoin="round";for(let t of this.currentDrawingData.strokes)this.renderStroke(t);this.ctx.restore()}}renderStroke(t){if(t.points.length===0)return;this.ctx.lineWidth=t.width*this.baseScale;let e=Math.round(t.color.r*255),i=Math.round(t.color.g*255),r=Math.round(t.color.b*255);this.ctx.strokeStyle=`rgba(${e}, ${i}, ${r}, ${t.color.a})`,t.transform&&(this.ctx.save(),this.applyConceptsTransform(t.transform)),this.ctx.beginPath();let a=t.points[0];this.ctx.moveTo(a.x*this.baseScale,a.y*this.baseScale);for(let s=1;s<t.points.length;s++){let o=t.points[s];this.ctx.lineTo(o.x*this.baseScale,o.y*this.baseScale)}t.closed&&this.ctx.closePath(),this.ctx.stroke(),t.transform&&this.ctx.restore()}resize(){let t=this.canvas.getBoundingClientRect(),e=window.devicePixelRatio||1;this.canvas.width=t.width*e,this.canvas.height=t.height*e,this.ctx.scale(e,e)}};function PS(){let n=(0,Nn.useRef)(null),t=(0,Nn.useRef)(null);(0,Nn.useEffect)(()=>{n.current&&!t.current&&(t.current=new Ju(n.current));let l=()=>{t.current?.resize()};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]);let e=(0,Nn.useCallback)(async l=>{t.current&&(t.current.resize(),await t.current.render(l))},[]),i=(0,Nn.useCallback)(()=>{t.current?.zoomIn()},[]),r=(0,Nn.useCallback)(()=>{t.current?.zoomOut()},[]),a=(0,Nn.useCallback)(()=>{t.current?.resetView()},[]),s=(0,Nn.useCallback)(()=>{t.current?.rotateClockwise()},[]),o=(0,Nn.useCallback)(()=>{t.current?.rotateCounterClockwise()},[]);return{canvasRef:n,render:e,zoomIn:i,zoomOut:r,resetView:a,rotateClockwise:s,rotateCounterClockwise:o}}B();var Ci=tt(zt());function FS({onZoomIn:n,onZoomOut:t,onReset:e,onBack:i,onRotateClockwise:r,onRotateCounterClockwise:a}){return(0,Ci.jsxs)("div",{className:"zoom-controls",children:[(0,Ci.jsx)("button",{onClick:n,className:"zoom-button",title:"Zoom In",children:"+"}),(0,Ci.jsx)("button",{onClick:t,className:"zoom-button",title:"Zoom Out",children:"\u2212"}),(0,Ci.jsx)("button",{onClick:a,className:"zoom-button",title:"Rotate Counter-Clockwise",children:"\u21B6"}),(0,Ci.jsx)("button",{onClick:r,className:"zoom-button",title:"Rotate Clockwise",children:"\u21B7"}),(0,Ci.jsx)("button",{onClick:e,className:"zoom-button",title:"Reset View",children:"\u2316"}),(0,Ci.jsx)("button",{onClick:i,className:"zoom-button",title:"Back to File Selector",children:"\u2190"})]})}B();var IS=tt(It()),zS=tt(zt());function US({message:n,type:t,show:e,onHide:i}){return(0,IS.useEffect)(()=>{if(e){let r=setTimeout(()=>{i()},3e3);return()=>clearTimeout(r)}},[e,i]),(0,zS.jsx)("div",{className:`status ${t} ${e?"show":""}`,children:n})}B();var HS="conceptsDrawingData";async function jS(n){try{await or(HS,n)}catch(t){throw console.error("Failed to save drawing data:",t),t}}async function GS(){try{return await Qa(HS)??null}catch(n){return console.error("Failed to get drawing data:",n),null}}var hr=tt(zt());function YS(){let n=cn(),t=Ce(),{canvasRef:e,render:i,zoomIn:r,zoomOut:a,resetView:s,rotateClockwise:o,rotateCounterClockwise:l}=PS(),[c,u]=(0,$o.useState)({message:"",type:"success",show:!1}),[h,d]=(0,$o.useState)(!0);(0,$o.useEffect)(()=>{async function g(){let w=n.state?.data;if(!w)w=await GS()??void 0;else{await jS(w);let p=n.state?.fromGallery,m=n.state?.galleryPath;p&&m&&localStorage.setItem("conceptsNavigationState",JSON.stringify({fromGallery:p,galleryPath:m}))}if(d(!1),!w){u({message:"No data found. Please select a file first.",type:"error",show:!0}),setTimeout(()=>{t("/")},2e3);return}u({message:`Loaded ${w.strokes.length} strokes and ${w.images.length} images`,type:"success",show:!0}),i(w)}g()},[n.state,t,i]);let f=()=>{let g=n.state?.fromGallery,w=n.state?.galleryPath;if(!g||!w){let p=localStorage.getItem("conceptsNavigationState");if(p)try{let m=JSON.parse(p);g=m.fromGallery,w=m.galleryPath}catch(m){console.error("Failed to parse saved navigation state:",m)}}if(g&&w){let p=w.map(encodeURIComponent).join("/");localStorage.removeItem("conceptsNavigationState"),t(`/gallery/${p}`)}else localStorage.removeItem("conceptsNavigationState"),t("/")},y=()=>{u(g=>({...g,show:!1}))};return(0,hr.jsxs)(hr.Fragment,{children:[(0,hr.jsx)("canvas",{ref:e,id:"canvas"}),(0,hr.jsx)(FS,{onZoomIn:r,onZoomOut:a,onReset:s,onBack:f,onRotateClockwise:o,onRotateCounterClockwise:l}),(0,hr.jsx)(US,{message:c.message,type:c.type,show:c.show,onHide:y})]})}B();var Xo=tt(It());B();var Kr=tt(It());B();var Wt=tt(zt());function VS({files:n,subdirectories:t,onFileClick:e,onDirectoryClick:i}){return(0,Wt.jsxs)("div",{className:"thumbnail-grid",children:[t.map(r=>(0,Wt.jsxs)("div",{className:"thumbnail-card directory-card",onClick:()=>i(r),children:[(0,Wt.jsx)("div",{className:"thumbnail-content folder-icon",children:(0,Wt.jsx)("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,Wt.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})}),(0,Wt.jsx)("div",{className:"thumbnail-name",children:r.name}),r.fileCount!==void 0&&(0,Wt.jsxs)("div",{className:"thumbnail-count",children:[r.fileCount," files"]})]},r.name)),n.map(r=>(0,Wt.jsxs)("div",{className:"thumbnail-card file-card",onClick:()=>e(r),children:[(0,Wt.jsx)("div",{className:"thumbnail-content",children:r.isLoading?(0,Wt.jsx)("div",{className:"thumbnail-loading",children:(0,Wt.jsx)("div",{className:"spinner"})}):r.thumbnail?(0,Wt.jsx)("img",{src:r.thumbnail,alt:r.name}):(0,Wt.jsx)("div",{className:"thumbnail-placeholder",children:(0,Wt.jsxs)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Wt.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,Wt.jsx)("polyline",{points:"14 2 14 8 20 8"})]})})}),(0,Wt.jsx)("div",{className:"thumbnail-name",children:r.name})]},r.fullName)),n.length===0&&t.length===0&&(0,Wt.jsx)("div",{className:"empty-state",children:(0,Wt.jsx)("p",{children:"No .concept files found in this directory"})})]})}B();B();import LC from"jszip";async function $S(n){try{let t=await n.arrayBuffer(),i=(await LC.loadAsync(t)).file("Thumb.jpg");if(!i)return console.warn(`No Thumb.jpg found in ${n.name}`),null;let r=await i.async("uint8array");return`data:image/jpeg;base64,${btoa(Array.from(r).map(s=>String.fromCharCode(s)).join(""))}`}catch(t){return console.error(`Failed to extract thumbnail from ${n.name}:`,t),null}}async function XS(n,t){let e=[],i=[],r=0;try{for await(let a of n.values()){if(a.name.startsWith("."))continue;r++,t&&t(r);let s=a.name.toLowerCase();if(a.kind==="file"&&(s.endsWith(".concept")||s.endsWith(".concepts"))){let o=await a.getFile();e.push({name:a.name.replace(/\.concepts?$/i,""),fullName:a.name,fileHandle:a,size:o.size,modified:o.lastModified})}else a.kind==="directory"&&i.push({name:a.name,dirHandle:a})}return e.sort((a,s)=>a.name.localeCompare(s.name)),i.sort((a,s)=>a.name.localeCompare(s.name)),{files:e,subdirectories:i}}catch(a){throw console.error("Failed to scan directory:",a),new Error("Failed to read directory contents")}}async function OC(n){if(!(n.thumbnail||n.isLoading)){n.isLoading=!0;try{let t=await n.fileHandle.getFile(),e=await $S(t);n.thumbnail=e||void 0}catch(t){console.error(`Failed to load thumbnail for ${n.name}:`,t),n.thumbnail=void 0}finally{n.isLoading=!1}}}async function qS(n,t,e){let i=n.length,r=0,a=5;for(let s=0;s<n.length;s+=a){if(e?.aborted)throw new Error("Thumbnail loading cancelled");let o=n.slice(s,s+a);await Promise.all(o.map(async l=>{await OC(l),r++,t&&t(r,i)}))}}function KS(n,t){let e=[{name:t||"Root",path:[]}];for(let i=0;i<n.length;i++)e.push({name:n[i],path:n.slice(0,i+1)});return e}var re=tt(zt());function WS({currentHandle:n,currentPath:t,rootFolderName:e,onNavigateTo:i,onNavigateInto:r,onNavigateUp:a,onSelectDifferentDirectory:s}){let o=Ce(),{processFile:l}=Vc(),[c,u]=(0,Kr.useState)(null),[h,d]=(0,Kr.useState)(!1),[f,y]=(0,Kr.useState)(!1),[g,w]=(0,Kr.useState)(null);(0,Kr.useEffect)(()=>{if(!n)return;let T=!1;return(async()=>{d(!0),w(null);try{let D=await XS(n);if(T||(u(D),d(!1),y(!0),await qS(D.files,()=>{u({...D})}),T))return;y(!1)}catch(D){if(T)return;console.error("Failed to load directory:",D),w(D instanceof Error?D.message:"Failed to load directory"),d(!1),y(!1)}})(),()=>{T=!0}},[n]);let p=KS(t,e),m=T=>{i(T).catch(x=>{console.error("Navigation failed:",x),w("Failed to navigate to directory")})},b=T=>{r(T.name).catch(x=>{console.error("Navigation failed:",x),w("Failed to enter directory")})},E=async T=>{try{let x=await T.fileHandle.getFile(),D=await l(x);o("/viewer",{state:{data:D,fromGallery:!0,galleryPath:t}})}catch(x){console.error("Failed to load concept file:",x),alert(`Failed to load file: ${x instanceof Error?x.message:"Unknown error"}`)}},A=()=>{t.length>0&&a().catch(T=>{console.error("Navigation failed:",T),w("Failed to navigate up")})};return g?(0,re.jsx)("div",{className:"status error",style:{margin:"2rem"},children:g}):c?(0,re.jsxs)("div",{className:"gallery-container",children:[(0,re.jsxs)("div",{className:"breadcrumb",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,re.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1},children:[t.length>0&&(0,re.jsxs)("button",{className:"back-button",onClick:A,children:[(0,re.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,re.jsx)("polyline",{points:"15 18 9 12 15 6"})}),"Back"]}),p.map((T,x)=>(0,re.jsxs)("div",{className:"breadcrumb-item",children:[x>0&&(0,re.jsx)("span",{className:"breadcrumb-separator",children:"/"}),x===p.length-1?(0,re.jsx)("span",{className:"breadcrumb-current",children:T.name}):(0,re.jsx)("a",{className:"breadcrumb-link",onClick:()=>m(T.path),children:T.name})]},T.path.join("/"))),f&&(0,re.jsx)("div",{style:{fontSize:"0.85rem",color:"#FF9500"},children:"Loading thumbnails..."})]}),(0,re.jsx)("button",{className:"button secondary",style:{padding:"0.5rem 1rem",fontSize:"0.85rem",whiteSpace:"nowrap"},onClick:s,children:"Select Different Directory"})]}),(0,re.jsx)("div",{className:"gallery-content",children:h?(0,re.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:[(0,re.jsx)("div",{className:"spinner",style:{margin:"0 auto 1rem"}}),(0,re.jsx)("p",{children:"Scanning directory..."})]}):(0,re.jsx)(VS,{files:c.files,subdirectories:c.subdirectories,onFileClick:E,onDirectoryClick:b})})]}):null}B();var dr=tt(It());function ZS(n){let[t,e]=(0,dr.useState)(null),[i,r]=(0,dr.useState)(null),[a,s]=(0,dr.useState)(!0),[o,l]=(0,dr.useState)(null);return(0,dr.useEffect)(()=>{Qc().then(c=>{e(c)}).catch(c=>{console.error("Failed to restore directory handle:",c),l("Failed to restore directory")}).finally(()=>{s(!1)})},[]),(0,dr.useEffect)(()=>{if(!t){r(null);return}let c=!1;return nS(t,n).then(u=>{c||(r(u),l(null))}).catch(u=>{c||(console.error("Failed to navigate to path:",u),l(`Failed to navigate to: ${n.join("/")}`),r(null),localStorage.removeItem("concepts-gallery-path"))}),()=>{c=!0}},[t,n]),{rootHandle:t,currentHandle:i,isRestoring:a,error:o}}var W=tt(zt()),Cg="concepts-gallery-path";function QS(){let n=up(),t=Ce(),e=n["*"]||"",i=(0,Xo.useMemo)(()=>e?e.split("/").map(decodeURIComponent).filter(Boolean):[],[e]);(0,Xo.useEffect)(()=>{i.length>0&&localStorage.setItem(Cg,JSON.stringify(i))},[i]),(0,Xo.useEffect)(()=>{if(e===""){let d=localStorage.getItem(Cg);if(d)try{let f=JSON.parse(d);if(f.length>0){let y=f.map(encodeURIComponent).join("/");t(`/gallery/${y}`,{replace:!0})}}catch(f){console.error("Failed to parse saved gallery path:",f),localStorage.removeItem(Cg)}}},[]);let{rootHandle:r,currentHandle:a,isRestoring:s,error:o}=ZS(i),l=async d=>{let f=d.map(encodeURIComponent).join("/");t(`/gallery/${f}`)},c=async d=>{let f=[...i,d];await l(f)},u=async()=>{if(i.length>0){let d=i.slice(0,-1);await l(d)}},h=async()=>{try{let d=await window.showDirectoryPicker({mode:"read"});await Wc(),await Zc(d),t("/gallery",{replace:!0}),window.location.reload()}catch(d){d instanceof Error&&d.name!=="AbortError"&&console.error("Failed to select directory:",d)}};return s?(0,W.jsxs)("div",{className:"container",children:[(0,W.jsxs)("header",{children:[(0,W.jsx)(Wn,{to:"/",children:(0,W.jsx)("img",{src:"favicon.png",alt:"Logo",className:"header-logo"})}),(0,W.jsxs)("div",{className:"header-text",children:[(0,W.jsx)("h1",{children:"Concepts File Viewer"}),(0,W.jsx)("p",{children:"Restoring session..."})]})]}),(0,W.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:[(0,W.jsx)("div",{className:"spinner",style:{margin:"0 auto 1rem"}}),(0,W.jsx)("p",{children:"Loading directory..."})]})]}):r?o||!a?(0,W.jsxs)("div",{className:"container",children:[(0,W.jsxs)("header",{children:[(0,W.jsx)(Wn,{to:"/",children:(0,W.jsx)("img",{src:"favicon.png",alt:"Logo",className:"header-logo"})}),(0,W.jsxs)("div",{className:"header-text",children:[(0,W.jsx)("h1",{children:"Concepts File Viewer"}),(0,W.jsx)("p",{children:"Error loading directory"})]})]}),(0,W.jsx)("div",{className:"status error",style:{margin:"2rem"},children:o||"Failed to load directory"}),(0,W.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem"},children:[(0,W.jsx)("button",{className:"button",onClick:()=>t("/gallery"),children:"Go to Root"}),(0,W.jsx)("button",{className:"button secondary",style:{marginLeft:"1rem"},onClick:h,children:"Select Different Directory"})]})]}):(0,W.jsxs)("div",{className:"container",children:[(0,W.jsxs)("header",{children:[(0,W.jsx)(Wn,{to:"/",children:(0,W.jsx)("img",{src:"favicon.png",alt:"Logo",className:"header-logo"})}),(0,W.jsxs)("div",{className:"header-text",children:[(0,W.jsx)("h1",{children:"Concepts File Viewer"}),(0,W.jsx)("p",{children:"View Concepts app drawings in your browser"})]})]}),(0,W.jsx)("div",{className:"action-bar",children:(0,W.jsxs)("button",{className:"button secondary",onClick:()=>t("/"),children:[(0,W.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,W.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,W.jsx)("polyline",{points:"12 19 5 12 12 5"})]}),"Back"]})}),(0,W.jsx)("div",{className:"main-content",children:(0,W.jsx)(WS,{currentHandle:a,currentPath:i,rootFolderName:r.name,onNavigateTo:l,onNavigateInto:c,onNavigateUp:u,onSelectDifferentDirectory:h})})]}):(0,W.jsxs)("div",{className:"container",children:[(0,W.jsxs)("header",{children:[(0,W.jsx)(Wn,{to:"/",children:(0,W.jsx)("img",{src:"favicon.png",alt:"Logo",className:"header-logo"})}),(0,W.jsxs)("div",{className:"header-text",children:[(0,W.jsx)("h1",{children:"Concepts File Viewer"}),(0,W.jsx)("p",{children:"No directory selected"})]})]}),(0,W.jsx)("div",{className:"status error",style:{margin:"2rem"},children:"No directory selected. Please go back and select a directory."}),(0,W.jsx)("div",{style:{textAlign:"center",marginTop:"1rem"},children:(0,W.jsx)("button",{className:"button",onClick:()=>t("/"),children:"Back to Home"})})]})}var Bn=tt(zt());function JS(){return(0,Bn.jsx)(wp,{children:(0,Bn.jsxs)(yp,{children:[(0,Bn.jsx)(Ur,{path:"/",element:(0,Bn.jsx)(iS,{})}),(0,Bn.jsx)(Ur,{path:"/gallery/*",element:(0,Bn.jsx)(QS,{})}),(0,Bn.jsx)(Ur,{path:"/viewer",element:(0,Bn.jsx)(YS,{})}),(0,Bn.jsx)(Ur,{path:"*",element:(0,Bn.jsx)(mp,{to:"/",replace:!0})})]})})}var nE=tt(zt());console.log("%c\u{1F3A8} Concepts File Viewer","font-size: 16px; font-weight: bold; color: #FF9500;");var eE=document.getElementById("root");if(!eE)throw new Error("Root element not found");(0,tE.createRoot)(eE).render((0,nE.jsx)(JS,{}));
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

scheduler/cjs/scheduler.production.js:
  (**
   * @license React
   * scheduler.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-client.production.js:
  (**
   * @license React
   * react-dom-client.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-router/dist/development/chunk-NISHYRIK.mjs:
  (**
   * react-router v7.9.3
   *
   * Copyright (c) Remix Software Inc.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   *)

react-router/dist/development/index.mjs:
  (**
   * react-router v7.9.3
   *
   * Copyright (c) Remix Software Inc.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   *)
*/
